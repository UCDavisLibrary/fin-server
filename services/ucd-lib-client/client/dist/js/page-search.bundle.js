(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{123:function(e,n){e.exports=(e=>(class extends e{constructor(){super(),this._injectModel("MediaModel")}_getImgPath(e){return this.MediaModel.getImgPath(e)}_getImgUrl(e,n,t){return this.MediaModel.getImgUrl(e,n,t)}_getImageMediaList(e){return this.MediaModel.getImageMediaList(e)}}))},127:function(e,n,t){"use strict";var i=t(10),a=t(130),o=t.n(a),l=t(31),s=t.n(l);customElements.define("app-auth-header",class extends(Mixin(i.a).with(EventInterface,s.a)){static get template(){return i["b"]`<iron-icon icon="fin-icons:account" style="width: 40px; height:40px"></iron-icon>`}constructor(){super(),this.active=!0}_onAuthUpdate(e){"loggedIn"===e.state?this.style.display="block":this.style.display="none"}});t(126);var r=t(49),c=t.n(r),d=t(48),h=t.n(d),p=t(30),u=t.n(p);customElements.define("app-search-header",class extends(Mixin(i.a).with(EventInterface,c.a,h.a,u.a)){static get properties(){return{selectedCollection:{type:String,value:""}}}static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}constructor(){super(),this.active=!0}async ready(){super.ready(),this._setCollections(await this.CollectionModel.overview())}_setCollections(e){let n={};e.payload.forEach(e=>{n[e["@id"]]=e.name}),this.$.searchInput.browse=n}_onBrowse(e){let n=e.detail;if(this.$.searchInput.browseValue="Browse",!n||"Browse"===n)return this.RecordModel.setSearchLocation(this._getEmptySearchDocument());this._setWindowLocation(n)}_onSearch(e){let n=this._getCurrentSearchDocument();this._setPaging(n,0),this._setTextFilter(n,e.detail),this.RecordModel.setSearchLocation(n)}_onRecordSearchUpdate(e){try{this.$.searchInput.value=e.searchDocument.text||""}catch(e){this.$.searchInput.value=""}}_onSelectedCollectionUpdate(e){this.selectedCollection=e}})},130:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: var(--default-primary-color);\n    color: var(--inverse-text-color);\n    padding: 15px;\n  }\n\n  app-auth-header {\n    margin-left: 10px;\n  }\n  \n  fin-search-box {\n    display: inline-block;\n    width: 100%;\n    box-sizing: border-box;\n    max-width: 525px;\n  }\n\n  .layout {\n    display: flex;\n    align-items: center;\n  }\n  \n  h2 {\n    margin: 0;\n    white-space: nowrap;\n  }\n  h2 a {\n    color: var(--default-secondary-color);\n    text-decoration: none;\n  }\n  h2 a:visited {\n    color: var(--default-secondary-color);\n    text-decoration: none;\n  }\n\n  img {\n    height: 50px;\n  }\n\n  .logo, h2 {\n    padding-right: 20px;\n    display: none;\n  }\n\n  .filler {\n    flex: .25;\n    display: none;\n  }\n\n  .logo-sm {\n    margin-right: 10px;\n  }\n\n  iron-icon.search-icon {\n    color: var(--default-secondary-color);\n  }\n\n  @media( min-width: 700px ) {\n    .logo {\n      display: block;\n    }\n    .logo-sm {\n      display: none;\n    }\n  }\n\n  @media( min-width: 815px ) {\n    h2 {\n      display: block;\n    }\n  }\n\n  @media( min-width: 1100px ) {\n    .filler {\n      display: block;\n    }\n  }\n</style>\n\n<div class="layout">\n  <a href="/" class="logo"><img border="0" src="/images/ucd-lib-logo-white.png" /></a>\n  <a href="/" class="logo-sm"><img border="0" src="/images/ucd-lib-logo-white-sm.png" /></a>\n  <h2><a href="/">Digital Collections</a></h2>\n  <div class="filler"></div>\n  <div style="flex:1; text-align:right">\n    <fin-search-box \n      id="searchInput" \n      on-search="_onSearch" \n      on-browse="_onBrowse"\n      placeholder="Search Keyword(s)">\n      <iron-icon icon="fin-icons:search" class="search-icon" slot="button-content"></iron-icon>\n    </fin-search-box>\n  </div>\n  <app-auth-header></app-auth-header>\n</div>\n\n'},138:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    color: var(--default-primary-color);\n    background-image: url(\'/images/header-colorbar.png\');\n    background-size: cover;\n    background-position: left center;    \n  }\n\n  .layout {\n    padding: 0 15px;\n  }\n\n  .layout > div {\n    margin: 0 5px;\n  }\n\n  a,\n  iron-icon {\n    cursor: pointer;\n  }\n\n  a:focus {\n    outline-color: var(--default-primary-color);\n  }\n</style>\n\n<div class="layout" hidden$="[[!selected]]" id="layout">\n  <a href="/search" tabindex="0">Search</a>\n  \n  <span hidden$="[[!collection]]">&gt;</span>\n  <span hidden$="[[!collection]]"><a on-click="_onCollectionClicked" tabindex="0">[[collection.name]]</a></span>\n\n  <span hidden$="[[!record]]">&gt;</span>\n  <span hidden$="[[!record]]">[[record.name]]</span>\n</div>'},139:function(e,n,t){"use strict";var i=t(10),a=t(48),o=t.n(a),l=t(49),s=t.n(l),r=t(30),c=t.n(r),d=t(138),h=t.n(d);customElements.define("app-search-breadcrumb",class extends(Mixin(i.a).with(EventInterface,c.a,o.a,s.a)){static get properties(){return{collection:{type:Object,value:null},record:{type:Object,value:null},name:{type:String,value:""}}}static get template(){let e=document.createElement("template");return e.innerHTML=h.a,e}constructor(){super(),this.active=!0}async ready(){super.ready(),this.$.layout.style.width=window.innerWidth-55+"px",window.addEventListener("resize",()=>{this.$.layout.style.width=window.innerWidth-55+"px"}),this._onAppStateUpdate(await this.AppStateModel.get())}async _onAppStateUpdate(e){e.lastLocation&&"search"===e.lastLocation.page?this.lastSearch=e.lastLocation.pathname:this.lastSearch=null,"record"===e.location.page&&(this.currentRecordId=e.location.pathname,this.record=await this._getRecord(this.currentRecordId),this.record=this.record.payload,this.record.collectionId?this.collection=await this._getCollection(this.record.collectionId):this.collection=null)}_onCollectionClicked(e){"keyup"===e.type&&13!==e.which||this._setWindowLocation(this.lastSearch||(this.collection?this.collection["@id"]:"/search"))}_onSelectedCollectionUpdate(e){e?this.collection&&this.collection["@id"]===e["@id"]||(this.collection=e,this.record=null):this.record||(this.collection=null)}})},140:function(e,n){e.exports="<style>\n  :host {\n    display: block;\n    margin: 15px;\n    outline : 0;\n    height: 320px;\n    width: 320px;\n  }\n\n  :host(:hover), :host(:focus)  {\n    cursor: pointer;\n    margin: 13px;\n    border: 2px solid var(--default-secondary-color);\n  }\n\n  .img.defaultImage {\n    background-size: 65%;\n  }\n\n  .img {\n    height: 320px;\n    width: 320px;\n    position: relative;\n    background-image: url('/images/logos/logo-white-512.png'); /* fallback */\n    background-color: var(--light-background-color);\n    background-size: cover; /* needs to be 65% */\n    background-repeat: no-repeat;\n    background-position: center center;    \n  }\n\n  .img > div  {\n    padding: 15px;\n    position: absolute;\n    left: 0;\n    right: 25px;\n    bottom: 25px;\n    \n    color: var(--default-secondary-color);\n    font-weight: var(--font-weight-heavy);\n\n    background-color: rgba(0, 38, 85, .8);      \n  }\n</style>\n\n<div class=\"img\" style$=\"background-image:url('[[collection.thumbnailUrl]]');\">\n  <div>[[collection.name]]</div>\n</div>\n"},141:function(e,n,t){"use strict";var i=t(10),a=t(140),o=t.n(a);customElements.define("app-collection-card",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{collection:{type:Object,value:()=>({})},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}constructor(){super(),this.active=!0}ready(){super.ready()}connectedCallback(){super.connectedCallback(),"/images/logos/logo-white-512.png"===this.collection.thumbnailUrl&&(this.shadowRoot.querySelectorAll(".img")[0].className+=" defaultImage")}})},178:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    background-color: var(--light-background-color);\n    position: relative;\n  }\n\n  #filters {\n    margin-left: 10px;\n  }\n\n  .title {\n    color: var(--default-primary-color);\n    font-weight: bold;\n    padding: 15px 0;\n    margin-left: 10px;\n    border-bottom: 1px solid var(--medium-background-color);\n    display: none;\n  }\n\n  app-filter-panel {\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .thumbnail {\n    background-size: cover;\n    background-position: center center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .thumbnail-root {\n    position: relative;\n    height: 200px;\n  }\n\n  .label {\n    padding: 10px 0;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy);\n  }\n\n  .collection-filter {\n    padding: 4px 5px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .outer-drawer-toggle {\n    position: relative;\n  }\n  .outer-drawer-toggle[spacer] {\n    height: 50px;\n    border-bottom: 1px solid var(--medium-background-color);\n    margin-left: 10px;\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    position: absolute;\n    z-index: 15;\n    top : 15px;\n    right: -24px;\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  @media(min-width: 975px) {\n    h2 {\n      display: block;\n    }\n    .outer-drawer-toggle {\n      display: none;\n    }\n    .title {\n      display: block;\n    }\n  }\n</style>\n\n<div class="title" hidden$="[[collectionMode]]" >FILTERS</div>\n\n<div class="outer-drawer-toggle" spacer$="[[!collectionMode]]" on-click="_fireToggleDrawer">\n  <button class="drawer-toggle">\n    <span><span hidden$="[[!collectionMode]]">Info / </span>Filters</span>\n    <iron-icon icon="fin-icons:close"></iron-icon>\n  </button>\n</div>\n<div class="thumbnail-root"  hidden$="[[!collectionMode]]">\n  <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnailUrl]]\')"></div>\n  \x3c!-- <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnail]]\')"></div>  --\x3e\n</div>\n\n<app-tabs \n  tabs="[[tabs]]" \n  selected="{{selectedTab}}" \n  hidden$="[[!collectionMode]]">\n</app-tabs>\n\n<iron-pages \n  selected="[[selectedTab]]"   \n  attr-for-selected="id" \n  selected-attribute="active">\n  <div id="filters">\n\n    <div hidden$="[[!collectionMode]]" class="label">Collection</div>\n    <div hidden$="[[!collectionMode]]" class="collection-filter">\n      <app-facet-checkbox \n        type="collection" \n        value="[[selectedCollection.name]]" \n        checked="[[collectionMode]]"\n        on-click="_removeCollectionFilter">\n      </app-facet-checkbox>\n    </div>\n\n    <template is="dom-repeat" items="[[facetFilters]]">\n      <app-filter-panel filter="[[item]]"></app-filter-panel>\n    </template>\n  </div>\n  <app-collection-info-panel id="info"></app-collection-info-panel>\n</iron-pages>\n\n'},179:function(e,n){e.exports='<style>\n  :host {\n    display : block;\n  }\n  .layout {\n    display: flex;\n  }\n  .tab {\n    flex: 1;\n    cursor: pointer;\n    text-transform: uppercase;\n    padding: 12px 0 9px 0;\n    text-align: center;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-weight: normal;\n    color: var(--gray-text);\n    border-bottom: 2px solid var(--gray-text);\n  }\n  .tab:focus {\n    border-bottom-color: var(--default-secondary-color);\n    outline: none;\n  }\n  .tab[selected] {\n    cursor: default;\n    font-weight: bold;\n    color: var(--default-primary-color);\n    border-bottom: 4px solid var(--default-primary-color);\n    padding: 12px 0 7px 0;\n  }\n</style>\n\n<div class="layout">\n  <template is="dom-repeat" items="[[tabs]]">\n    <div class="tab" \n      role="tab" \n      tabindex="0" \n      aria-selected$="[[item.ariaSelected]]"\n      selected$="[[item.selected]]"\n      on-click="_onTabClicked" \n      on-keyup="_onTabClicked"\n      value$="[[item.value]]">\n      [[item.label]]\n    </div>\n  </template>\n</div>'},180:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    padding: 15px;\n  }\n  h3 {\n    color: var(--default-primary-color);\n    margin: 5px 0;\n  }\n  .section {\n    margin-bottom: 20px;\n  }\n</style>\n\n<div class="section" hidden$="[[!description]]">\n  <h3>Description</h3>\n  <div>[[description]]</div>\n</div>\n\n<div class="section" hidden$="[[!subject]]">\n  <h3>Subject</h3>\n  <div>[[subject]]</div>\n</div>\n\n<div class="section" hidden$="[[!coverage]]">\n  <h3>Coverage</h3>\n  <div>[[coverage]]</div>\n</div>\n\n\n<div id="description"></div>'},186:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    cursor: pointer;\n  }\n\n  :host(:focus) {\n    outline: var(--default-outline);\n  }\n\n  :host([disabled]) {\n    cursor: default;\n    outline: none !important;\n  }\n\n  iron-icon {\n    display: none;\n    color: var(--default-secondary-color);\n    min-width: 24px;\n    margin-right: 2px;\n  }\n\n  div {\n    user-select: none;\n    display: flex;\n    min-height: 24px;\n    display: flex;\n    align-items: center;\n  }\n\n  span {\n    display: inline-block;\n    padding-top: 3px;\n  }\n\n  div[checked] iron-icon {\n    display: inline-block;\n  }\n\n  div[checked] .value {\n    font-style: italic;\n    font-weight: bold;\n  }\n\n  div[disabled] iron-icon {\n    display: none;\n  }\n\n  div[disabled] .value {\n    font-style: italic;\n    color: var(--gray-text);\n  }\n</style>\n\n<div checked$="[[checked]]" disabled$="[[disabled]]">\n  <iron-icon icon="fin-icons:close"></iron-icon>\n  <span class="value">[[realLabel]]</span>\n</div>'},187:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block\n  }\n\n  .filter {\n    padding: 4px 5px;\n    display: flex;\n    align-items: center;\n  }\n  .filter a {\n    display: inline-block;\n    cursor: pointer;\n    color: black;\n    transition: color 250ms ease-out, transform 250ms ease-out;\n    transform: scale(1);\n  }\n  .filter a span {\n    color: var(--default-primary-color);\n  }\n  .filter a:hover {\n    transform: scale(1.5);\n    color: var(--default-primary-color);\n  }\n\n  .active-filter {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    color: white;\n    font-size: 14px;\n    background: var(--primary-text-color);\n    padding: 5px;\n    border-radius: 3px;\n    margin: 3px;\n  }\n\n  .active-filter:hover {\n    color: var(--default-primary-color);\n    background: #ccc;\n  }\n\n  .count {\n    color: var(--text-disabled);\n    flex: 1;\n    text-align: right;\n    min-width : 40px;\n    padding: 0 10px;\n  }\n\n  .overflow {\n    overflow: auto;\n    max-height: 200px;\n  }\n\n  iron-list {\n    height: 200px;\n    display: none;\n  }\n\n  app-normal-checkbox {\n    overflow: hidden;\n    padding-right: 5px;\n  }\n\n  paper-checkbox[active] .key {\n    color: var(--default-primary-color);\n    font-weight: bold;\n  }\n\n  paper-checkbox[disabled] .key {\n    color: var(--secondary-text-color);\n    font-style: italic;\n  }\n</style>\n\n\x3c!-- used for large lists --\x3e\n<iron-list id="list" items="[[bucketsIronList]]" as="item">\n  <template>\n    <div class="filter">\n\n      <app-normal-checkbox\n        type$="[[label]]"\n        index$="[[index]]"\n        value$="[[item.key]]"\n        label-map="[[valueMap]]"\n        checked$="[[item.active]]" \n        on-change="_toggleFilter"\n        disabled$="[[item.disabled]]">\n      </app-normal-checkbox>\n\n      <div class="count">[[item.doc_count]]</div>\n    </div>\n  </template>\n</iron-list>\n\n\x3c!-- used for small lists --\x3e\n<div class="overflow">\n  <div>  \n    <template is="dom-repeat" items="[[buckets]]">\n      <div class="filter">\n\n        <app-normal-checkbox\n          type$="[[label]]"\n          index$="[[index]]"\n          value$="[[item.key]]"\n          label-map="[[valueMap]]"\n          checked$="[[item.active]]" \n          on-change="_toggleFilter"\n          disabled$="[[item.disabled]]">\n        </app-normal-checkbox>\n\n        <div class="count">[[item.doc_count]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n'},188:function(e,n){e.exports=(e=>(class extends e{constructor(){super(),this._injectModel("FiltersModel")}}))},189:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .label {\n    cursor: pointer;\n    display: flex;\n    color: var(--default-primary-color);\n    padding: 10px 0;\n    font-weight: bold;\n    position: relative;\n    outline: none !important;\n  }\n\n  .highlight {\n    position: absolute;\n    left: -10px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    background-color:  var(--default-secondary-color);\n    display: none;\n  }\n\n  .label:focus > .highlight {\n    display: block;\n  }\n\n  #activeFilters > div {\n    padding: 4px 5px;\n  }\n\n  .filter {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    font-weight: bold;\n    font-style: italic;\n  }\n\n  iron-icon[closed] {\n    transform: rotate(-90deg);\n  }\n\n  iron-icon[clear] {\n    color: var(--default-secondary-color);\n    margin-right: 2px;\n  }\n\n  #filters {\n    overflow-y: auto;\n    max-height: 200px;\n  }\n</style>\n\n<div class="label" on-click="_onToggleClicked" on-keyup="_onToggleClicked" role="button" tabindex="0">\n  <div style="flex:1">[[filter.label]]</div>\n  <iron-icon icon="arrow-drop-down" closed$="[[!opened]]"></iron-icon>\n  <div class="highlight"></div>\n</div>\n\n<div id="activeFilters" hidden$="[[opened]]">\n  <div hidden$="[[!selected.length]]">\n    <template is="dom-repeat" items="[[selected]]">\n      <div class="filter" \n        on-click="_onFilterClicked"\n        on-keyup="_onFilterClicked" \n        label$="[[item.label]]"\n        tabindex="0" \n        role="button">\n        <iron-icon icon="fin-icons:close" clear></iron-icon>\n        <div>[[item.label]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n\n<div id="filters" hidden$="[[!opened]]"></div>'},190:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n  }\n  \n  .labels {\n    display: flex;\n    margin: 0 23px 0 13px;\n    color: var(--gray-text);\n    font-size: var(--font-size-sm);\n  }\n\n  .inputs {\n    display: flex;\n    align-items: center;\n  }\n\n  input[type="number"] {\n    margin: 0 13px;\n    padding: 7px;\n    border: 0;\n    width: 50px;\n    font-size: var(--font-size-sm);\n  }\n\n  .unknown {\n    margin-left: 9px;\n    display: flex;\n    align-items: center;\n  }\n\n  label {\n    font-size: var(--font-size-sm);\n    font-style: italic;\n    padding-left: 5px;\n  }\n\n  app-range-slider {\n    --light-background-color: var(--medium-background-color);\n  }\n</style>\n\n<div class="inputs">\n  <input id="minValueInput" type="number" on-change="_onInputChange" >\n  <span> - </span>\n  <input id="maxValueInput" type="number" on-change="_onInputChange" >\n</div>\n\n<div style="margin-right: 10px">\n  <app-range-slider\n    id="slider"\n    on-range-value-change="_onRangeSliderChange"\n    abs-min-value="[[absMinValue]]"\n    abs-max-value="[[absMaxValue]]"\n    min-value="[[minValue]]"\n    max-value="[[maxValue]]">\n  </app-range-slider>\n</div>\n\n<div class="labels">\n  <div style="flex:1">[[absMinValue]]</div>\n  <div>[[absMaxValue]]</div>\n</div>\n\n<div class="unknown" hidden$="[[showUnknown]]">\n  <input type="checkbox" id="unknown" on-click="_onRangeNullChange" checked />\n  <label for="unknown">include unknown / unspecified</label>\n</div>'},191:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n    position: relative;\n    height: 50px;\n    margin: 0 13px;\n\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently */\n  }\n\n  #numberLine {\n    position: absolute;\n    left : 0;\n    right : 0;\n    height: 3px;\n    background-color: var(--light-background-color, #888);\n  }\n\n  #fillLine {\n    position: absolute;\n    cursor: move;\n    background-color: var(--default-primary-color);\n    height: 3px;\n  }\n\n  .btn {\n    position: absolute;\n    height: 25px;\n    width: 25px;\n    cursor: move;\n  }\n\n  .btn > div {\n    margin: 5px;\n    height: 15px;\n    width: 15px;\n    border-radius: 15px;\n    background-color: var(--default-primary-color);\n    transition: all 150ms linear;\n  }\n\n  .btn[moving] > div {\n    margin: 0px;\n    height: 25px;\n    width: 25px;\n    border-radius: 25px;\n  }\n\n  .label {\n    width : 25px;\n    font-size: 12px; \n    position: absolute;\n    text-align: center;\n    transform: scale(0);\n    transition: transform 200ms linear;\n    color: var(--default-primary-color);\n  }\n\n  .label[moving] {\n    transform: scale(1);\n  }\n\n</style>\n\n<div id="numberLine"></div>\n\n<div id="fillLine" \n  prop="range" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart">\n</div>\n\n<div id="lowNumberLabel" class="label" moving$="[[isMoving]]">[[minValueLabel]]</div>\n<div id="highNumberLabel" class="label" moving$="[[isMoving]]">[[maxValueLabel]]</div>\n\n<div id="lowNumberBtn" \n  class="btn" \n  prop="min" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMin]]" >\n  <div></div>\n</div>\n\n<div id="highNumberBtn" \n  class="btn" \n  prop="max" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMax]]">\n  <div></div>\n</div>'},194:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    max-width: 1150px;\n    position: relative;\n  }\n\n  .header {\n    font-size: var(--font-size-sm);\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n\n  select {\n    margin-left: 10px;\n    border: 1px solid var(--light-background-color);\n    border-radius: 0;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 16px 16px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n  }\n  /* for IE */\n  select::-ms-expand {\n    display: none;\n  }\n\n  h3 {\n    border-top: 1px solid var(--light-background-color);\n    margin: 15px 0 0 0;\n    padding: 15px 0 0 0;\n    color: var(--default-primary-color);\n  }\n\n  .masonry {\n    padding: 10px;\n    position: relative;\n  }\n\n  .masonry .item {\n    display: block;\n    position: absolute;\n    /* visibility: hidden; */\n    top : 25px;\n    left: 25px;\n    will-change: top, left;\n    transition: top 500ms ease-out, left 500ms ease-out;\n  }\n\n  .list {\n    margin: 10px;\n  }\n\n  .list .item {\n    padding: 10px;\n    margin-bottom: 15px;\n    background-color: #daaa00;\n    height: 250px;\n  }\n\n  .spacer {\n    height: 20px;\n    border-right: 1px solid var(--light-background-color);\n  }\n\n  .total {\n    font-style: italic; \n    padding-left: 10px;\n  }\n\n  .mobile-total {\n    font-style: italic; \n  }\n\n  .filler {\n    flex: 1;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n  }\n\n  .error {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n    color: red;\n  }\n\n  cork-pagination {\n    display: inline-block;\n\n    --cork-color : var(--default-primary-color);\n    --cork-background-color : var(--default-secondary-color);\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  .drawer-toggle[disabled] {\n    color: var(--light-background-color);\n  }\n\n  .header {\n    display : none;\n  }\n\n  .mobile-header {\n    padding-top: 15px;\n    margin-bottom: 10px;\n  }\n\n  .mobile-header .row2 {\n    display: flex;\n    align-items: center;\n    margin-right: 10px;\n  }\n\n  .collections {\n    text-align: center;\n  }\n\n  @media( min-width: 975px ) {\n    .header {\n      display: flex;\n    }\n    .mobile-header {\n      display: none;\n    }\n  }\n</style>\n\n<div class="header">\n  <div class="total">[[total]] results found</div>\n  \n  <div class="filler"></div>\n  \n  <paper-icon-button \n    noink\n    icon="fin-icons:grid" \n    disabled$="[[!isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="masonry">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  <paper-icon-button \n    noink\n    icon="fin-icons:list" \n    disabled$="[[isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="list">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  \n  <div>\n    <select id="numPerPage" on-change="_onPageSizeChange">\n      <option value="50">50</option>\n      <option value="20">20</option>\n      <option value="10" selected>10</option>\n    </select>\n  </div>\n  <div style="margin: 0 10px; font-style:italic">Items per page</div>\n</div>\n\n<div class="mobile-header">\n  <div>\n    <div style="display:inline-block">\n      <button class="drawer-toggle" on-click="_onToggleDrawer">\n        <span>Info / Filters</span>\n        <iron-icon icon="add"></iron-icon>\n      </button>\n    </div>\n  </div>\n\n  <div class="row2">\n    <div class="total">[[total]] results</div>\n\n    <div class="filler"></div>\n    \n    <paper-icon-button \n      noink\n      icon="fin-icons:grid" \n      disabled$="[[!isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="masonry">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    <paper-icon-button\n      noink\n      icon="fin-icons:list" \n      disabled$="[[isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="list">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    \n    <div>\n      <select id="numPerPageM" on-change="_onPageSizeChange">\n        <option>50</option>\n        <option>20</option>\n        <option>10</option>\n      </select>\n    </div>\n    <div style="margin: 0 10px; font-style:italic">per page</div>\n  </div>\n</div>\n\n<div class="collections" hidden$="[[!showCollectionResults]]">\n  <div hidden$="[[!collectionResults.length]]">\n    <h3>Collections</h3>\n    <template is="dom-repeat" items="[[collectionResults]]">\n      <app-collection-card \n        collection="[[item]]" \n        on-keyup="_onCollectionClicked"\n        on-click="_onCollectionClicked">\n      </app-collection-card>\n    </template>\n    <h3 hidden$="[[!results.length]]">Items</h3>\n  </div>\n</div>\n\n<div hidden$="[[showError]]">\n  <div hidden$="[[showLoading]]">\n    <div class="masonry" id="layout" hidden$="[[isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-grid-result data="[[item]]" class="item"></app-search-grid-result>\n      </template>\n    </div>\n\n    <div class="list" hidden$="[[!isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-list-result data="[[item]]"></app-search-list-result>\n      </template>\n    </div>\n  </div>\n</div>\n\n<div class="error" hidden$="[[!showError]]">\n  <div>[[errorMsg]]</div>\n</div>\n<div class="loading" hidden$="[[!showLoading]]">\n  <paper-spinner-lite active$="[[showLoading]]"></paper-spinner-lite>\n</div>\n\n<div style="text-align:center">\n  <cork-pagination \n    total-results="[[paginationTotal]]" \n    items-per-page="[[numPerPage]]"\n    current-index="[[currentIndex]]"\n    on-nav="_onPaginationNav">\n  </cork-pagination>\n</div>\n\n<div hidden$="[[!totalOverMaxWindow]]" style="text-align: center">Digital Collections limits results to \n  10,000.  Use keywords and/or filters to refine search.\n</div>'},195:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: white;\n    margin: 10px;\n    border: 2px solid transparent;\n  }\n  \n  :host(:hover), :host(:focus) {\n    cursor: pointer;\n    border: 2px solid var(--default-secondary-color);\n    outline: none !important;\n  }\n\n  .img {\n    height: 250px;\n    width: var(--grid-cell-width);\n    background-size: cover;\n    background-color: white;\n    background-position: center center;\n  }\n\n  .collection-name {\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n  }\n\n  .year {\n    color: var(--gray-text);\n    flex: 1;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  .layout {\n    display: flex;\n  }\n\n  h4 {\n    margin: 10px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .flex-vertical {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .data {\n    padding: 15px; \n    flex: 1;\n    overflow: hidden;\n  }\n\n  @media(max-width: 600px) {\n    .img {\n      height: auto;\n      width: 150px;\n    }\n\n    .data {\n      padding: 8px;\n    }\n\n    :host {\n      display: block;\n      background-color: white;\n      margin: 10px 0;\n    }\n  }\n</style>\n\n<div class="layout">\n  <div style$="background-image: url(\'[[imgUrl]]\')" hidden$="[[!isImage]]" class="img" ></div>\n\n  <div class="data">\n    <div class="flex-vertical">\n      <div class="collection-name">[[collectionName]]</div>\n      \n      <h4>[[name]]</h4>\n    \n      <template is="dom-repeat" items="[[creator]]">\n        <app-search-result-creator creator="[[item]]"></app-search-result-creator>\n      </template>\n      \n      <div class="spacer"></div>\n\n      <div class="footer">\n        <div class="year">[[year]]</div>\n        <div>\n          \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},196:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    width: var(--grid-cell-width);\n    background-color: white;\n    cursor: pointer;\n  }\n\n  :host(:hover), :host(:focus) {\n    border: 2px solid var(--default-secondary-color);\n    margin: -2px 0 0 -2px;\n    outline: none !important;\n  }\n\n  @keyframes show-img {\n    from {opacity: 0}\n    to {opacity: 1}\n  }\n\n  img {\n    animation: show-img 300ms linear;\n    box-sizing: border-box;\n    display:none;\n    /* width: var(--grid-cell-width); */\n    /* background-size: cover;\n    background-color: transparent;\n    background-position: center center; */\n    /* position: absolute;\n    top: 0;\n    left: 0; */\n  }\n\n  .collection-name {\n    font-style: italic;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n  }\n\n  .year {\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  h4 {\n    margin: 5px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .image {\n    position: relative; \n    background-size: cover;\n    background-color: transparent;\n    background-position: center center;\n    width: 250px; \n  }\n\n  .card-text {\n    padding: 15px;\n    line-height: 1.3;\n  }\n\n  .video-thumbnail {\n    z-index: 1000;\n    width: 30px; \n    height: 30px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    background-image: url(\'https://via.placeholder.com/25\');\n  }\n</style>\n\n<div \n  hidden$="[[!isImage]]" \n  class="image" \n  id="imgRoot"\n  style$="background-image: url(\'[[imgThumbail]]\'); height:[[imgHeight]]px;">\n  <img id="img" src$="[[imgUrl]]" style$="height:[[imgHeight]]px; width: 100%" onload="this.style.display=\'block\';" />\n  <div hidden$="[[!isVideo]]" class="video-thumbnail"></div>\n  \x3c!--\n    <div style$="background-image: url(\'[[imgThumbail]]\');height:[[imgHeight]]px" class="img"></div>\n    <div style$="background-image: url(\'[[imgUrl]]\');height:[[imgHeight]]px" class="img"></div>\n  --\x3e\n</div>\n\n<div class="card-text">\n  <div class="collection-name">[[collectionName]]</div>\n\n  <h4>[[name]]</h4>\n\n  <template is="dom-repeat" items="[[creator]]">\n    <app-search-result-creator creator="[[item]]" grid></app-search-result-creator>\n  </template>\n\n  <div class="footer">\n    <div class="year">[[year]]</div>\n    <div>\n      \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n    </div>\n  </div>\n</div>'},197:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .text {\n    display: block;\n    color: var(--gray-text);\n    line-height: 1.3;\n    font-weight: var(--font-weight-light);\n  }\n  :host([grid]) .text {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: calc(var(--grid-cell-width) - 30px);\n  }\n</style>\n\n<a class="text" hidden="[[!link]]" href="[[textLabel]]" target="_blank" rel="noopener" on-click="_onClick">[[textLabel]]</a>\n<div class="text" hidden="[[link]]">[[textLabel]]</div>'},200:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .search-container {\n    background-color: var(--super-light-background-color);\n    min-height: 60vh;\n    display: block;\n  }\n  .search-content {\n    flex: 1;\n    padding-bottom: 35px;\n  }\n  app-filters-panel {\n    width: 350px;\n  }\n\n  #drawer app-filters-panel {\n    width: 300px;\n  }\n  \n  #drawer {\n    position: absolute;\n    top: 0;\n    left: -335px;\n    bottom: 0;\n    background: white;\n    width: 300px;\n    z-index: 10;\n    transition: left 300ms ease-out;\n    background-color: var(--light-background-color);\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: .7;\n    }\n  }\n\n  #drawer-background {\n    opacity: .7;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: black;\n    z-index: 5;\n    display: none;\n    animation: fadeIn 300ms;\n  }\n\n  #drawer[open] {\n    left: 0;\n  }\n\n  #drawer-background[open] {\n    display: block;\n  }\n\n  #desktop-filter-panel {\n    display: none;\n  }\n\n  @media( min-width: 975px ) {\n    #outerDrawer {\n      display: none;\n    }\n    #desktop-filter-panel {\n      display: block;\n    }\n    .search-container {\n      display: flex;\n    }\n  }\n</style>\n\n<app-search-header></app-search-header>\n<app-search-breadcrumb></app-search-breadcrumb>\n\n<div style="position: relative">\n  <div id="outerDrawer">\n    <div id="drawer" open$="[[drawerOpen]]">\n      <app-filters-panel on-toggle-drawer="_toggleDrawer"></app-filters-panel>\n    </div>\n    <div id="drawer-background" open$="[[drawerOpen]]" on-click="_toggleDrawer"></div>\n  </div>\n\n  <div class="search-container">\n    <app-filters-panel id="desktop-filter-panel"></app-filters-panel>\n    <div class="search-content">\n      <app-search-results-panel \n        id="resultsPanel" \n        on-toggle-drawer="_toggleDrawer" \n        on-page-size-change="_onPageSizeChange"\n        on-page-change="_onPaginationChange">\n      </app-search-results-panel>\n    </div>\n  </div>\n</div>'},204:function(e,n,t){"use strict";t.r(n);var i=t(10),a=(t(153),t(200)),o=t.n(a),l=(t(127),t(139),t(199),t(50)),s=t.n(l),r=t(197),c=t.n(r);customElements.define("app-search-result-creator",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=c.a,e}static get properties(){return{creator:{type:Object,value:null,observer:"_onCreatorUpdate"},textLabel:{type:String,value:""},link:{type:Boolean,value:!1}}}_onCreatorUpdate(){this.creator&&(this.creator["@id"]?this.link=!0:this.link=!1,this.creator.name?this.textLabel=this.creator.name:this.textLabel=this.creator["@id"])}_onClick(e){e.stopPropagation()}});var d=t(48),h=t.n(d),p=t(30),u=t.n(p),g=t(123),m=t.n(g);class v extends(Mixin(i.a).with(EventInterface,u.a,h.a,m.a)){static get properties(){return{data:{type:Object,value:()=>{},observer:"_onDataUpdate"},fetchId:{type:String,value:""},isVideo:{type:Boolean,value:!1},isImage:{type:Boolean,value:!1},imgUrl:{type:String,value:""},collectionName:{type:String,value:""},name:{type:String,value:""},description:{type:String,value:""},creator:{type:Array,value:()=>[]},year:{type:String,value:""},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}constructor(){super(),this.baseUrl=window.location.protocol+"//"+window.location.host+"/fcrepo/rest"}ready(){super.ready(),this.addEventListener("click",e=>this._onClick()),this.addEventListener("keyup",e=>{13===e.which&&this._onClick()})}_onClick(){this._setWindowLocation(this.fetchId)}async _onDataUpdate(){let e=Object.assign({},this.data);if(!e["@id"])return;this.fetchId=e["@id"],this.name=this.data.name||(this.data.identifier?this.data.identifier["@id"]:""),this.data.video&&(this.isVideo=!0);let n=this.shadowRoot.querySelector("#img");n&&(n.style.display="none");let t=this.data.image;if(t){let e=t.height/t.width;this.imgHeight=Math.floor(250*e),this.imgUrl=this._getImgUrl(t.url,null,this.imgHeight),t.colorPalette?this.imgThumbail=t.colorPalette:this.imgThumbail="",this.isImage=!0}else this.imgUrl="",this.isImage=!1;if(this.description=this.data.description||"",this.description.length>200&&(this.description=this.description.substr(0,200)+"..."),this.year=s.a.getYearFromDate(e.created),Array.isArray(e.creator)?this.creator=e.creator:this.creator=[e.creator||""],this.collectionName=this.data.collectionId||"",this.collectionName){let e=await this._getCollection(this.collectionName);this.collectionName=e.name}}}var b=t(196),y=t.n(b);customElements.define("app-search-grid-result",class extends v{static get template(){let e=document.createElement("template");return e.innerHTML=y.a,e}});var f=t(195),x=t.n(f);customElements.define("app-search-list-result",class extends v{static get template(){let e=document.createElement("template");return e.innerHTML=x.a,e}});t(141);var w=t(49),k=t.n(w),_=t(194),M=t.n(_);const L="search-results-layout";let C=localStorage.getItem(L);C="list"===C;customElements.define("app-search-results-panel",class extends(Mixin(i.a).with(EventInterface,k.a,u.a,h.a,m.a)){static get properties(){return{results:{type:Array,value:()=>[]},collectionResults:{type:Array,value:()=>[]},masonryMargin:{type:Number,value:15},isListLayout:{type:Boolean,value:C},total:{type:String,value:"0"},numPerPage:{type:Number,value:1},currentIndex:{type:Number,value:0},showCollectionResults:{type:Boolean,value:!1},showError:{type:Boolean,value:!1},showLoading:{type:Boolean,value:!1},errorMsg:{type:Boolean,value:!1},paginationTotal:{type:Number,value:!1},totalOverMaxWindow:{type:Boolean,value:!1}}}static get template(){let e=document.createElement("template");return e.innerHTML=M.a,e}constructor(){super(),this.active=!0,this.resizeTimer=-1,window.addEventListener("resize",()=>this._resizeAsync()),this.EventBus().on("show-collection-search-results",e=>this._updateCollectionResultsVisibility(e))}_onAppStateUpdate(e){"search"===e.location.page&&this._resizeAsync()}render(e,n,t,i){this.results=[],this.showHeaderFooter=!0,this.showError=!1,clearTimeout(this.showLoadingTimer),this.showLoading=!1,requestAnimationFrame(()=>{this.total=this.numberWithCommas(n);let a=Math.floor((1e4-t)/t)*t;n>a?(n=a,this.totalOverMaxWindow=!0):this.totalOverMaxWindow=!1,this.results=e,this.paginationTotal=n,this.numPerPage=t,this.$.numPerPage.value=t+"",this.$.numPerPageM.value=t+"",this.currentIndex=i,requestAnimationFrame(()=>this._resize())})}numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}onLoading(){this.results=[],this.showCollectionResults=!1,this.showError=!1,this.showLoadingTimer=setTimeout(()=>{this.showLoading=!0},100)}onError(e){this.results=[],this.showCollectionResults=!1,this.showError=!0,clearTimeout(this.showLoadingTimer),this.showLoading=!1,e.showErrorMessage?this.errorMsg=e.error.message:this.errorMsg="Ooops. Something went wrong with search!"}_onLayoutToggle(e){"masonry"===e.currentTarget.getAttribute("type")?(this.isListLayout=!1,localStorage.setItem(L,"masonry")):(this.isListLayout=!0,localStorage.setItem(L,"list")),this.isListLayout||requestAnimationFrame(()=>this._resize())}_resizeAsync(){-1!==this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.resizeTimer=-1,this._resize()},50)}_resize(){if(this.isListLayout)return;let e=this.$.layout.querySelector("app-search-grid-result");if(!e)return;let n=this.offsetWidth,t=e.offsetWidth+this.masonryMargin,i=Math.max(Math.floor(n/t),1),a=Math.floor((n-i*t)/2),o=[];for(let e=0;e<i;e++)o.push(0);let l=this.$.layout.querySelectorAll("app-search-grid-result");for(let e=0;e<l.length;e++){let n=this._findMinCol(o);o[n],l[e].style.left=a+n*t+"px",l[e].style.top=o[n]+"px",o[n]+=l[e].offsetHeight+this.masonryMargin}let s=Math.max.apply(Math,o);this.$.layout.style.height=s+"px"}_findMinCol(e){let n=e[0],t=0;for(var i=1;i<e.length;i++)n>e[i]&&(n=e[i],t=i);return t}_onToggleDrawer(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}_onPageSizeChange(e){this.dispatchEvent(new CustomEvent("page-size-change",{detail:parseInt(e.currentTarget.value)}))}_onPaginationNav(e){this.dispatchEvent(new CustomEvent("page-change",{detail:e.detail}))}_updateCollectionResultsVisibility(e){this.showCollectionResults=e}_onCollectionSearchUpdate(e){"loaded"===e.state&&(this.collectionResults=e.payload.results)}_onCollectionClicked(e){if("keyup"===e.type&&13!==e.which)return;let n=e.currentTarget.collection["@id"],t=this._getEmptySearchDocument();this._setKeywordFilter(t,"isPartOf.@id",n),this.RecordModel.setSearchLocation(t)}});t(70),t(143),t(193);var S=t(191),$=t.n(S);customElements.define("app-range-slider",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=$.a,e}static get properties(){return{absMinValue:{type:Number,value:0,observer:"_renderAsync"},absMaxValue:{type:Number,value:100,observer:"_renderAsync"},minValue:{type:Number,value:10,observer:"_renderAsync"},maxValue:{type:Number,value:90,observer:"_renderAsync"},minValueLabel:{type:String,value:""},maxValueLabel:{type:String,value:""},width:{type:Number,value:1},height:{type:Number,value:1},btnHeight:{type:Number,value:1},moving:{type:String,value:""},movingMin:{type:Boolean,value:!1},movingMax:{type:Boolean,value:!1},isMoving:{type:Boolean,value:!1}}}constructor(){super(),this._windowResizeListener=this._onResize.bind(this),this._windowMouseListener=this._onMoveStop.bind(this),this.addEventListener("mousemove",e=>this._onMove(e)),this.addEventListener("touchmove",e=>this._onMove(e))}connectedCallback(){super.connectedCallback(),requestAnimationFrame(()=>{this._onResize()}),window.addEventListener("resize",this._windowResizeListener),window.addEventListener("mouseup",this._windowMouseListener),window.addEventListener("mouseout",this._windowMouseListener),window.addEventListener("touchend",this._windowMouseListener),window.addEventListener("touchcancel",this._windowMouseListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("mouseup",this._windowMouseListener),window.removeEventListener("mouseout",this._windowMouseListener),window.removeEventListener("touchend",this._windowMouseListener),window.removeEventListener("touchcancel",this._windowMouseListener)}_onResize(){this.width=this.offsetWidth||1,this.height=this.offsetHeight,this.left=this.offsetLeft,this.btnHeight=this.$.lowNumberBtn.offsetHeight,this._render()}_valueToPx(e){e-=this.absMinValue;let n=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e/n)}_pxToValue(e){let n=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e*n)+this.absMinValue}_renderAsync(){this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(()=>{this.renderTimer=0,this._render()},0)}_render(){let e=.6*this.height;this.$.numberLine.style.top=e+"px",this.$.fillLine.style.top=e+"px";let n=this.btnHeight/2;this.$.lowNumberBtn.style.top=e-n+"px",this.$.highNumberBtn.style.top=e-n+"px",this.$.lowNumberLabel.style.top=e-n-22+"px",this.$.highNumberLabel.style.top=e-n-22+"px";let t=this._valueToPx(this.minValue),i=this._valueToPx(this.maxValue);this.$.lowNumberBtn.style.left=t-n+"px",this.$.highNumberBtn.style.left=i-n+"px",this.$.lowNumberLabel.style.left=t-n+"px",this.$.highNumberLabel.style.left=i-n+"px",this.$.fillLine.style.left=t+"px",this.$.fillLine.style.width=i-t+"px",this.minValueLabel=this.renderLabel(this.minValue),this.maxValueLabel=this.renderLabel(this.maxValue)}_onMoveStart(e){this.moving=e.currentTarget.getAttribute("prop"),"range"===this.moving&&(this.startRange={min:e.currentTarget.offsetLeft,max:e.currentTarget.offsetLeft+e.currentTarget.offsetWidth,left:e.pageX-this.left}),this.isMoving=!0,this.movingMin="max"!==this.moving,this.movingMax="min"!==this.moving}_onMove(e){if(!this.moving)return;let n;if(e.preventDefault(),"touchmove"===e.type){if(!e.changedTouches.length)return;n=e.changedTouches[0].pageX-this.left}else n=e.pageX-this.left;if("min"===this.moving)this.minValue=this._pxToValue(n);else if("max"===this.moving)this.maxValue=this._pxToValue(n);else if("max"===this.moving)this.maxValue=this._pxToValue(n);else if("range"===this.moving){let e=this.startRange.left-n;this.minValue=this._pxToValue(this.startRange.min-e),this.maxValue=this._pxToValue(this.startRange.max-e)}this.minValue<this.absMinValue&&(this.minValue=this.absMinValue),this.maxValue>this.absMaxValue&&(this.maxValue=this.absMaxValue),this.minValue>this.maxValue&&("min"===this.moving?this.minValue=this.maxValue:this.maxValue=this.minValue)}_onMoveStop(){this.moving&&(this.moving="",this.movingMin=!1,this.movingMax=!1,this.isMoving=!1,this.dispatchEvent(new CustomEvent("range-value-change",{detail:{min:this.minValue,max:this.maxValue}})))}renderLabel(e){return e}});var V=t(190),T=t.n(V);customElements.define("app-range-filter",class extends(Mixin(i.a).with(EventInterface,k.a,h.a)){static get template(){let e=document.createElement("template");return e.innerHTML=T.a,e}static get properties(){return{label:{type:String,value:""},filter:{type:String,value:""},absMinValue:{type:Number,value:-1},absMaxValue:{type:Number,value:-1},minValue:{type:Number,value:-1},maxValue:{type:Number,value:Number.MAX_VALUE},showUnknown:{type:Boolean,value:!1}}}constructor(){super(),this.active=!0}connectedCallback(){super.connectedCallback(),this.resize()}resize(){this.$.slider._onResize(),setTimeout(()=>{this.$.slider._onResize()},100)}_isDefaultState(){if(!this._isFilterApplied()){let e=this._getCurrentSearchDocument();return this._removeRangeFilter(e,this.filter),this.RecordModel.setSearchLocation(e),!0}return!1}_onRangeSliderChange(e){this.minValue=e.detail.min,this.maxValue=e.detail.max,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this._onRangeNullChange()}_onRangeNullChange(){let e={gte:this.minValue,lte:this.maxValue};if(this.$.unknown.checked&&(e.includeNull=!0),this._isDefaultState())return;let n=this._getCurrentSearchDocument();this._setPaging(n,0),this._appendRangeFilter(n,this.filter,e),this.RecordModel.setSearchLocation(n)}_onInputChange(){let e=this.$.minValueInput.value,n=this.$.maxValueInput.value;e<this.absMinValue&&(this.$.minValueInput.value=this.absMinValue,e=this.absMinValue),n>this.absMaxValue&&(this.$.maxValueInput.value=this.absMaxValue,n=this.absMaxValue),e>n&&(e=n),this.minValue=e,this.maxValue=n,this._onRangeNullChange()}_onSelectedCollectionUpdate(e){this.selectedCollection=e?e["@id"]:"",this._renderFilters()}_onRecordSearchUpdate(e){"loaded"===e.state&&(this.currentFilters=e.searchDocument.filters||{},this._renderFilters())}async _renderFilters(){if(!this.currentFilters)return;let e=this.selectedCollection,n=await this._defaultRecordSearch(this.selectedCollection);if(e!==this.selectedCollection)return;this.default=n;let t=this.default.payload.aggregations.ranges[this.filter];if(!t)return this._show(!1);if(this.absMinValue=t.min,this.absMaxValue=t.max,this._show(!0),(this.minValue<this.absMinValue||!this.currentFilters[this.filter])&&(this.minValue=this.absMinValue,this.$.minValueInput.value=this.minValue),(this.maxValue>this.absMaxValue||!this.currentFilters[this.filter])&&(this.maxValue=this.absMaxValue,this.$.maxValueInput.value=this.maxValue),this.currentFilters[this.filter]){let e=this.currentFilters[this.filter].value;this.minValue=e.gte,this.maxValue=e.lte,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this.$.unknown.checked=!!e.includeNull}this._notifySelected()}_isFilterApplied(){return this.minValue!==this.absMinValue||this.maxValue!==this.absMaxValue||!0!==this.$.unknown.checked}_notifySelected(){let e=!1,n="";this.minValue===this.absMinValue&&this.maxValue===this.absMaxValue&&this.$.unknown.checked||(e=!0),e&&(n=this.minValue+" to "+this.maxValue),this.dispatchEvent(new CustomEvent("set-selected",{detail:{selected:e,label:n}}))}_show(e){this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:e}}))}reset(){this.minValue=this.absMinValue,this.maxValue=this.absMaxValue,this.$.unknown.checked=!0,this._onRangeNullChange()}onParentFilterClicked(){this.reset()}});var E=t(189),I=t.n(E),z=t(188),A=t.n(z),R=t(187),F=t.n(R),N=(t(152),t(186)),P=t.n(N);window.customElements.define("app-normal-checkbox",class extends i.a{static get properties(){return{value:{type:String,value:""},label:{type:String,value:""},labelMap:{type:Object,value:null,observer:"_onLabelMapUpdate"},labelMapType:{type:String,value:null},realLabel:{type:String,computed:"_realLabel(value, label)"},checked:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1},ariaChecked:{type:String,reflectToAttribute:!0,computed:"_computeAriaChecked(checked)"},ariaDisabled:{type:String,reflectToAttribute:!0,computed:"_computeAriaDisabled(disabled)"},role:{type:String,value:"checkbox",reflectToAttribute:!0},tabindex:{type:Number,computed:"_computeTabIndex(disabled)",reflectToAttribute:!0}}}static get template(){let e=document.createElement("template");return e.innerHTML=P.a,e}constructor(){super(),this.addEventListener("click",e=>this._onClick(e)),this.addEventListener("keyup",e=>{13===e.which&&this._onClick(e)})}_realLabel(e,n){return this._getLabel()}_computeAriaChecked(){return this.checked?"true":"false"}_computeAriaDisabled(){return this.disabled?"true":"false"}_computeTabIndex(){return this.disabled?-1:0}_getLabel(){return null===this.labelMapType&&this._onLabelMapUpdate(),this.labelMapType?"object"===this.labelMapType&&this.labelMap[this.value]?this.labelMap[this.value]:"function"===this.labelMapType?this.labelMap(this.value):this.value:this.value}_onLabelMapUpdate(){this.labelMapType="",this.labelMap&&(this.labelMapType=typeof this.labelMap)}_onClick(){this.disabled||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0})))}});window.customElements.define("app-facet-checkbox",class extends i.a{static get properties(){return{type:{type:String,value:""},value:{type:String,value:"",observer:"_onValueChange"},labelMap:{type:Object,value:()=>{}},checked:{type:Boolean,value:!1,notify:!0,observer:"_onCheckedChange"}}}ready(){super.ready(),this.ele=document.createElement("app-normal-checkbox"),this.ele.label=this._getLabel(),this._setValue(),this.checked&&this.ele.setAttribute("checked",this.checked),this.ele.addEventListener("checked-changed",e=>{this.checked=e.detail.value}),this.appendChild(this.ele)}_setValue(){this.value&&(this.ele.value=this.value,this.ele.label=this._getLabel())}_getLabel(){return this.labelMap&&this.labelMap[this.value]?this.labelMap[this.value]:this.value}_onCheckedChange(){this.ele&&this.ele.checked!==this.checked&&(this.ele.checked=this.checked)}_onValueChange(){this.ele&&this.ele.setAttribute("value",this.value)}});t(151);window.customElements.define("app-facet-filter",class extends(Mixin(i.a).with(EventInterface,A.a,k.a)){static get properties(){return{label:{type:String,value:""},filter:{type:String,value:""},ignore:{type:Array,value:()=>[]},valueMap:{type:Object,value:null},buckets:{type:Array,value:()=>[]},bucketsIronList:{type:Array,value:()=>[]},ironListActive:{type:Boolean,value:!1},notified:{type:Object,value:()=>({})}}}constructor(){super(),this.active=!0,this.updateTimer=-1}resize(){requestAnimationFrame(()=>{this.$.list.fire("iron-resize")})}static get template(){let e=document.createElement("template");return e.innerHTML=F.a,e}_onFilterBucketsUpdate(e){if(e.filter===this.filter){if(e.buckets.forEach(e=>{this.notified[e.key]&&!e.active?this._notifySelected(e.active,e.key):!this.notified[e.key]&&e.active&&this._notifySelected(e.active,e.key)}),Object.keys(e.buckets).length>50){this.$.list.style.display="block";let n=this.$.list.scrollTop;this.bucketsIronList=e.buckets,this.buckets=[],this.ironListActive=!0,this.$.list.scrollTop=n,requestAnimationFrame(()=>{this.$.list.scrollTop=n})}else this.$.list.style.display="none",this.bucketsIronList=[],this.buckets=e.buckets,this.ironListActive=!1;this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:0!==e.buckets.length}}))}}getBuckets(){return this.ironListActive?this.bucketsIronList:this.buckets}onParentFilterClicked(e){let n=this._getCurrentSearchDocument();this._setPaging(n,0),this._removeKeywordFilter(n,this.filter,e),this.RecordModel.setSearchLocation(n),this._notifySelected(!1,e)}_notifySelected(e,n){!e&&this.notified[n]?delete this.notified[n]:e&&(this.notified[n]=!0),this.dispatchEvent(new CustomEvent(`${e?"add":"remove"}-selected`,{detail:{label:n}}))}_toggleFilter(e){e.currentTarget.checked?this.appendFilter(e):this.removeFilter(e)}appendFilter(e){let n=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))];if(n.empty)return;let t=this._getCurrentSearchDocument();this._setPaging(t,0),this._appendKeywordFilter(t,this.filter,n.key),this.RecordModel.setSearchLocation(t),this._notifySelected(!0,n.key)}removeFilter(e){let n=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))],t=this._getCurrentSearchDocument();this._setPaging(t,0),this._removeKeywordFilter(t,this.filter,n.key),this.RecordModel.setSearchLocation(t),this._notifySelected(!1,n.key)}});window.customElements.define("app-filter-panel",class extends i.a{static get properties(){return{filter:{type:Object,value:null,observer:"_render"},opened:{type:Boolean,value:!1,observer:"_toggleOpened"},selected:{type:Array,value:()=>[]}}}static get template(){let e=document.createElement("template");return e.innerHTML=I.a,e}_render(){if(this.filter){this.innerHTML="";var e=document.createElement("app-"+this.filter.type+"-filter");e.label=this.filter.label,e.filter=this.filter.filter,e.ignore=this.filter.ignore,e.valueMap=this.filter.valueMap||{},e.isDollar=this.filter.isDollar,e.addEventListener("update-visibility",e=>{this.style.display=e.detail.show?"block":"none"}),e.addEventListener("add-selected",e=>{this.selected.findIndex(n=>n.label===e.detail.label)>-1||this.push("selected",e.detail)}),e.addEventListener("remove-selected",e=>{let n=this.selected.findIndex(n=>n.label===e.detail.label);-1!==n&&this.splice("selected",n,1)}),e.addEventListener("set-selected",e=>{e.detail.selected?this.selected=[e.detail]:this.selected=[]}),this.ele=e,this.$.filters.appendChild(e)}}toggle(){this.opened=!this.opened}_toggleOpened(){this.opened&&this.ele&&this.ele.resize&&this.ele.resize()}_onToggleClicked(e){"keyup"===e.type&&13!==e.which&&32!==e.which||this.toggle()}_onFilterClicked(e){"keyup"===e.type&&13!==e.which||this._notifyFilterClicked(e.currentTarget.getAttribute("label"))}_notifyFilterClicked(e){this.ele&&this.ele.onParentFilterClicked&&this.ele.onParentFilterClicked(e)}});var D=t(146),U=t(180),B=t.n(U);customElements.define("app-collection-info-panel",class extends(Mixin(i.a).with(EventInterface,h.a)){static get template(){let e=document.createElement("template");return e.innerHTML=B.a,e}static get properties(){return{coverage:{type:String,value:""},subject:{type:String,value:""}}}constructor(){super(),this.active=!0}_onSelectedCollectionUpdate(e){if(!e)return this.$.description.innerHTML="",this.subject="",void(this.coverage="");this.$.description.innerHTML=D.markdown.toHTML(e.description||""),e.subject?this.subject=e.subject.join(", "):this.subject="",e.coverage?this.coverage=e.coverage.join(", "):this.coverage=""}});var H=t(179),j=t.n(H);customElements.define("app-tabs",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=j.a,e}static get properties(){return{role:{type:String,value:"tablist",reflectToAttribute:!0},selected:{type:String,value:"",notify:!0,observer:"_renderTabs"},tabs:{type:Array,value:()=>[],observer:"_renderTabs"}}}_renderTabs(){this.tabs&&(this.selected||!this.tabs.length?this.tabs.forEach((e,n)=>{let t=e.value===this.selected;this.set(`tabs.${n}.selected`,t),this.set(`tabs.${n}.ariaSelected`,t+""),e.label||this.set(`tabs.${n}.label`,e.value)}):this.selected=this.tabs[0])}_onTabClicked(e){"keyup"===e.type&&13!==e.which||(this.selected=e.currentTarget.getAttribute("value"))}});var O=t(178),W=t.n(O),q=t(20),K=t.n(q);const Z=[];for(var X in K.a.elasticSearch.facets)Z.push({label:K.a.elasticSearch.facets[X].label,type:K.a.elasticSearch.facets[X].type,ignore:K.a.elasticSearch.facets[X].ignore,valueMap:K.a.elasticSearch.facets[X].valueMap,isDollar:K.a.elasticSearch.facets[X].isDollar,filter:X});customElements.define("app-filters-panel",class extends(Mixin(i.a).with(EventInterface,k.a,h.a)){static get template(){let e=document.createElement("template");return e.innerHTML=W.a,e}static get properties(){return{facetFilters:{type:Array,value:function(){return Z}},selectedTab:{type:String,value:""},selectedCollection:{type:Object,value:()=>{}},collectionMode:{type:Boolean,value:!1},tabs:{type:Array,value:()=>[{label:"Information",value:"info"},{label:"Filters",value:"filters"}]}}}constructor(){super(),this.active=!0}ready(){super.ready(),this._onSelectedCollectionUpdate()}_onSelectedCollectionUpdate(e){if(!e)return this.selectedTab="filters",void(this.collectionMode=!1);this.collectionMode=!0,this.selectedCollection=e,this.selectedTab||(this.selectedTab="info")}_fireToggleDrawer(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}_removeCollectionFilter(){let e=this._getCurrentSearchDocument();this._removeKeywordFilter(e,"isPartOf.@id"),this._setPaging(e,0),this.RecordModel.setSearchLocation(e)}}),t.d(n,"AppSearch",function(){return G});class G extends(Mixin(i.a).with(EventInterface,k.a,h.a,u.a)){static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{visible:{type:Boolean,value:!1},results:{type:Array,value:()=>[]},drawerOpen:{type:Boolean,value:!1},firstLoad:{type:Boolean,value:!0},appState:{type:Object,value:()=>({})}}}constructor(){super(),this.active=!0}_onAppStateUpdate(e){this.appState=e,"search"!==e.location.path[0]&&"collection"!==e.location.path[0]||this._searchFromAppState()}_searchFromAppState(){this.firstLoad=!1;let e,n=this.appState.location.path;if("collection"===n[0])return e=this._urlToSearchDocument(["",encodeURIComponent(JSON.stringify([["isPartOf.@id","or",`/collection/${n[1]}`]])),"","10"]),void this._searchRecords(e,!1);e="search"===n[0]&&n.length>1?this._urlToSearchDocument(n.slice(1,n.length)):this._getCurrentSearchDocument(),this._searchRecords(e)}_onRecordSearchUpdate(e){if("error"===e.state)return this.$.resultsPanel.onError(e);if("loading"===e.state)return this.$.resultsPanel.onLoading();if("loaded"!==e.state)return;let n=e.searchDocument.offset,t=e.payload,i=t.total;this.results=t.results,this.$.resultsPanel.render(this.results,i,e.searchDocument.limit,n)}_onPageSizeChange(e){let n=this._getCurrentSearchDocument();this._setPaging(n,n.offset,e.detail),this.RecordModel.setSearchLocation(n)}_onPaginationChange(e){let n=this._getCurrentSearchDocument();this._setPaging(n,e.detail.startIndex),this.RecordModel.setSearchLocation(n)}_toggleDrawer(){this.drawerOpen=!this.drawerOpen}}customElements.define("app-search",G)}}]);