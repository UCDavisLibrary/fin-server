(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{207:function(e,t,n){(function(t){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c={addCSS:!0,thumbWidth:15,watch:!0};function l(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var h,d,f,p=function(e){return null!=e?e.constructor:null},m=function(e,t){return Boolean(e&&t&&e instanceof t)},g=function(e){return p(e)===String},v=function(e){return Array.isArray(e)},y=function(e){return m(e,NodeList)},b=g,w=v,T=y,E=function(e){return m(e,Element)},k=function(e){return m(e,Event)},S=function(e){return function(e){return null==e}(e)||(g(e)||v(e)||y(e))&&!e.length||function(e){return p(e)===Object}(e)&&!Object.keys(e).length},x=function(){function t(n,i){e(this,t),E(n)?this.element=n:b(n)&&(this.element=document.querySelector(n)),E(this.element)&&S(this.element.rangeTouch)&&(this.config=Object.assign({},c,i),this.init())}return i(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(e){if(!t.enabled||!k(e))return null;var n,i=e.target,r=e.changedTouches[0],a=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,s=parseFloat(i.getAttribute("step"))||1,u=o-a,c=i.getBoundingClientRect(),l=100/c.width*(this.config.thumbWidth/2)/100;return(n=100/c.width*(r.clientX-c.left))<0?n=0:n>100&&(n=100),n<50?n-=(100-2*n)*l:n>50&&(n+=2*(n-50)*l),a+function(e,t){if(t<1){var n=(i="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0;return parseFloat(e.toFixed(n))}var i;return Math.round(e/t)*t}(u*(n/100),s)}},{key:"set",value:function(e){t.enabled&&k(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var n=new Event(t);e.dispatchEvent(n)}}(e.target,"touchend"===e.type?"change":"input"))}}],[{key:"setup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(S(e)||b(e)?i=Array.from(document.querySelectorAll(b(e)?e:'input[type="range"]')):E(e)?i=[e]:T(e)?i=Array.from(e):w(e)&&(i=e.filter(E)),S(i))return null;var r=Object.assign({},c,n);if(b(e)&&r.watch){var a=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){E(n)&&l(n,e)&&new t(n,r)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(e){return new t(e,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}(),A=function(e){return null!=e?e.constructor:null},I=function(e,t){return Boolean(e&&t&&e instanceof t)},C=function(e){return null==e},P=function(e){return A(e)===Object},M=function(e){return A(e)===String},N=function(e){return Array.isArray(e)},R=function(e){return I(e,NodeList)},L=function(e){return C(e)||(M(e)||N(e)||R(e))&&!e.length||P(e)&&!Object.keys(e).length},D=C,_=P,O=function(e){return A(e)===Number&&!Number.isNaN(e)},U=M,j=function(e){return A(e)===Boolean},B=function(e){return A(e)===Function},F=N,H=R,V=function(e){return I(e,Element)},q=function(e){return I(e,Event)},K=function(e){return I(e,KeyboardEvent)},z=function(e){return I(e,TextTrack)||!C(e)&&M(e.kind)},G=function(e){if(I(e,window.URL))return!0;if(!M(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!L(new URL(t).hostname)}catch(e){return!1}},W=L,X=(h=document.createElement("span"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f=Object.keys(d).find((function(e){return void 0!==h.style[e]})),!!U(f)&&d[f]);function Y(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var $={isIE:
/* @cc_on!@ */
!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function J(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function Q(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var a=n.shift();return _(a)?(Object.keys(a).forEach((function(t){_(a[t])?(Object.keys(e).includes(t)||Object.assign(e,r({},t,{})),Q(e[t],a[t])):Object.assign(e,r({},t,a[t]))})),Q.apply(void 0,[e].concat(n))):e}function Z(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach((function(e,n){var i=n>0?t.cloneNode(!0):t,r=e.parentNode,a=e.nextSibling;i.appendChild(e),a?r.insertBefore(i,a):r.appendChild(i)}))}function ee(e,t){V(e)&&!W(t)&&Object.entries(t).filter((function(e){var t=s(e,2)[1];return!D(t)})).forEach((function(t){var n=s(t,2),i=n[0],r=n[1];return e.setAttribute(i,r)}))}function te(e,t,n){var i=document.createElement(e);return _(t)&&ee(i,t),U(n)&&(i.innerText=n),i}function ne(e,t,n,i){V(t)&&t.appendChild(te(e,n,i))}function ie(e){H(e)||F(e)?Array.from(e).forEach(ie):V(e)&&V(e.parentNode)&&e.parentNode.removeChild(e)}function re(e){if(V(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function ae(e,t){return V(t)&&V(t.parentNode)&&V(e)?(t.parentNode.replaceChild(e,t),e):null}function oe(e,t){if(!U(e)||W(e))return{};var n={},i=Q({},t);return e.split(",").forEach((function(e){var t=e.trim(),r=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),o=s(a,1)[0],u=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":U(i.class)?n.class="".concat(i.class," ").concat(r):n.class=r;break;case"#":n.id=t.replace("#","");break;case"[":n[o]=u}})),Q(i,n)}function se(e,t){if(V(e)){var n=t;j(n)||(n=!e.hidden),e.hidden=n}}function ue(e,t,n){if(H(e))return Array.from(e).map((function(e){return ue(e,t,n)}));if(V(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function ce(e,t){return V(e)&&e.classList.contains(t)}function le(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function he(e){return this.elements.container.querySelectorAll(e)}function de(e){return this.elements.container.querySelector(e)}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];V(e)&&(e.focus({preventScroll:!0}),t&&ue(e,this.config.classNames.tabFocus))}var pe,me={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ge={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var i=$.isIPhone&&n&&ge.playsinline,r=ge[e]||"html5"!==t;return{api:r,ui:r&&ge.rangeInput&&("video"!==e||!$.isIPhone||i)}},pip:!($.isIPhone||!B(te("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||te("video").disablePictureInPicture)),airplay:B(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(W(e))return!1;var t=s(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(me).includes(n)&&(n+='; codecs="'.concat(me[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(pe=document.createElement("input"),pe.type="range","range"===pe.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==X,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ve=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function ye(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!W(t)&&B(n)){var s=t.split(" "),u=o;ve&&(u={passive:a,capture:o}),s.forEach((function(t){i&&i.eventListeners&&r&&i.eventListeners.push({element:e,type:t,callback:n,options:u}),e[r?"addEventListener":"removeEventListener"](t,n,u)}))}}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ye.call(this,e,t,n,!0,i,r)}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ye.call(this,e,t,n,!1,i,r)}function Te(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ye.call(this,e,n,(function o(){we(e,n,o,r,a);for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];i.apply(t,u)}),!0,r,a)}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(V(e)&&!W(t)){var r=new CustomEvent(t,{bubbles:n,detail:o({},i,{plyr:this})});e.dispatchEvent(r)}}function ke(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,n=e.type,i=e.callback,r=e.options;t.removeEventListener(n,i,r)})),this.eventListeners=[])}function Se(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):be.call(e,e.elements.container,"ready",t)})).then((function(){}))}function xe(e){return!!(F(e)||U(e)&&e.includes(":"))&&(F(e)?e:e.split(":")).map(Number).every(O)}function Ae(e){if(!F(e)||!e.every(O))return null;var t=s(e,2),n=t[0],i=t[1],r=function e(t,n){return 0===n?t:e(n,t%n)}(n,i);return[n/r,i/r]}function Ie(e){var t=function(e){return xe(e)?e.split(":").map(Number):null},n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!W(this.embed)&&F(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var i=this.media;n=Ae([i.videoWidth,i.videoHeight])}return n}function Ce(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=Ie.call(this,e),i=s(F(n)?n:[0,0],2),r=100/i[0]*i[1];if(t.style.paddingBottom="".concat(r,"%"),this.isVimeo&&this.supported.ui){var a=(240-r)/4.8;this.media.style.transform="translateY(-".concat(a,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==n);return{padding:r,ratio:n}}var Pe={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var n=t.getAttribute("type");return!!W(n)||ge.mime.call(e,n)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:Pe.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,W(this.config.ratio)||Ce.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=Pe.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&B(e.config.quality.onChange))e.config.quality.onChange(t);else{var n=Pe.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!n)return;var i=e.media,r=i.currentTime,a=i.paused,o=i.preload,s=i.readyState,u=i.playbackRate;e.media.src=n.getAttribute("src"),("none"!==o||s)&&(e.once("loadedmetadata",(function(){e.speed=u,e.currentTime=r,a||e.play()})),e.media.load())}Ee.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(ie(Pe.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Me(e){return F(e)?e.filter((function(t,n){return e.indexOf(t)===n})):e}function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return W(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return n[t].toString()}))}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString())}function Le(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function De(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=Re(e,"-"," "),e=Re(e,"_"," "),Re(e=Le(e)," ","")}function _e(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Oe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(W(e)||W(t))return"";var n=J(t.i18n,e);if(W(n))return Object.keys(Oe).includes(e)?Oe[e]:"";var i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((function(e){var t=s(e,2),i=t[0],r=t[1];n=Re(n,i,r)})),n},je=function(){function t(n){e(this,t),this.enabled=n.config.storage.enabled,this.key=n.config.storage.key}return i(t,[{key:"get",value:function(e){if(!t.supported||!this.enabled)return null;var n=window.localStorage.getItem(this.key);if(W(n))return null;var i=JSON.parse(n);return U(e)&&e.length?i[e]:i}},{key:"set",value:function(e){if(t.supported&&this.enabled&&_(e)){var n=this.get();W(n)&&(n={}),Q(n,e),window.localStorage.setItem(this.key,JSON.stringify(n))}}}],[{key:"supported",get:function(){try{return"localStorage"in window&&(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0)}catch(e){return!1}}}]),t}();function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(n,i){try{var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",(function(){if("text"===t)try{n(JSON.parse(r.responseText))}catch(e){n(r.responseText)}else n(r.response)})),r.addEventListener("error",(function(){throw new Error(r.status)})),r.open("GET",e,!0),r.responseType=t,r.send()}catch(e){i(e)}}))}function Fe(e,t){if(U(e)){var n=U(t),i=function(){return null!==document.getElementById(t)},r=function(e,t){e.innerHTML=t,n&&i()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!i()){var a=je.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),a){var s=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==s){var u=JSON.parse(s);r(o,u.content)}}Be(e).then((function(e){W(e)||(a&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),r(o,e))})).catch((function(){}))}}}var He=function(e){return Math.trunc(e/60/60%60,10)},Ve=function(e){return Math.trunc(e/60%60,10)},qe=function(e){return Math.trunc(e%60,10)};function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!O(e))return Ke(void 0,t,n);var i=function(e){return"0".concat(e).slice(-2)},r=He(e),a=Ve(e),o=qe(e);return r=t||r>0?"".concat(r,":"):"","".concat(n&&e>0?"-":"").concat(r).concat(i(a),":").concat(i(o))}var ze={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||$.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=de.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:he.call(this,this.config.selectors.buttons.play),pause:de.call(this,this.config.selectors.buttons.pause),restart:de.call(this,this.config.selectors.buttons.restart),rewind:de.call(this,this.config.selectors.buttons.rewind),fastForward:de.call(this,this.config.selectors.buttons.fastForward),mute:de.call(this,this.config.selectors.buttons.mute),pip:de.call(this,this.config.selectors.buttons.pip),airplay:de.call(this,this.config.selectors.buttons.airplay),settings:de.call(this,this.config.selectors.buttons.settings),captions:de.call(this,this.config.selectors.buttons.captions),fullscreen:de.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=de.call(this,this.config.selectors.progress),this.elements.inputs={seek:de.call(this,this.config.selectors.inputs.seek),volume:de.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:de.call(this,this.config.selectors.display.buffer),currentTime:de.call(this,this.config.selectors.display.currentTime),duration:de.call(this,this.config.selectors.display.duration)},V(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n=ze.getIconUrl.call(this),i="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),r=document.createElementNS("http://www.w3.org/2000/svg","svg");ee(r,Q(t,{role:"presentation",focusable:"false"}));var a=document.createElementNS("http://www.w3.org/2000/svg","use"),o="".concat(i,"-").concat(e);return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ue(e,this.config),i=o({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return te("span",i,n)},createBadge:function(e){if(W(e))return null;var t=te("span",{class:this.config.classNames.menu.value});return t.appendChild(te("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=Q({},t),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return(t=De(t)).charAt(0).toLowerCase()+t.slice(1)}(e),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(i).includes(e)&&(a[e]=i[e],delete i[e])})),"button"!==a.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((function(e){return e===n.config.classNames.control}))||Q(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",a.label="play",a.icon="play";break;default:W(a.label)&&(a.label=r),W(a.icon)&&(a.icon=e)}var o=te(a.element);return a.toggle?(o.appendChild(ze.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),o.appendChild(ze.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),o.appendChild(ze.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),o.appendChild(ze.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(o.appendChild(ze.createIcon.call(this,a.icon)),o.appendChild(ze.createLabel.call(this,a.label))),Q(i,oe(this.config.selectors.buttons[r],i)),ee(o,i),"play"===r?(F(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(o)):this.elements.buttons[r]=o,o},createRange:function(e,t){var n=te("input",Q(oe(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Ue(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,ze.updateRangeFill.call(this,n),x.setup(n),n},createProgress:function(e,t){var n=te("progress",Q(oe(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(te("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],r=i?Ue(i,this.config):"";n.innerText="% ".concat(r.toLowerCase())}return this.elements.display[e]=n,n},createTime:function(e,t){var n=oe(this.config.selectors.display[e],t),i=te("div",Q(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Ue(e,this.config)}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts:function(e,t){var n=this;be.call(this,e,"keydown keyup",(function(i){if([32,38,39,40].includes(i.which)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var r,a=le(e,'[role="menuitemradio"]');!a&&[32,39].includes(i.which)?ze.showMenuPanel.call(n,t,!0):32!==i.which&&(40===i.which||a&&39===i.which?(r=e.nextElementSibling,V(r)||(r=e.parentNode.firstElementChild)):(r=e.previousElementSibling,V(r)||(r=e.parentNode.lastElementChild)),fe.call(n,r,!0))}}),!1),be.call(this,e,"keyup",(function(e){13===e.which&&ze.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,i=e.list,r=e.type,a=e.title,o=e.badge,s=void 0===o?null:o,u=e.checked,c=void 0!==u&&u,l=oe(this.config.selectors.inputs[r]),h=te("button",Q(l,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(l.class?l.class:"").trim(),"aria-checked":c,value:n})),d=te("span");d.innerHTML=a,V(s)&&d.appendChild(s),h.appendChild(d),Object.defineProperty(h,"checked",{enumerable:!0,get:function(){return"true"===h.getAttribute("aria-checked")},set:function(e){e&&Array.from(h.parentNode.children).filter((function(e){return le(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),h.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(h,"click keyup",(function(e){if(!K(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),h.checked=!0,r){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}ze.showMenuPanel.call(t,"home",K(e))}}),r,!1),ze.bindMenuItemShortcuts.call(this,h,r),i.appendChild(h)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!O(e))return e;var n=He(this.duration)>0;return Ke(e,n,t)},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];V(e)&&O(t)&&(e.innerText=ze.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(V(this.elements.inputs.volume)&&ze.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),V(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(e)&&(e.value=t,ze.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&q(e)){var n,i,r=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,i=this.duration,r=0===n||0===i||Number.isNaN(n)||Number.isNaN(i)?0:(n/i*100).toFixed(2),"timeupdate"===e.type&&ze.setRange.call(this,this.elements.inputs.seek,r);break;case"playing":case"progress":!function(e,n){var i=O(n)?n:0,r=V(e)?e:t.elements.display.buffer;if(V(r)){r.value=i;var a=r.getElementsByTagName("span")[0];V(a)&&(a.childNodes[0].nodeValue=i)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=q(e)?e.target:e;if(V(t)&&"range"===t.getAttribute("type")){if(le(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=ze.formatTime(this.currentTime),i=ze.formatTime(this.duration),r=Ue("seekLabel",this.config);t.setAttribute("aria-valuetext",r.replace("{currentTime}",n).replace("{duration}",i))}else if(le(t,this.config.selectors.inputs.volume)){var a=100*t.value;t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);$.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&V(this.elements.inputs.seek)&&V(this.elements.display.seekTooltip)&&0!==this.duration){var n="".concat(this.config.classNames.tooltip,"--visible"),i=function(e){return ue(t.elements.display.seekTooltip,n,e)};if(this.touch)i(!1);else{var r=0,a=this.elements.progress.getBoundingClientRect();if(q(e))r=100/a.width*(e.pageX-a.left);else{if(!ce(this.elements.display.seekTooltip,n))return;r=parseFloat(this.elements.display.seekTooltip.style.left,10)}r<0?r=0:r>100&&(r=100),ze.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*r),this.elements.display.seekTooltip.style.left="".concat(r,"%"),q(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!V(this.elements.display.duration)&&this.config.invertTime;ze.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||ze.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return se(this.elements.display.currentTime,!0),void se(this.elements.progress,!0);V(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=V(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&ze.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&ze.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),ze.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){se(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],r=null,a=t;if("captions"===e)r=this.currentTrack;else{if(r=W(n)?this[e]:n,W(r)&&(r=this.config[e].default),!W(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn("Unsupported value of '".concat(r,"' for ").concat(e));if(!this.config[e].options.includes(r))return void this.debug.warn("Disabled value of '".concat(r,"' for ").concat(e))}if(V(a)||(a=i&&i.querySelector('[role="menu"]')),V(a)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=ze.getLabel.call(this,e,r);var o=a&&a.querySelector('[value="'.concat(r,'"]'));V(o)&&(o.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Ue("normal",this.config):"".concat(t,"&times;");case"quality":if(O(t)){var n=Ue("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return Le(t);case"captions":return Xe.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(V(this.elements.settings.panels.quality)){var n=this.elements.settings.panels.quality.querySelector('[role="menu"]');F(e)&&(this.options.quality=Me(e).filter((function(e){return t.config.quality.options.includes(e)})));var i=!W(this.options.quality)&&this.options.quality.length>1;if(ze.toggleMenuButton.call(this,"quality",i),re(n),ze.checkMenu.call(this),i){var r=function(e){var n=Ue("qualityBadge.".concat(e),t.config);return n.length?ze.createBadge.call(t,n):null};this.options.quality.sort((function(e,n){var i=t.config.quality.options;return i.indexOf(e)>i.indexOf(n)?1:-1})).forEach((function(e){ze.createMenuItem.call(t,{value:e,list:n,type:"quality",title:ze.getLabel.call(t,"quality",e),badge:r(e)})})),ze.updateSetting.call(this,"quality",n)}}},setCaptionsMenu:function(){var e=this;if(V(this.elements.settings.panels.captions)){var t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=Xe.getTracks.call(this),i=Boolean(n.length);if(ze.toggleMenuButton.call(this,"captions",i),re(t),ze.checkMenu.call(this),i){var r=n.map((function(n,i){return{value:i,checked:e.captions.toggled&&e.currentTrack===i,title:Xe.getLabel.call(e,n),badge:n.language&&ze.createBadge.call(e,n.language.toUpperCase()),list:t,type:"language"}}));r.unshift({value:-1,checked:!this.captions.toggled,title:Ue("disabled",this.config),list:t,type:"language"}),r.forEach(ze.createMenuItem.bind(this)),ze.updateSetting.call(this,"captions",t)}}},setSpeedMenu:function(){var e=this;if(V(this.elements.settings.panels.speed)){var t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var n=!W(this.options.speed)&&this.options.speed.length>1;ze.toggleMenuButton.call(this,"speed",n),re(t),ze.checkMenu.call(this),n&&(this.options.speed.forEach((function(n){ze.createMenuItem.call(e,{value:n,list:t,type:"speed",title:ze.getLabel.call(e,"speed",n)})})),ze.updateSetting.call(this,"speed",t))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!W(e)&&Object.values(e).some((function(e){return!e.hidden}));se(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;V(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var i=n.querySelector('[role^="menuitem"]');fe.call(this,i,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(V(t)&&V(n)){var i=t.hidden,r=i;if(j(e))r=e;else if(K(e)&&27===e.which)r=!1;else if(q(e)){var a=B(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(a);if(o||!o&&e.target!==n&&r)return}n.setAttribute("aria-expanded",r),se(t,!r),ue(this.elements.container,this.config.classNames.menu.open,r),r&&K(e)?ze.focusFirstMenuItem.call(this,null,!0):r||i||fe.call(this,n,K(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return ie(t),{width:n,height:i}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(V(i)){var r=i.parentNode,a=Array.from(r.children).find((function(e){return!e.hidden}));if(ge.transitions&&!ge.reducedMotion){r.style.width="".concat(a.scrollWidth,"px"),r.style.height="".concat(a.scrollHeight,"px");var o=ze.getMenuSize.call(this,i),s=function t(n){n.target===r&&["width","height"].includes(n.propertyName)&&(r.style.width="",r.style.height="",we.call(e,r,X,t))};be.call(this,r,X,s),r.style.width="".concat(o.width,"px"),r.style.height="".concat(o.height,"px")}se(a,!0),se(i,!1),ze.focusFirstMenuItem.call(this,i,n)}},setDownloadUrl:function(){var e=this.elements.buttons.download;V(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,n=ze.bindMenuItemShortcuts,i=ze.createButton,r=ze.createProgress,a=ze.createRange,o=ze.createTime,s=ze.setQualityMenu,u=ze.setSpeedMenu,c=ze.showMenuPanel;this.elements.controls=null,this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));var l=te("div",oe(this.config.selectors.controls.wrapper));this.elements.controls=l;var h={class:"plyr__controls__item"};return Me(this.config.controls).forEach((function(s){if("restart"===s&&l.appendChild(i.call(t,"restart",h)),"rewind"===s&&l.appendChild(i.call(t,"rewind",h)),"play"===s&&l.appendChild(i.call(t,"play",h)),"fast-forward"===s&&l.appendChild(i.call(t,"fast-forward",h)),"progress"===s){var u=te("div",{class:"".concat(h.class," plyr__progress__container")}),d=te("div",oe(t.config.selectors.progress));if(d.appendChild(a.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),d.appendChild(r.call(t,"buffer")),t.config.tooltips.seek){var f=te("span",{class:t.config.classNames.tooltip},"00:00");d.appendChild(f),t.elements.display.seekTooltip=f}t.elements.progress=d,u.appendChild(t.elements.progress),l.appendChild(u)}if("current-time"===s&&l.appendChild(o.call(t,"currentTime",h)),"duration"===s&&l.appendChild(o.call(t,"duration",h)),"mute"===s||"volume"===s){var p=t.elements.volume;if(V(p)&&l.contains(p)||(p=te("div",Q({},h,{class:"".concat(h.class," plyr__volume").trim()})),t.elements.volume=p,l.appendChild(p)),"mute"===s&&p.appendChild(i.call(t,"mute")),"volume"===s&&!$.isIos){var m={max:1,step:.05,value:t.config.volume};p.appendChild(a.call(t,"volume",Q(m,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===s&&l.appendChild(i.call(t,"captions",h)),"settings"===s&&!W(t.config.settings)){var g=te("div",Q({},h,{class:"".concat(h.class," plyr__menu").trim(),hidden:""}));g.appendChild(i.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var v=te("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),y=te("div"),b=te("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=te("div",{role:"menu"});b.appendChild(w),y.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(i){var r=te("button",Q(oe(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));n.call(t,r,i),be.call(t,r,"click",(function(){c.call(t,i,!1)}));var a=te("span",null,Ue(i,t.config)),o=te("span",{class:t.config.classNames.menu.value});o.innerHTML=e[i],a.appendChild(o),r.appendChild(a),w.appendChild(r);var s=te("div",{id:"plyr-settings-".concat(e.id,"-").concat(i),hidden:""}),u=te("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});u.appendChild(te("span",{"aria-hidden":!0},Ue(i,t.config))),u.appendChild(te("span",{class:t.config.classNames.hidden},Ue("menuBack",t.config))),be.call(t,s,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),be.call(t,u,"click",(function(){c.call(t,"home",!1)})),s.appendChild(u),s.appendChild(te("div",{role:"menu"})),y.appendChild(s),t.elements.settings.buttons[i]=r,t.elements.settings.panels[i]=s})),v.appendChild(y),g.appendChild(v),l.appendChild(g),t.elements.settings.popup=v,t.elements.settings.menu=g}if("pip"===s&&ge.pip&&l.appendChild(i.call(t,"pip",h)),"airplay"===s&&ge.airplay&&l.appendChild(i.call(t,"airplay",h)),"download"===s){var T=Q({},h,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(T.download="");var E=t.config.urls.download;!G(E)&&t.isEmbed&&Q(T,{icon:"logo-".concat(t.provider),label:t.provider}),l.appendChild(i.call(t,"download",T))}"fullscreen"===s&&l.appendChild(i.call(t,"fullscreen",h))})),this.isHTML5&&s.call(this,Pe.getQualityOptions.call(this)),u.call(this),l},inject:function(){var e=this;if(this.config.loadSprite){var t=ze.getIconUrl.call(this);t.cors&&Fe(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var i={id:this.id,seektime:this.config.seekTime,title:this.config.title},r=!0;B(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),V(this.config.controls)||U(this.config.controls)?n=this.config.controls:(n=ze.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Xe.getLabel.call(this)}),r=!1);var a,o=function(e){var t=e;return Object.entries(i).forEach((function(e){var n=s(e,2),i=n[0],r=n[1];t=Re(t,"{".concat(i,"}"),r)})),t};if(r&&(U(this.config.controls)?n=o(n):V(n)&&(n.innerHTML=o(n.innerHTML))),U(this.config.selectors.controls.container)&&(a=document.querySelector(this.config.selectors.controls.container)),V(a)||(a=this.elements.container),a[V(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),V(this.elements.controls)||ze.findElements.call(this),!W(this.elements.buttons)){var u=function(t){var n=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return ce(t,n)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ue(t,n,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){F(e)||H(e)?Array.from(e).filter(Boolean).forEach(u):u(e)}))}if($.isEdge&&Y(a),this.config.tooltips.controls){var c=this.config,l=c.classNames,h=c.selectors,d="".concat(h.controls.wrapper," ").concat(h.labels," .").concat(l.hidden),f=he.call(this,d);Array.from(f).forEach((function(t){ue(t,e.config.classNames.hidden,!1),ue(t,e.config.classNames.tooltip,!0)}))}}};function Ge(e){var t=e;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(e){return null}}function We(e){var t=new URLSearchParams;return _(e)&&Object.entries(e).forEach((function(e){var n=s(e,2),i=n[0],r=n[1];t.set(i,r)})),t}var Xe={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!ge.textTracks)F(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ze.setCaptionsMenu.call(this);else{if(V(this.elements.captions)||(this.elements.captions=te("div",oe(this.config.selectors.captions)),function(e,t){V(e)&&V(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),$.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),n=Ge(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&Be(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){ie(e)}))}))}var t=Me((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&(n=s(t,1)[0]);var i=this.storage.get("captions");if(j(i)||(i=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:i,language:n,languages:t}),this.isHTML5){var r=this.config.captions.update?"addtrack removetrack":"removetrack";be.call(this,this.media.textTracks,r,Xe.update.bind(this))}setTimeout(Xe.update.bind(this),0)}},update:function(){var e=this,t=Xe.getTracks.call(this,!0),n=this.captions,i=n.active,r=n.language,a=n.meta,o=n.currentTrackNode,s=Boolean(t.find((function(e){return e.language===r})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!a.get(e)})).forEach((function(t){e.debug.log("Track added",t),a.set(t,{default:"showing"===t.mode}),t.mode="hidden",be.call(e,t,"cuechange",(function(){return Xe.updateCues.call(e)}))})),(s&&this.language!==r||!t.includes(o))&&(Xe.setLanguage.call(this,r),Xe.toggle.call(this,i&&s)),ue(this.elements.container,this.config.classNames.captions.enabled,!W(t)),(this.config.controls||[]).includes("settings")&&this.config.settings.includes("captions")&&ze.setCaptionsMenu.call(this)},toggle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,i=this.config.classNames.captions.active,r=D(e)?!n:e;if(r!==n){if(t||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!t){var a=Xe.getTracks.call(this),o=Xe.findTrack.call(this,[this.captions.language].concat(u(this.captions.languages)),!0);return this.captions.language=o.language,void Xe.set.call(this,a.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),ue(this.elements.container,i,r),this.captions.toggled=r,ze.updateSetting.call(this,"captions"),Ee.call(this,this.media,r?"captionsenabled":"captionsdisabled")}}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Xe.getTracks.call(this);if(-1!==e)if(O(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var i=n[e],r=i||{},a=r.language;this.captions.currentTrackNode=i,ze.updateSetting.call(this,"captions"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),Ee.call(this,this.media,"languagechange")}Xe.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Xe.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else Xe.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(U(e)){var n=e.toLowerCase();this.captions.language=n;var i=Xe.getTracks.call(this),r=Xe.findTrack.call(this,[n]);Xe.set.call(this,i.indexOf(r),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Array.from((this.media||{}).textTracks||[]);return n.filter((function(n){return!e.isHTML5||t||e.captions.meta.has(n)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Xe.getTracks.call(this),a=function(e){return Number((n.captions.meta.get(e)||{}).default)},o=Array.from(r).sort((function(e,t){return a(t)-a(e)}));return e.every((function(e){return!(t=o.find((function(t){return t.language===e})))})),t||(i?o[0]:void 0)},getCurrentTrack:function(){return Xe.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!z(t)&&ge.textTracks&&this.captions.toggled&&(t=Xe.getCurrentTrack.call(this)),z(t)?W(t.label)?W(t.language)?Ue("enabled",this.config):e.language.toUpperCase():t.label:Ue("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(V(this.elements.captions))if(D(e)||Array.isArray(e)){var t=e;if(!t){var n=Xe.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(_e)}var i=t.map((function(e){return e.trim()})).join("\n");if(i!==this.elements.captions.innerHTML){re(this.elements.captions);var r=te("span",oe(this.config.selectors.caption));r.innerHTML=i,this.elements.captions.appendChild(r),Ee.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},Ye={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.5.10/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,sidedock:!1,controls:!1,referrerPolicy:null},youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},$e="picture-in-picture",Je={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Qe="video",Ze=function(){},et=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.enabled=window.console&&n,this.enabled&&this.log("Debugging enabled")}return i(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Ze}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ze}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Ze}}]),t}(),tt=function(){function t(n){var i=this;e(this,t),this.player=n,this.prefix=t.prefix,this.property=t.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===n.config.fullscreen.fallback,be.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){i.onChange()})),be.call(this.player,this.player.elements.container,"dblclick",(function(e){V(i.player.elements.controls)&&i.player.elements.controls.contains(e.target)||i.toggle()})),be.call(this,this.player.elements.container,"keydown",(function(e){return i.trapFocus(e)})),this.update()}return i(t,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;V(e)&&(e.pressed=this.active),Ee.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ue(this.target,this.player.config.classNames.fullscreen.fallback,e),$.isIos){var t=document.head.querySelector('meta[name="viewport"]'),n="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var i=U(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=",".concat(n))):this.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==n})).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!$.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,n=he.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),i=s(n,1)[0],r=n[n.length-1];t!==r||e.shiftKey?t===i&&e.shiftKey&&(r.focus(),e.preventDefault()):(i.focus(),e.preventDefault())}}},{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":t.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled"),ue(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&($.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!t.native||this.forceFallback?this.toggleFallback(!0):this.prefix?W(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if($.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),this.player.play();else if(!t.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!W(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return t.native&&!this.forceFallback}},{key:"enabled",get:function(){return(t.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){return!!this.enabled&&(!t.native||this.forceFallback?ce(this.target,this.player.config.classNames.fullscreen.fallback):(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target)}},{key:"target",get:function(){return $.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(B(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!B(document["".concat(t,"ExitFullscreen")])&&!B(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),t}();function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,i){var r=new Image,a=function(){delete r.onload,delete r.onerror,(r.naturalWidth>=t?n:i)(r)};Object.assign(r,{onload:a,onerror:a,src:e})}))}var it={addStyleHook:function(){ue(this.elements.container,this.config.selectors.container.replace(".",""),!0),ue(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void it.toggleNativeControls.call(this,!0);V(this.elements.controls)||(ze.inject.call(this),this.listeners.controls()),it.toggleNativeControls.call(this),this.isHTML5&&Xe.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,ze.updateVolume.call(this),ze.timeUpdate.call(this),it.checkPlaying.call(this),ue(this.elements.container,this.config.classNames.pip.supported,ge.pip&&this.isHTML5&&this.isVideo),ue(this.elements.container,this.config.classNames.airplay.supported,ge.airplay&&this.isHTML5),ue(this.elements.container,this.config.classNames.isIos,$.isIos),ue(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){Ee.call(e,e.media,"ready")}),0),it.setTitle.call(this),this.poster&&it.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&ze.durationUpdate.call(this)},setTitle:function(){var e=Ue("play",this.config);if(U(this.config.title)&&!W(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=de.call(this,"iframe");if(!V(t))return;var n=W(this.config.title)?"video":this.config.title,i=Ue("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",n))}},togglePoster:function(e){ue(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("poster",e),this.isHTML5?Promise.resolve(e):Se.call(this).then((function(){return nt(e)})).catch((function(n){throw e===t.poster&&it.togglePoster.call(t,!1),n})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),it.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;ue(this.elements.container,this.config.classNames.playing,this.playing),ue(this.elements.container,this.config.classNames.paused,this.paused),ue(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Ue(t.playing?"pause":"play",t.config))})),q(e)&&"timeupdate"===e.type||it.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){ue(t.elements.container,t.config.classNames.loading,t.loading),it.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}}},rt=function(){function t(n){e(this,t),this.player=n,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return i(t,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode?e.keyCode:e.which,r="keydown"===e.type,a=r&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&O(i))if(r){var o=document.activeElement;if(V(o)){var s=t.config.selectors.editable;if(o!==n.inputs.seek&&le(o,s))return;if(32===e.which&&le(o,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:a||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:a||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:a||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(e){ze.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,ue(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,n=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var i,r=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||r)&&(i=t.config.classNames.tabFocus,ue(he.call(t,".".concat(i)),i,!1),this.focusTimer=setTimeout((function(){var e=document.activeElement;n.container.contains(e)&&ue(document.activeElement,t.config.classNames.tabFocus,!0)}),10))}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&ye.call(t,window,"keydown keyup",this.handleKey,e,!1),ye.call(t,document.body,"click",this.toggleMenu,e),Te.call(t,document.body,"touchstart",this.firstTouch),ye.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var e=this.player,t=e.config,n=e.elements,i=e.timers;!t.keyboard.global&&t.keyboard.focused&&be.call(e,n.container,"keydown keyup",this.handleKey,!1),be.call(e,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var r=n.controls;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);var a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(it.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((function(){return it.toggleControls.call(e,!1)}),a)}));var r=function(t){if(!t)return Ce.call(e);var i=n.container.getBoundingClientRect(),r=i.width,a=i.height;return Ce.call(e,"".concat(r,":").concat(a))},a=function(){clearTimeout(i.resized),i.resized=setTimeout(r,50)};be.call(e,n.container,"enterfullscreen exitfullscreen",(function(t){var i=e.fullscreen,o=i.target,u=i.usingNative;if(o===n.container&&(e.isEmbed||!W(e.config.ratio))){var c="enterfullscreen"===t.type,l=r(c);l.padding,function(t,n,i){if(e.isVimeo){var r=e.elements.wrapper.firstChild,a=s(t,2)[1],o=s(Ie.call(e),2),u=o[0],c=o[1];r.style.maxWidth=i?"".concat(a/c*u,"px"):null,r.style.margin=i?"0 auto":null}}(l.ratio,0,c),u||(c?be.call(e,window,"resize",a):we.call(e,window,"resize",a))}}))}},{key:"media",value:function(){var e=this,t=this.player,n=t.elements;if(be.call(t,t.media,"timeupdate seeking seeked",(function(e){return ze.timeUpdate.call(t,e)})),be.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return ze.durationUpdate.call(t,e)})),be.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),be.call(t,t.media,"progress playing seeking seeked",(function(e){return ze.updateProgress.call(t,e)})),be.call(t,t.media,"volumechange",(function(e){return ze.updateVolume.call(t,e)})),be.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return it.checkPlaying.call(t,e)})),be.call(t,t.media,"waiting canplay seeked playing",(function(e){return it.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var i=de.call(t,".".concat(t.config.classNames.video));if(!V(i))return;be.call(t,n.container,"click",(function(r){([n.container,i].includes(r.target)||i.contains(r.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(r,t.restart,"restart"),e.proxy(r,t.play,"play")):e.proxy(r,t.togglePlay,"play")))}))}t.supported.ui&&t.config.disableContextMenu&&be.call(t,n.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),be.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),be.call(t,t.media,"ratechange",(function(){ze.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),be.call(t,t.media,"qualitychange",(function(e){ze.updateSetting.call(t,"quality",null,e.detail.quality)})),be.call(t,t.media,"ready qualitychange",(function(){ze.setDownloadUrl.call(t)}));var r=t.config.events.concat(["keyup","keydown"]).join(" ");be.call(t,t.media,r,(function(e){var i=e.detail,r=void 0===i?{}:i;"error"===e.type&&(r=t.media.error),Ee.call(t,n.container,e.type,!0,r)}))}},{key:"proxy",value:function(e,t,n){var i=this.player,r=i.config.listeners[n],a=!0;B(r)&&(a=r.call(i,e)),!1!==a&&B(t)&&t.call(i,e)}},{key:"bind",value:function(e,t,n,i){var r=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.player,s=o.config.listeners[i],u=B(s);be.call(o,e,t,(function(e){return r.proxy(e,n,i)}),a&&!u)}},{key:"controls",value:function(){var e=this,t=this.player,n=t.elements,i=$.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach((function(n){e.bind(n,"click",t.togglePlay,"play")})),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",t.rewind,"rewind"),this.bind(n.buttons.fastForward,"click",t.forward,"fastForward"),this.bind(n.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(n.buttons.captions,"click",(function(){return t.toggleCaptions()})),this.bind(n.buttons.download,"click",(function(){Ee.call(t,t.media,"download")}),"download"),this.bind(n.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(n.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),ze.toggleMenu.call(t,e)}),null,!1),this.bind(n.buttons.settings,"keyup",(function(e){var n=e.which;[13,32].includes(n)&&(13!==n?(e.preventDefault(),e.stopPropagation(),ze.toggleMenu.call(t,e)):ze.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(n.settings.menu,"keydown",(function(e){27===e.which&&ze.toggleMenu.call(t,e)})),this.bind(n.inputs.seek,"mousedown mousemove",(function(e){var t=n.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",i)})),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var n=e.currentTarget,i=e.keyCode?e.keyCode:e.which;if(!K(e)||39===i||37===i){t.lastSeekTime=Date.now();var r=n.hasAttribute("play-on-seeked"),a=["mouseup","touchend","keyup"].includes(e.type);r&&a?(n.removeAttribute("play-on-seeked"),t.play()):!a&&t.playing&&(n.setAttribute("play-on-seeked",""),t.pause())}})),$.isIos){var r=he.call(t,'input[type="range"]');Array.from(r).forEach((function(t){return e.bind(t,i,(function(e){return Y(e.target)}))}))}this.bind(n.inputs.seek,i,(function(e){var n=e.currentTarget,i=n.getAttribute("seek-value");W(i)&&(i=n.value),n.removeAttribute("seek-value"),t.currentTime=i/n.max*t.duration}),"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",(function(e){return ze.updateSeekTooltip.call(t,e)})),this.bind(n.progress,"mousemove touchmove",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startMove(e)})),this.bind(n.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(n.progress,"mousedown touchstart",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startScrubbing(e)})),this.bind(n.progress,"mouseup touchend",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.endScrubbing(e)})),$.isWebkit&&Array.from(he.call(t,'input[type="range"]')).forEach((function(n){e.bind(n,"input",(function(e){return ze.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!V(n.display.duration)&&this.bind(n.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,ze.timeUpdate.call(t))})),this.bind(n.inputs.volume,i,(function(e){t.volume=e.target.value}),"volume"),this.bind(n.controls,"mouseenter mouseleave",(function(e){n.controls.hover=!t.touch&&"mouseenter"===e.type})),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){n.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(n.controls,"focusin",(function(){var i=t.config,r=t.timers;ue(n.controls,i.classNames.noTransition,!0),it.toggleControls.call(t,!0),setTimeout((function(){ue(n.controls,i.classNames.noTransition,!1)}),0);var a=e.touch?3e3:4e3;clearTimeout(r.controls),r.controls=setTimeout((function(){return it.toggleControls.call(t,!1)}),a)})),this.bind(n.inputs.volume,"wheel",(function(e){var n=e.webkitDirectionInvertedFromDevice,i=s([e.deltaX,-e.deltaY].map((function(e){return n?-e:e})),2),r=i[0],a=i[1],o=Math.sign(Math.abs(r)>Math.abs(a)?r:a);t.increaseVolume(o/50);var u=t.media.volume;(1===o&&u<1||-1===o&&u>0)&&e.preventDefault()}),"volume",!1)}}]),t}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var at=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,u=document,c=i.async,l=(i.numRetries||0)+1,h=i.before||e,d=t.replace(/[\?|#].*$/,""),f=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(d)?((s=u.createElement("link")).rel="stylesheet",s.href=f,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(s=u.createElement("img")).src=f:((s=u.createElement("script")).src=t,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(e){var u=e.type[0];if(a)try{s.sheet.cssText.length||(u="e")}catch(e){18!=e.code&&(u="e")}if("e"==u){if((r+=1)<l)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,u,e.defaultPrevented)},!1!==h(t,s)&&u.head.appendChild(s)}function s(e,n,i){var s,u;if(n&&n.trim&&(s=n),u=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function c(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,u=[];for(i=function(e,n,i){if("e"==n&&u.push(e),"b"==n){if(!i)return;u.push(e)}--a||t(u)},r=0;r<s;r++)o(e[r],i,n)}(e,(function(e){a(u,e),t&&a({success:t,error:n},e),r(s,e)}),u)}if(u.returnPromise)return new Promise(c);c()}return s.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,a,o,s=[],u=e.length,c=u;for(r=function(e,n){n.length&&s.push(e),--c||t(s)};u--;)a=e[u],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t},s}()}(t={exports:{}}),t.exports}();function ot(e){return new Promise((function(t,n){at(e,{success:t,error:n})}))}function st(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Ee.call(this,this.media,e?"play":"pause"))}var ut={setup:function(){var e=this;ue(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Ce.call(e),_(window.Vimeo)?ut.ready.call(e):ot(e.config.urls.vimeo.sdk).then((function(){ut.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,n=t.config.vimeo,i=We(Q({},{loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},n)),r=t.media.getAttribute("src");W(r)&&(r=t.media.getAttribute(t.config.attributes.embed.id));var a,o=W(a=r)?null:O(Number(a))?a:a.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:a,u=te("iframe"),c=Ne(t.config.urls.vimeo.iframe,o,i);u.setAttribute("src",c),u.setAttribute("allowfullscreen",""),u.setAttribute("allowtransparency",""),u.setAttribute("allow","autoplay"),W(n.referrerPolicy)||u.setAttribute("referrerPolicy",n.referrerPolicy);var l=te("div",{poster:t.poster,class:t.config.classNames.embedContainer});l.appendChild(u),t.media=ae(l,t.media),Be(Ne(t.config.urls.vimeo.api,o),"json").then((function(e){if(!W(e)){var n=new URL(e[0].thumbnail_large);n.pathname="".concat(n.pathname.split("_")[0],".jpg"),it.setPoster.call(t,n.href).catch((function(){}))}})),t.embed=new window.Vimeo.Player(u,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return st.call(t,!0),t.embed.play()},t.media.pause=function(){return st.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var h=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return h},set:function(e){var n=t.embed,i=t.media,r=t.paused,a=t.volume,o=r&&!n.hasPlayed;i.seeking=!0,Ee.call(t,i,"seeking"),Promise.resolve(o&&n.setVolume(0)).then((function(){return n.setCurrentTime(e)})).then((function(){return o&&n.pause()})).then((function(){return o&&n.setVolume(a)})).catch((function(){}))}});var d=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return d},set:function(e){t.embed.setPlaybackRate(e).then((function(){d=e,Ee.call(t,t.media,"ratechange")}))}});var f=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return f},set:function(e){t.embed.setVolume(e).then((function(){f=e,Ee.call(t,t.media,"volumechange")}))}});var p=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return p},set:function(e){var n=!!j(e)&&e;t.embed.setVolume(n?0:t.config.volume).then((function(){p=n,Ee.call(t,t.media,"volumechange")}))}});var m,g=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return g},set:function(e){var n=j(e)?e:t.config.loop.active;t.embed.setLoop(n).then((function(){g=n}))}}),t.embed.getVideoUrl().then((function(e){m=e,ze.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return m}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(n){var i=s(n,2),r=i[0],a=i[1];t.embed.ratio=[r,a],Ce.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(n){t.config.title=n,it.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){h=e,Ee.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,Ee.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,Xe.setup.call(t)})),t.embed.on("cuechange",(function(e){var n=e.cues,i=(void 0===n?[]:n).map((function(e){return function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)}));Xe.updateCues.call(t,i)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){st.call(t,!e),e||Ee.call(t,t.media,"playing")})),V(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){Ee.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){Ee.call(t,t.media,"playing")})),t.embed.on("play",(function(){st.call(t,!0),Ee.call(t,t.media,"playing")})),t.embed.on("pause",(function(){st.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,h=e.seconds,Ee.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,Ee.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&Ee.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,Ee.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,Ee.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,Ee.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,Ee.call(t,t.media,"error")})),setTimeout((function(){return it.build.call(t)}),0)}};function ct(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Ee.call(this,this.media,e?"play":"pause"))}function lt(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var ht,dt={setup:function(){var e=this;if(ue(this.elements.wrapper,this.config.classNames.embed,!0),_(window.YT)&&B(window.YT.Player))dt.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){B(t)&&t(),dt.ready.call(e)},ot(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Be(Ne(this.config.urls.youtube.api,e)).then((function(e){if(_(e)){var n=e.title,i=e.height,r=e.width;t.config.title=n,it.setTitle.call(t),t.embed.ratio=[r,i]}Ce.call(t)})).catch((function(){Ce.call(t)}))},ready:function(){var e=this,t=e.media&&e.media.getAttribute("id");if(W(t)||!t.startsWith("youtube-")){var n=e.media.getAttribute("src");W(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));var i,r,a=W(i=n)?null:i.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:i,o=(r=e.provider,"".concat(r,"-").concat(Math.floor(1e4*Math.random()))),s=te("div",{id:o,poster:e.poster});e.media=ae(s,e.media);var u=function(e){return"https://i.ytimg.com/vi/".concat(a,"/").concat(e,"default.jpg")};nt(u("maxres"),121).catch((function(){return nt(u("sd"),121)})).catch((function(){return nt(u("hq"))})).then((function(t){return it.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}));var c=e.config.youtube;e.embed=new window.YT.Player(o,{videoId:a,host:lt(c),playerVars:Q({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},c),events:{onError:function(t){if(!e.media.error){var n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:i},Ee.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),Ee.call(e,e.media,"ratechange")},onReady:function(t){if(!B(e.media.play)){var n=t.target;dt.getTitle.call(e,a),e.media.play=function(){ct.call(e,!0),n.playVideo()},e.media.pause=function(){ct.call(e,!1),n.pauseVideo()},e.media.stop=function(){n.stopVideo()},e.media.duration=n.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,Ee.call(e,e.media,"seeking"),n.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(e){n.setPlaybackRate(e)}});var i=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return i},set:function(t){i=t,n.setVolume(100*i),Ee.call(e,e.media,"volumechange")}});var r=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return r},set:function(t){var i=j(t)?t:r;r=i,n[i?"mute":"unMute"](),Ee.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var o=n.getAvailablePlaybackRates();e.options.speed=o.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&e.media.setAttribute("tabindex",-1),Ee.call(e,e.media,"timeupdate"),Ee.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=n.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&Ee.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),Ee.call(e,e.media,"canplaythrough"))}),200),setTimeout((function(){return it.build.call(e)}),50)}},onStateChange:function(t){var n=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,Ee.call(e,e.media,"seeked")),t.data){case-1:Ee.call(e,e.media,"timeupdate"),e.media.buffered=n.getVideoLoadedFraction(),Ee.call(e,e.media,"progress");break;case 0:ct.call(e,!1),e.media.loop?(n.stopVideo(),n.playVideo()):Ee.call(e,e.media,"ended");break;case 1:e.config.autoplay||!e.media.paused||e.embed.hasPlayed?(ct.call(e,!0),Ee.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){Ee.call(e,e.media,"timeupdate")}),50),e.media.duration!==n.getDuration()&&(e.media.duration=n.getDuration(),Ee.call(e,e.media,"durationchange"))):e.media.pause();break;case 2:e.muted||e.embed.unMute(),ct.call(e,!1);break;case 3:Ee.call(e,e.media,"waiting")}Ee.call(e,e.elements.container,"statechange",!1,{code:t.data})}}})}}},ft={setup:function(){this.media?(ue(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ue(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ue(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=te("div",{class:this.config.classNames.video}),Z(this.media,this.elements.wrapper),this.isEmbed&&(this.elements.poster=te("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster))),this.isHTML5?Pe.setup.call(this):this.isYouTube?dt.setup.call(this):this.isVimeo&&ut.setup.call(this)):this.debug.warn("No media element found!")}},pt=function(){function t(n){var i=this;e(this,t),this.player=n,this.config=n.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){i.on("loaded",e),i.on("error",t)})),this.load()}return i(t,[{key:"load",value:function(){var e=this;this.enabled&&(_(window.google)&&_(window.google.ima)?this.ready():ot(this.player.config.urls.googleIMA.sdk).then((function(){e.ready()})).catch((function(){e.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var e,t=this;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){t.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){this.elements.container=te("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.requestAds()}},{key:"requestAds",value:function(){var e=this,t=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return e.onAdsManagerLoaded(t)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)}),!1);var n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");var n=function(){var t=Ke(Math.max(e.manager.getRemainingTime(),0)),n="".concat(Ue("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",n)};this.countdownTimer=setInterval(n,100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=e.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return t.onAdEvent(e)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var e=this;W(this.cuePoints)||this.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<e.player.duration){var n=e.player.elements.progress;if(V(n)){var i=100/e.player.duration*t,r=te("span",{class:e.player.config.classNames.cues});r.style.left="".concat(i.toString(),"%"),n.appendChild(r)}}}))}},{key:"onAdEvent",value:function(e){var t=this,n=this.player.elements.container,i=e.getAd(),r=e.getAdData();switch(function(e){Ee.call(t.player,t.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=n.offsetWidth,i.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(r.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var e,t=this,n=this.player.elements.container;this.player.on("canplay",(function(){t.addCuePoints()})),this.player.on("ended",(function(){t.loader.contentComplete()})),this.player.on("timeupdate",(function(){e=t.player.currentTime})),this.player.on("seeked",(function(){var n=t.player.currentTime;W(t.cuePoints)||t.cuePoints.forEach((function(i,r){e<i&&i<n&&(t.manager.discardAdBreak(),t.cuePoints.splice(r,1))}))})),window.addEventListener("resize",(function(){t.manager&&t.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){e.manager.setVolume(e.player.volume),e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0}catch(t){e.onAdError(t)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,this.player.media.play()}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then((function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise((function(t){e.on("loaded",t),e.player.debug.log(e.manager)})),e.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=this.events[e];F(a)&&a.forEach((function(e){B(e)&&e.apply(t,i)}))}},{key:"on",value:function(e,t){return F(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),e)}},{key:"clearSafetyTimer",value:function(e){D(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!W(e.publisherId)||G(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(G(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(We(t))}}]),t}(),mt=function(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n},gt=function(){function t(n){e(this,t),this.player=n,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return i(t,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)}))}},{key:"getThumbnails",value:function(){var e=this;return new Promise((function(t){var n=e.player.config.previewThumbnails.src;if(W(n))throw new Error("Missing previewThumbnails.src config attribute");var i=(U(n)?[n]:n).map((function(t){return e.getThumbnail(t)}));Promise.all(i).then((function(){e.thumbnails.sort((function(e,t){return e.height-t.height})),e.player.debug.log("Preview thumbnails",e.thumbnails),t()}))}))}},{key:"getThumbnail",value:function(e){var t=this;return new Promise((function(n){Be(e).then((function(i){var r,a,o={frames:(r=i,a=[],r.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(O(t.startTime)){if(!W(e.trim())&&W(t.text)){var n=e.trim().split("#xywh="),i=s(n,1);if(t.text=i[0],n[1]){var r=s(n[1].split(","),4);t.x=r[0],t.y=r[1],t.w=r[2],t.h=r[3]}}}else{var a=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);a&&(t.startTime=60*Number(a[1]||0)*60+60*Number(a[2])+Number(a[3])+Number("0.".concat(a[4])),t.endTime=60*Number(a[6]||0)*60+60*Number(a[7])+Number(a[8])+Number("0.".concat(a[9])))}})),t.text&&a.push(t)})),a),height:null,urlPrefix:""};o.frames[0].text.startsWith("/")||o.frames[0].text.startsWith("http://")||o.frames[0].text.startsWith("https://")||(o.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var u=new Image;u.onload=function(){o.height=u.naturalHeight,o.width=u.naturalWidth,t.thumbnails.push(o),n()},u.src=o.urlPrefix+o.frames[0].text}))}))}},{key:"startMove",value:function(e){if(this.loaded&&q(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Ke(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){(D(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Te.call(this.player,this.player.media,"timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var e=this;this.player.on("play",(function(){e.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){e.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=te("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=te("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=te("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=te("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),V(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=te("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex((function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime})),n=t>=0,i=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((function(n,r){e.loadedImages.includes(n.frames[t].text)&&(i=r)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(i)))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.showingThumb,i=this.thumbnails[t],r=i.urlPrefix,a=i.frames[n],o=i.frames[n].text,s=r+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,a,t,n,o,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var u=new Image;u.src=s,u.dataset.index=n,u.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log("Loading image: ".concat(s)),u.onload=function(){return e.showImage(u,a,t,n,o,!0)},this.loadingImage=u,this.removeOldImages(u)}}},{key:"showImage",value:function(e,t,n,i,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(r,". num: ").concat(i,". qual: ").concat(n,". newimg: ").concat(a)),this.setImageSizeAndOffset(e,t),a&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(n){if("img"===n.tagName.toLowerCase()){var i=t.usingSprites?500:1e3;if(n.dataset.index!==e.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;var r=t.currentImageContainer;setTimeout((function(){r.removeChild(n),t.player.debug.log("Removing thumb: ".concat(n.dataset.filename))}),i)}}}))}},{key:"preloadNearby",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i){setTimeout((function(){var r=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===r){var a;a=n?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var o=!1;a.forEach((function(e){var n=e.text;if(n!==r&&!t.loadedImages.includes(n)){o=!0,t.player.debug.log("Preloading thumb filename: ".concat(n));var a=t.thumbnails[0].urlPrefix+n,s=new Image;s.src=a,s.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(n)),t.loadedImages.includes(n)||t.loadedImages.push(n),i()}}})),o||i()}}),300)}))}},{key:"getHigherQuality",value:function(e,t,n,i){var r=this;if(e<this.thumbnails.length-1){var a=t.naturalHeight;this.usingSprites&&(a=n.h),a<this.thumbContainerHeight&&setTimeout((function(){r.showingThumbFilename===i&&(r.player.debug.log("Showing higher quality thumb for: ".concat(i)),r.loadImage(e+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(n,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),n=this.elements.thumb.container,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10,a=this.mousePosX-e.left-n.clientWidth/2;a<i&&(a=i),a>r&&(a=r),n.style.left="".concat(a,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=mt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,n=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(n,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var n=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*n,"px"),e.style.width="".concat(e.naturalWidth*n,"px"),e.style.left="-".concat(t.x*n,"px"),e.style.top="-".concat(t.y*n,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?mt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),t}(),vt={insertElements:function(e,t){var n=this;U(t)?ne(e,this.media,{src:t}):F(t)&&t.forEach((function(t){ne(e,n.media,t)}))},change:function(e){var t=this;J(e,"sources.length")?(Pe.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],ie(t.media),t.media=null,V(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,i=e.type,r=s(n,1)[0],a=r.provider,o=void 0===a?Je.html5:a,u=r.src,c="html5"===o?i:"div",l="html5"===o?{}:{src:u};Object.assign(t,{provider:o,type:i,supported:ge.check(i,o,t.config.playsinline),media:te(c,l)}),t.elements.container.appendChild(t.media),j(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),W(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),it.addStyleHook.call(t),t.isHTML5&&vt.insertElements.call(t,"source",n),t.config.title=e.title,ft.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&vt.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&it.build.call(t),t.isHTML5&&t.media.load(),W(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new gt(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},yt=function(){function t(n,i){var r=this;if(e(this,t),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ge.touch,this.media=n,U(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||H(this.media)||F(this.media))&&(this.media=this.media[0]),this.config=Q({},Ye,t.defaults,i||{},function(){try{return JSON.parse(r.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new et(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ge),!D(this.media)&&V(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(ge.check().api){var a=this.media.cloneNode(!0);a.autoplay=!1,this.elements.original=a;var o=this.media.tagName.toLowerCase(),s=null,u=null;switch(o){case"div":if(s=this.media.querySelector("iframe"),V(s)){if(u=Ge(s.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Je.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Je.vimeo:null}(u.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",u.search.length){var c=["1","true"];c.includes(u.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(u.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(u.searchParams.get("playsinline")),this.config.youtube.hl=u.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(W(this.provider)||!Object.keys(Je).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Qe;break;case"video":case"audio":this.type=o,this.provider=Je.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=ge.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new rt(this),this.storage=new je(this),this.media.plyr=this,V(this.elements.container)||(this.elements.container=te("div",{tabindex:0}),Z(this.media,this.elements.container)),it.addStyleHook.call(this),ft.setup.call(this),this.config.debug&&be.call(this,this.elements.container,this.config.events.join(" "),(function(e){r.debug.log("event: ".concat(e.type))})),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&it.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new tt(this),this.config.ads.enabled&&(this.ads=new pt(this)),this.isHTML5&&this.config.autoplay&&setTimeout((function(){return r.play()}),10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new gt(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return i(t,[{key:"play",value:function(){var e=this;return B(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return e.ads.play()})).catch((function(){return e.media.play()})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&B(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(j(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):B(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=O(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=O(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(O(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){Xe.toggle.call(this,e,!1)}},{key:"airplay",value:function(){ge.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=ce(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=ue(this.elements.container,this.config.classNames.hideControls,n);if(i&&this.config.controls.includes("settings")&&!W(this.config.settings)&&ze.toggleMenu.call(this,!1),i!==t){var r=i?"controlshidden":"controlsshown";Ee.call(this,this.media,r)}return!i}return!1}},{key:"on",value:function(e,t){be.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){Te.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){we(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var i=function(){document.body.style.overflow="",t.embed=null,n?(Object.keys(t.elements).length&&(ie(t.elements.buttons.play),ie(t.elements.captions),ie(t.elements.controls),ie(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),B(e)&&e()):(ke.call(t),ae(t.elements.original,t.elements.container),Ee.call(t,t.elements.original,"destroyed",!0),B(e)&&e.call(t.elements.original),t.ready=!1,setTimeout((function(){t.elements=null,t.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(it.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&B(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))}}},{key:"supports",value:function(e){return ge.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===Je.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Je.youtube}},{key:"isVimeo",get:function(){return this.provider===Je.vimeo}},{key:"isVideo",get:function(){return this.type===Qe}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=O(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return O(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=O(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;U(t)&&(t=Number(t)),O(t)||(t=this.storage.get("volume")),O(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!W(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;j(t)||(t=this.storage.get("muted")),j(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,n=null;O(e)&&(n=e),O(n)||(n=this.storage.get("speed")),O(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,r=this.maximumSpeed;n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),n)}(n,i,r),this.config.speed.selected=n,setTimeout((function(){t.media.playbackRate=n}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,u(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,u(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var i=[!W(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(O),r=!0;if(!n.includes(i)){var a=function(e,t){return F(e)&&e.length?e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})):null}(n,i);this.debug.warn("Unsupported quality option: ".concat(i,", using ").concat(a," instead")),i=a,r=!1}t.selected=i,this.media.quality=i,r&&this.storage.set({quality:i})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=j(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){vt.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return G(e)?e:this.source},set:function(e){G(e)&&(this.config.urls.download=e,ze.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?it.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=Ae(Ie.call(this));return F(e)?e.join(":"):e},set:function(e){this.isVideo?U(e)&&xe(e)?(this.config.ratio=e,Ce.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=j(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){Xe.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){Xe.setLanguage.call(this,e,!1)},get:function(){return(Xe.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(ge.pip){var t=j(e)?e:!this.pip;B(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?$e:"inline"),B(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return ge.pip?W(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===$e:null}}],[{key:"supported",value:function(e,t,n){return ge.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return Fe(e,t)}},{key:"setup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return U(e)?i=Array.from(document.querySelectorAll(e)):H(e)?i=Array.from(e):F(e)&&(i=e.filter(V)),W(i)?null:i.map((function(e){return new t(e,n)}))}}]),t}();return yt.defaults=(ht=Ye,JSON.parse(JSON.stringify(ht))),yt}())}).call(this,n(74))},208:function(e,t,n){(function(e){!function(){var n="undefined"!=typeof window?window:e,i={};for(var r in function(e,t){var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function a(){a=function(){},r.Symbol||(r.Symbol=s)}var o,s=(o=0,function(e){return"jscomp_symbol_"+(e||"")+o++});function u(){a();var e=r.Symbol.iterator;e||(e=r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),u=function(){}}function c(e){var t=0;return l((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function l(e){return u(),(e={next:e})[r.Symbol.iterator]=function(){return this},e}function h(e){u();var t=e[Symbol.iterator];return t?t.call(e):c(e)}function d(e,t){if(t){for(var n=r,a=e.split("."),o=0;o<a.length-1;o++){var s=a[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[a=a[a.length-1]]))!=o&&null!=s&&i(n,a,{configurable:!0,writable:!0,value:s})}}function f(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(e())}d("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.C(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.v=function(e){var t=this.c();e.Yb(t.resolve,t.reject)},t.prototype.C=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Yb(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Yb=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=h(e),a=r.next();!a.done;a=r.next())i(a.value).Yb(t,n)}))},t.all=function(e){var n=h(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Yb(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),d("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var p,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var g;e:{var v={};try{v.__proto__={ne:!0},g=v.ne;break e}catch(o){}g=!1}p=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=p;function b(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function w(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function T(e,t){e.a={yd:t,Gd:!0},e.j=e.f||e.b}function E(e,t,n){return e.j=n,{value:t}}function k(e){e.j=0}function S(e,t,n){e.f=t,null!=n&&(e.b=n)}function x(e,t){e.f=0,e.b=t||0}function A(e,t){e.j=t,e.f=0}function I(e){e.f=0;var t=e.a.yd;return e.a=null,t}function C(e){e.i=[e.a],e.f=0,e.b=0}function P(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.Gd?e.j=e.f||e.b:null!=n.A&&e.b<n.A?(e.j=n.A,e.a=null):e.j=e.b:e.j=t}function M(e){this.a=new b,this.b=e}function N(e,t,n,i){try{var r=t.call(e.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.g=!1,r;var a=r.value}catch(t){return e.a.c=null,T(e.a,t),R(e)}return e.a.c=null,i.call(e.a,a),R(e)}function R(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.o=void 0,T(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Gd)throw t.yd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function L(e){this.next=function(t){return w(e.a),e.a.c?t=N(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=R(e)),t},this.throw=function(t){return w(e.a),e.a.c?t=N(e,e.a.c.throw,t,e.a.h):(T(e.a,t),t=R(e)),t},this.return=function(t){return function(e,t){w(e.a);var n=e.a.c;return n?N(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),R(e))}(e,t)},u(),this[Symbol.iterator]=function(){return this}}function D(e,t){return L.prototype=e.prototype,new L(new M(t))}function _(e){if(!(e instanceof Array)){e=h(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Cd:r,ie:a}}return{Cd:-1,ie:void 0}}function j(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.h=function(e){this.o=e},b.prototype.return=function(e){this.a={return:e},this.j=this.b},b.prototype.A=function(e){this.j=e},d("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),u(),e=h(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){O(e,o)||i(e,o,{value:{}})}function r(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!O(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return O(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return O(e,o)&&O(e[o],this.a)},t.prototype.delete=function(e){return!(!O(e,o)||!O(e[o],this.a))&&delete e[o][this.a]},t})),d("Map",(function(e){function t(){var e={};return e.Ca=e.next=e.head=e}function n(e,t){var n=e.a;return l((function(){if(n){for(;n.head!=e.a;)n=n.Ca;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&O(e.b,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,X:a}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=h(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;a(),u();var o=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ca:this.a.Ca,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ca.next=n.X,this.a.Ca=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ca.next=e.X.next,e.X.next.Ca=e.X.Ca,e.X.head=null,this.size--,!0)},r.prototype.clear=function(){this.b={},this.a=this.a.Ca=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),d("Set",(function(e){function t(e){if(this.a=new Map,e){e=h(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(a(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),d("Array.prototype.findIndex",(function(e){return e||function(e,t){return U(this,e,t).Cd}})),d("Array.prototype.keys",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}})),d("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),d("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),d("String.prototype.includes",(function(e){return e||function(e,t){return-1!==j(this,e,"includes").indexOf(e,t||0)}})),d("Array.from",(function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}})),d("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=j(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}})),d("Array.prototype.find",(function(e){return e||function(e,t){return U(this,e,t).ie}}));var B=this;function F(e,t){var n,i=e.split("."),r=B;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]?r[n]:r[n]={}:r[n]=t}function H(e,t){function n(){}n.prototype=t.prototype,e.ag=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.og=function(e,n,i){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function V(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function q(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function K(e){return e.a/(1-Math.pow(e.c,e.b))}function z(){this.b=new V(2),this.c=new V(5),this.a=0}function G(){}function W(){}function X(){}B.a=!0,z.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(K(this.b),K(this.c))},e.console&&e.console.log.bind&&(W=console.warn.bind(console),G=console.error.bind(console));var Y=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function $(e){var t;e instanceof $?(J(this,e.va),this.$a=e.$a,this.ra=e.ra,Q(this,e.xb),this.ia=e.ia,Z(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(Y))?(J(this,t[1]||"",!0),this.$a=ee(t[2]||""),this.ra=ee(t[3]||"",!0),Q(this,t[4]),this.ia=ee(t[5]||"",!0),Z(this,t[6]||"",!0),this.Qa=ee(t[7]||"")):this.a=new ue(null)}function J(e,t,n){e.va=n?ee(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function Q(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.xb=t}else e.xb=null}function Z(e,t,n){t instanceof ue?e.a=t:(n||(t=te(t,oe)),e.a=new ue(t))}function ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function te(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ne(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=$.prototype).va="",n.$a="",n.ra="",n.xb=null,n.ia="",n.Qa="",n.toString=function(){var e=[],t=this.va;if(t&&e.push(te(t,ie,!0),":"),t=this.ra){e.push("//");var n=this.$a;n&&e.push(te(n,ie,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.xb)&&e.push(":",String(t))}return(t=this.ia)&&(this.ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(te(t,"/"==t.charAt(0)?ae:re,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",te(t,se)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new $);var n=!!e.va;n?J(t,e.va):n=!!e.$a,n?t.$a=e.$a:n=!!e.ra,n?t.ra=e.ra:n=null!=e.xb;var i=e.ia;if(n)Q(t,e.xb);else if(n=!!e.ia){if("/"!=i.charAt(0))if(this.ra&&!this.ia)i="/"+i;else{var r=t.ia.lastIndexOf("/");-1!=r&&(i=t.ia.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ia=i:n=""!==e.a.toString(),n?Z(t,e.a.clone()):n=!!e.Qa,n&&(t.Qa=e.Qa),t},n.clone=function(){return new $(this)};var ie=/[#\/\?@]/g,re=/[#\?:]/g,ae=/[#\?]/g,oe=/[#\?@]/g,se=/#/g;function ue(e){this.a=e||null}function ce(e){this.b=e,this.a=null}function le(e){this.b=e,this.a=null}function he(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function de(e){return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(i=e.b*(1+(2*Math.random()-1)*e.h),E(t,new Promise((function(e){new le(e).O(i/1e3)})),2));case 2:e.b*=e.g,k(t)}}))}))}function fe(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function pe(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function me(e,t){this.promise=e,this.Jd=t,this.a=!1}function ge(e){return new me(Promise.reject(e),(function(){return Promise.resolve()}))}function ve(){var e=Promise.reject(new fe(2,7,7001));return e.catch((function(){})),new me(e,(function(){return Promise.resolve()}))}function ye(e){return new me(Promise.resolve(e),(function(){return Promise.resolve()}))}function be(e){return new me(e,(function(){return e.catch((function(){}))}))}function we(e){return new me(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Te(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){})).catch((function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Ee(t,n){for(var i in n=void 0===n?{}:n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function ke(){this.a={}}function Se(){this.Bc=new ke,this.Vb=this}function xe(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Ae(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ie(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ce(e,t,n){if(n||(n=Ae),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=h(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.item,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Pe(){this.a=[]}function Me(e,t){e.a.push(t.finally((function(){Ie(e.a,t)})))}function Ne(e){Se.call(this),this.f=!1,this.g=new Pe,this.a=new Set,this.b=new Set,this.c=e||null}(n=ue.prototype).ha=null,n.$b=null,n.add=function(e,t){if(!this.ha&&(this.ha={},this.$b=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=n=[]),n.push(t),this.$b++,this},n.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var n=encodeURIComponent(e),i=this.ha[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},n.clone=function(){var e=new ue;if(e.a=this.a,this.ha){var t,n={};for(t in this.ha)n[t]=this.ha[t].concat();e.ha=n,e.$b=this.$b}return e},ce.prototype.O=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},ce.prototype.stop=function(){this.a&&(this.a(),this.a=null)},F("shaka.util.Timer",le),le.prototype.sc=function(){return this.stop(),this.b(),this},le.prototype.tickNow=le.prototype.sc,le.prototype.O=function(e){var t=this;return this.stop(),this.a=new ce((function(){t.b()})).O(e),this},le.prototype.tickAfter=le.prototype.O,le.prototype.La=function(e){var t=this;return this.stop(),this.a=new ce((function(){t.a.O(e),t.b()})).O(e),this},le.prototype.tickEvery=le.prototype.La,le.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},le.prototype.stop=le.prototype.stop,F("shaka.util.Error",fe),fe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},fe.Severity={RECOVERABLE:1,CRITICAL:2},fe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},fe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},pe.prototype.resolve=function(){},pe.prototype.reject=function(){},F("shaka.util.AbortableOperation",me),me.failed=ge,me.aborted=ve,me.completed=ye,me.notAbortable=be,me.prototype.abort=function(){return this.a=!0,this.Jd()},me.prototype.abort=me.prototype.abort,me.all=we,me.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},me.prototype.finally=me.prototype.finally,me.prototype.U=function(e,t){function n(){return r.reject(new fe(2,7,7001)),i.abort()}var i=this,r=new pe;return this.promise.then((function(t){i.a?r.reject(new fe(2,7,7001)):e?n=Te(e,t,r):r.resolve(t)}),(function(e){t?n=Te(t,e,r):r.reject(e)})),new me(r,(function(){return n()}))},me.prototype.chain=me.prototype.U,Ee.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ee.prototype.stopImmediatePropagation=function(){this.a=!0},Ee.prototype.stopPropagation=function(){},(n=ke.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Se.prototype.addEventListener=function(e,t){this.Bc.push(e,t)},Se.prototype.removeEventListener=function(e,t){this.Bc.remove(e,t)},Se.prototype.dispatchEvent=function(e){for(var t=this.Bc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Vb,e.currentTarget=this.Vb;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Pe.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},H(Ne,Se),F("shaka.net.NetworkingEngine",Ne);var Re={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};Ne.RequestType=Re,Ne.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Le={};function De(e,t,n){n=n||3;var i=Le[e];(!i||n>=i.priority)&&(Le[e]={priority:n,zf:t})}function _e(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Oe(){this.a=0}function Ue(e,t,n){me.call(this,e,t),this.b=n}Ne.registerScheme=De,Ne.unregisterScheme=function(e){delete Le[e]},Ne.prototype.Bf=function(e){this.a.add(e)},Ne.prototype.registerRequestFilter=Ne.prototype.Bf,Ne.prototype.cg=function(e){this.a.delete(e)},Ne.prototype.unregisterRequestFilter=Ne.prototype.cg,Ne.prototype.we=function(){this.a.clear()},Ne.prototype.clearAllRequestFilters=Ne.prototype.we,Ne.prototype.Cf=function(e){this.b.add(e)},Ne.prototype.registerResponseFilter=Ne.prototype.Cf,Ne.prototype.dg=function(e){this.b.delete(e)},Ne.prototype.unregisterResponseFilter=Ne.prototype.dg,Ne.prototype.xe=function(){this.b.clear()},Ne.prototype.clearAllResponseFilters=Ne.prototype.xe,Ne.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Ne.prototype.destroy=Ne.prototype.destroy,Ne.prototype.request=function(e,t){var n=this,i=new Oe;if(this.f){var r=Promise.reject(new fe(2,7,7001));return r.catch((function(){})),new Ue(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?xe(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=xe(t.uris);var a=(r=function(e,t,n){for(var i=ye(void 0),r={},a=(e=h(e.a)).next();!a.done;r={fd:r.fd},a=e.next())r.fd=a.value,i=i.U(function(e){return function(){return e.fd(t,n)}}(r));return i.U(void 0,(function(e){if(e&&7001==e.code)throw e;throw new fe(2,1,1006,e)}))}(this,e,t)).U((function(){return function e(t,n,i,r,a,o,s){var u=new $(i.uris[a]),c=u.va,l=!1;c||(c=(c=location.protocol).slice(0,-1),J(u,c),i.uris[a]=u.toString());var h,d=(c=Le[c])?c.zf:null;return d?be(de(r)).U((function(){return t.f?ve():(h=Date.now(),d(i.uris[a],i,n,(function(e,i,r){t.c&&1==n&&(t.c(e,i),l=!0,s.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,Ze:l}}),(function(u){if(u&&7001==u.code)throw u;if(t.f)return ve();if(u&&1==u.severity)return t.dispatchEvent(new Ee("retry",{error:u instanceof fe?u:null})),a=(a+1)%i.uris.length,e(t,n,i,r,a,u,s);throw u||o})):ge(new fe(2,1,1e3,u))}(n,e,t,new he(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=ye(void 0),r=(e=h(e.b)).next();!r.done;r=e.next())i=i.U(r.value.bind(null,t,n.response));return i.U((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof fe&&(t=e.severity),new fe(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;r.promise.then((function(){u=Date.now()-s}),(function(){}));var c=0;return a.promise.then((function(){c=Date.now()}),(function(){})),r=new Ue((r=o.U((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=u,r.timeMs+=i,t.Ze||!n.c||r.fromCache||1!=e||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}))).promise,r.Jd,i),Me(this.g,r),r},Ne.prototype.request=Ne.prototype.request,Ne.NumBytesRemainingClass=Oe;var je=Ue;if(je.prototype=m(me.prototype),je.prototype.constructor=je,y)y(je,me);else for(var Be in me)if("prototype"!=Be)if(Object.defineProperties){var Fe=Object.getOwnPropertyDescriptor(me,Be);Fe&&Object.defineProperty(je,Be,Fe)}else je[Be]=me[Be];function He(){}function Ve(){this.a=new ke}function qe(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Ke;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Ke=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}je.ag=me.prototype,Ne.PendingRequest=Ue,Ue.all=we,Ue.notAbortable=be,Ue.completed=ye,Ue.aborted=ve,Ue.failed=ge,F("shaka.util.IReleasable",He),He.prototype.release=function(){},F("shaka.util.EventManager",Ve),Ve.prototype.release=function(){this.Ya(),this.a=null},Ve.prototype.release=Ve.prototype.release,Ve.prototype.w=function(e,t,n,i){this.a&&(e=new qe(e,t,n,i),this.a.push(t,e))},Ve.prototype.listen=Ve.prototype.w,Ve.prototype.da=function(e,t,n,i){var r=this;this.w(e,t,(function i(a){r.ea(e,t,i),n(a)}),i)},Ve.prototype.listenOnce=Ve.prototype.da,Ve.prototype.ea=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=h(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.ea(),this.a.remove(t,r))},Ve.prototype.unlisten=Ve.prototype.ea,Ve.prototype.Ya=function(){if(this.a){for(var e=this.a.getAll(),t=(e=h(e)).next();!t.done;t=e.next())t.value.ea();this.a.a={}}},Ve.prototype.removeAll=Ve.prototype.Ya,qe.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},qe.prototype.unlisten=qe.prototype.ea;var Ke=void 0;function ze(e){if(e=new Uint8Array(e),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");return new $(e=at(e.subarray(4),!0)).ra}function Ge(e,t,n){function i(e){new DataView(a.buffer).setUint32(o,e.byteLength,!0),o+=4,r(e)}function r(e){a.set(e,o),o+=e.byteLength}if(!n||!n.byteLength)throw new fe(2,6,6015);t="string"==typeof t?new Uint8Array(ut(t,!0)):new Uint8Array(t);var a=new Uint8Array(8+e.byteLength+t.byteLength+n.byteLength),o=0;return r(new Uint8Array(e)),i(t),i(new Uint8Array(n)),a}function We(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function Xe(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function Ye(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function $e(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Je(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}F("shaka.util.FairPlayUtils.defaultGetContentId",ze),F("shaka.util.FairPlayUtils.initDataTransform",Ge);var Qe=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Ze(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function et(e){return""!=(it||(nt||(nt=new le((function(){it=null}))),(it=document.querySelector("video")||document.querySelector("audio"))||(it=document.createElement("video")),nt.O(1),it)).canPlayType(e)}function tt(e){return(navigator.userAgent||"").includes(e)}var nt=null,it=null;function rt(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=ct(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new fe(2,2,2004)}}function at(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new fe(2,2,2004);if(e instanceof ArrayBuffer)var i=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),i=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return ct(n)}function ot(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return rt(t);if(254==t[0]&&255==t[1])return at(t.subarray(2),!1);if(255==t[0]&&254==t[1])return at(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return at(e,!1);if(0==t[1]&&0==t[3])return at(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return rt(e);throw new fe(2,2,2003)}function st(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function ut(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function ct(e){if(!lt)for(var t=function(e){try{return _(new Uint8Array(e)),!0}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){lt=function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.size)n+=String.fromCharCode.apply(String,_(t.subarray(i,i+e.size)));return n}}(n);break}return lt(e)}F("shaka.util.StringUtils.fromUTF8",rt),F("shaka.util.StringUtils.fromUTF16",at),F("shaka.util.StringUtils.fromBytesAutoDetect",ot),F("shaka.util.StringUtils.toUTF8",st),F("shaka.util.StringUtils.toUTF16",ut);var lt=null;function ht(t,n){var i=ct(t);return n=null==n||n,i=e.btoa(i).replace(/\+/g,"-").replace(/\//g,"_"),n?i:i.replace(/=*$/,"")}function dt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function ft(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length;i+=2)n[i/2]=e.parseInt(t.substr(i,2),16);return n}function pt(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function mt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function gt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n}function vt(e){var t=this;this.C=e,this.v=new Set,this.m=this.h=null,this.P=!1,this.a=null,this.i=new Ve,this.b=new Map,this.s=[],this.l=new pe,this.c=null,this.g=function(n){t.l.reject(n),e.onError(n)},this.na=new Map,this.T=new Map,this.M=new le((function(){return function(e){var t=e.na,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new fe(2,6,6014)),e.C.kc(Ye(n))}(t)})),this.f=!1,this.$=new pe,this.D=!1,this.G=[],this.ma=!1,this.W=new le((function(){!function(e){e.b.forEach((function(t,n){var i=t.Yc,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Yc=r)}))}(t)})).La(1),this.l.catch((function(){}))}function yt(e,t,n){return e.s=n,e.D=0<n.length,bt(e,t)}function bt(t,n){var i=n.some((function(e){return 0<e.drmInfos.length}));if(!i){var r=Xe(t.c.servers);!function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var i=h(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(n,r)}var a=function(t){if(0==(t=Xe(t.c.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=ft(t),a=ft(e);r={kty:"oct",kid:ht(r,!1),k:ht(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:new Uint8Array(st(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}(t);if(a){var o=h(n);for(r=o.next();!r.done;r=o.next())r.value.drmInfos=[a]}for(r=(a=h(n)).next();!r.done;r=a.next())for(o=(r=h(r.value.drmInfos)).next();!o.done;o=r.next())Lt(o.value,Xe(t.c.servers),Xe(t.c.advanced||{}));return(r=function(e,t){for(var n=new Set,i=h(t),r=i.next();!r.done;r=i.next()){var a=h(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=h(n),r=i.next();!r.done;r=i.next())Lt(r.value,Xe(e.c.servers),Xe(e.c.advanced||{}));a=e.D?"required":"optional";var o=e.D?["persistent-license"]:["temporary"];for(i=new Map,n=h(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=h(t),r=n.next();!r.done;r=n.next()){r=r.value,a=r.audio,o=r.video;var s=a?$e(a.mimeType,a.codecs):"",u=o?$e(o.mimeType,o.codecs):"",c=h(r.drmInfos);for(r=c.next();!r.done;r=c.next()){r=r.value;var l=i.get(r.keySystem);l.drmInfos.push(r),r.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),r.persistentStateRequired&&(l.persistentState="required"),a&&l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),o&&l.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:u})}}return i}(t,n)).size?(r=xt(t,r),i?r:r.catch((function(){}))):(t.P=!0,Promise.resolve())}function wt(e){return f((function t(){var n;return D(t,(function(t){switch(t.j){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return S(t,3),E(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:A(t,0);break;case 3:return n=I(t),t.return(Promise.reject(new fe(2,6,6004,n.message)))}}))}))}function Tt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return It(e,t.initDataType,t.initData)})),e.s.forEach((function(t){return At(e,t)})),t.length||e.s.length||e.l.resolve(),e.l}function Et(e,t,n){for(var i=e.b.values(),r=(i=h(i)).next();!r.done;r=i.next())if(mt(n,r.value.initData))return;It(e,t,n)}function kt(e,t){return!!tt("Edge/")||e.v.has(t)}function St(e){return e=function(e,t){for(var n=[],i=h(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function xt(e,t){if(1==t.size&&t.has(""))return Promise.reject(new fe(2,6,6e3));for(var n=h(t.values()),i=n.next();!i.done;i=n.next())0==(i=i.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;var r=n=new pe;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,i){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(r=r.catch(function(){if(!this.f)return navigator.requestMediaKeySystemAccess(i,[t])}.bind(n)))}))}.bind(e)),r=(r=r.catch((function(){return Promise.reject(new fe(2,6,6001))}))).then(function(e){if(this.f)return Promise.reject();this.v.clear();var n=e.getConfiguration(),i=n.videoCapabilities||[],r=h(n.audioCapabilities||[]);for(n=r.next();!n.done;n=r.next())this.v.add(n.value.contentType);for(n=(i=h(i)).next();!n.done;n=i.next())this.v.add(n.value.contentType);i=e.keySystem,r=[];var a=[],o=[],s=[];return function(e,t,n,i,r){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return mt(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){i.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&mt(t.initData,e.initData)}))||i.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)r.includes(e.keyIds[a])||r.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,r,a,o,s),this.a={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new fe(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.f)return Promise.reject();this.h=e,this.P=!0}.bind(e)).catch(function(e){if(!this.f)return this.a=null,this.v.clear(),e instanceof fe?Promise.reject(e):Promise.reject(new fe(2,6,6002,e.message))}.bind(e)),n.reject(),r}function At(e,t){try{var n=e.h.createSession("persistent-license")}catch(t){var i=new fe(2,6,6005,t.message);return e.g(i),Promise.reject(i)}e.i.w(n,"message",e.Rd.bind(e)),e.i.w(n,"keystatuseschange",e.Pd.bind(e));var r={initData:null,loaded:!1,Yc:1/0,xa:null};return e.b.set(n,r),n.load(t).then(function(e){return this.f?Promise.reject():e?(r.loaded=!0,Rt(this)&&this.l.resolve(),n):(this.b.delete(n),void this.g(new fe(2,6,6013)))}.bind(e),function(e){this.f||(this.b.delete(n),this.g(new fe(2,6,6005,e.message)))}.bind(e))}function It(e,t,n){try{var i=e.D?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new fe(2,6,6005,t.message))}e.i.w(i,"message",e.Rd.bind(e)),e.i.w(i,"keystatuseschange",e.Pd.bind(e)),e.b.set(i,{initData:n,loaded:!1,Yc:1/0,xa:null});try{if(e.c.initDataTransform)n=e.c.initDataTransform(n);else if(e.keySystem().startsWith("com.apple.fps")){var r=e.a.serverCertificate;n=Ge(n,ze(n),r)}}catch(n){return t=n,n instanceof fe||(t=new fe(2,6,6016,n)),void e.g(t)}i.generateRequest(t,n.buffer).catch((function(t){if(!e.f){if(e.b.delete(i),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new fe(2,6,6006,t.message,t,n))}}))}function Ct(e,t){var n=t.target,i=e.b.get(n),r=e.a.licenseServerUri,a=e.c.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(r=_e([r],e.c.retryParameters)).body=t.message,r.method="POST",r.licenseRequestType=t.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=at(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].querySelector("name").textContent]=n[i].querySelector("value").textContent;e.body=dt(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(r),e.a.keySystem.startsWith("com.apple.fps")&&e.c.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+ht(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=st(t)}(r),e.C.rb.request(2,r).promise.then(function(e){return this.f?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.c.fairPlayTransform&&function(e){try{var t=rt(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=dt(t).buffer}(e),n.update(e.data).then(function(){var e=this;this.C.onEvent(new Ee("drmsessionupdate")),i&&(i.xa&&i.xa.resolve(),new le((function(){i.loaded=!0,Rt(e)&&e.l.resolve()})).O(_t))}.bind(this)))}.bind(e),function(e){this.f||(e=new fe(2,6,6007,e),this.g(e),i&&i.xa&&i.xa.reject(e))}.bind(e)).catch(function(e){this.f||(e=new fe(2,6,6008,e.message),this.g(e),i&&i.xa&&i.xa.reject(e))}.bind(e))}function Pt(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return f((function i(){var r,a,o;return D(i,(function(i){switch(i.j){case 1:return S(i,2),E(i,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return r=i.o,o=!!(a=r.getConfiguration().sessionTypes)&&a.includes("persistent-license"),tt("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),E(i,r.createMediaKeys(),5);case 5:A(i,0);break;case 2:I(i),n.set(e,null),k(i)}}))}))}(e)})),Promise.all(e).then((function(){return Ye(n)}))}function Mt(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!kt(e,$e(n.mimeType,n.codecs))||i&&i.encrypted&&!kt(e,$e(i.mimeType,i.codecs)))return!1;var r=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==r}))}function Nt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i];r=t[r];var o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function Rt(e){return We(e=e.b.values(),(function(e){return e.loaded}))}function Lt(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}F("shaka.util.Uint8ArrayUtils.toBase64",ht),F("shaka.util.Uint8ArrayUtils.fromBase64",dt),F("shaka.util.Uint8ArrayUtils.fromHex",ft),F("shaka.util.Uint8ArrayUtils.toHex",pt),F("shaka.util.Uint8ArrayUtils.equal",mt),F("shaka.util.Uint8ArrayUtils.concat",gt),(n=vt.prototype).destroy=function(){var e=this;return f((function t(){return D(t,(function(t){switch(t.j){case 1:return e.f?E(t,e.$,0):(e.f=!0,E(t,function(e){return f((function t(){var n;return D(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.l.reject(),e.W.stop(),e.W=null,e.M.stop(),e.M=null,n=Array.from(e.b.keys()),e.b.clear(),E(t,Promise.all(n.map((function(e){return Promise.resolve().then((function(){return f((function t(){return D(t,(function(t){switch(t.j){case 1:return S(t,2),E(t,function(e){return f((function t(){var n;return D(t,(function(t){switch(t.j){case 1:return n=new Promise((function(e){new le(e).O(Dt)})),E(t,Promise.race([e.close().then((function(){return!0})),n.then((function(){return!1}))]),2);case 2:k(t)}}))}))}(e),4);case 4:A(t,0);break;case 2:I(t),k(t)}}))}))}))}))),2);case 2:if(!e.m){t.A(3);break}return S(t,4),E(t,e.m.setMediaKeys(null),6);case 6:A(t,5);break;case 4:I(t);case 5:e.m=null;case 3:e.a=null,e.v.clear(),e.h=null,e.s=[],e.c=null,e.g=null,e.C=null,k(t)}}))}))}(e),4));case 4:e.$.resolve(),t.A(0)}}))}))},n.configure=function(e){this.c=e},n.Cb=function(e){var t=this;if(!this.h)return this.i.da(e,"encrypted",(function(){t.g(new fe(2,6,6010))})),Promise.resolve();this.m=e,this.i.da(this.m,"play",(function(){for(var e=0;e<t.G.length;e++)Ct(t,t.G[e]);t.ma=!0,t.G=[]})),e=(e=this.m.setMediaKeys(this.h)).catch((function(e){return Promise.reject(new fe(2,6,6003,e.message))}));var n=wt(this);return Promise.all([e,n]).then((function(){if(t.f)return Promise.reject();Tt(t),t.a.initData.length||t.s.length||t.i.w(t.m,"encrypted",(function(e){return Et(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.f)return Promise.reject(e)}))},n.keySystem=function(){return this.a?this.a.keySystem:""},n.dc=function(){for(var e=1/0,t=this.b.keys(),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Rd=function(e){this.c.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ma?this.G.push(e):Ct(this,e)},n.Pd=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,i){if("string"==typeof i){var r=i;i=e,e=r}if("com.microsoft.playready"==this.a.keySystem&&16==i.byteLength&&!tt("Tizen")){var a=(r=new DataView(i)).getUint32(0,!0),o=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,o,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),r=pt(new Uint8Array(i)),this.na.set(r,e)}.bind(this));var i=e.expiration-Date.now();(0>i||n&&1e3>i)&&t&&!t.xa&&(this.b.delete(e),e.close().catch((function(){}))),Rt(this)&&(this.l.resolve(),this.M.O(Ot))};var Dt=1,_t=5,Ot=.5;function Ut(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function jt(){}function Bt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Ht(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function Vt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}Ut.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Ut.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Ut.prototype.c=function(){this.a.resetCaptionStream()},jt.prototype.init=function(){},jt.prototype.b=function(){},jt.prototype.c=function(){};var qt={ye:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},yc:function(e,t){return e.concat(t)},ic:function(){},Ga:function(e){return null!=e}};function Kt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new $(e)}));return e.map((function(e){return new $(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(qt.yc,[]).map((function(e){return e.toString()}))}function zt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Gt={Na:"video",Ab:"audio",qa:"text",kg:"application"},Wt=1/15;function Xt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Yt(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported($t(n,t)):MediaSource.isTypeSupported($t("audio",t))||MediaSource.isTypeSupported($t("video",t)))}function $t(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function Jt(e,t,n){this.startTime=e,this.direction=rn,this.endTime=t,this.payload=n,this.region=new dn,this.position=null,this.positionAlign=Qt,this.size=100,this.textAlign=Zt,this.writingMode=an,this.lineInterpretation=on,this.line=null,this.lineHeight="",this.lineAlign=sn,this.displayAlign=tn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=cn,this.fontStyle=ln,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}Xt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Xt.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Xt.prototype.h=function(){var e={data:gt.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},F("shaka.text.Cue",Jt);var Qt="auto";Jt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qt};var Zt="center",en={LEFT:"left",RIGHT:"right",CENTER:Zt,START:"start",END:"end"};Jt.textAlign=en;var tn="after",nn={BEFORE:"before",CENTER:"center",AFTER:tn};Jt.displayAlign=nn;var rn="ltr";Jt.direction={HORIZONTAL_LEFT_TO_RIGHT:rn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var an="horizontal-tb";Jt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:an,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var on=0;Jt.lineInterpretation={LINE_NUMBER:on,PERCENTAGE:1};var sn="start",un={CENTER:"center",START:sn,END:"end"};Jt.lineAlign=un;var cn=400;Jt.fontWeight={NORMAL:cn,BOLD:700};var ln="normal",hn={NORMAL:ln,ITALIC:"italic",OBLIQUE:"oblique"};function dn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=fn,this.scroll=pn}Jt.fontStyle=hn,Jt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},F("shaka.text.CueRegion",dn);var fn=1;dn.units={PX:0,PERCENTAGE:fn,LINES:2};var pn="";function mn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}dn.scrollMode={NONE:pn,UP:"up"};var gn={};function vn(t){return!!(gn[t]||e.muxjs&&"application/cea-608"==t)}function yn(e,t){"application/cea-608"!=t&&(e.g=new gn[t])}function bn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=h(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=r,u.endTime+=r,u.startTime>=e.f&&u.startTime<e.h&&(u=new Jt(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.l&&e.c.append([u]))}for(a=(r=h(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),s=(t=h(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.i.get(a).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.h))}function wn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new Ve,this.v=!1,this.l={},this.m=t,e=this.s=new pe,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=Tn(t),this.h=t}F("shaka.text.TextEngine.registerParser",(function(e,t){gn[e]=t})),F("shaka.text.TextEngine.unregisterParser",(function(e){delete gn[e]})),mn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},mn.prototype.Mc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new fe(2,2,2009,e)}},mn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},mn.prototype.qe=function(e){this.c.append(e)},mn.prototype.appendCues=mn.prototype.qe,mn.prototype.rc=function(e,t){this.l=e;var n=this.i.get(e);if(n)for(var i=h(n.keys()),r=i.next();!r.done;r=i.next())(r=n.get(r.value))&&(r=r.filter((function(e){return e.endTime<=t})),this.c.append(r))},mn.prototype.setSelectedClosedCaptionId=mn.prototype.rc;var Tn=e.URL.createObjectURL;function En(e){var t=$e(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Qe.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return vn(t)||MediaSource.isTypeSupported(n)||Yt(t,e.type)}function kn(e,t){e.a||(e.a=new mn(e.g)),yn(e.a,t)}function Sn(e){return!e.h||"ended"==e.h.readyState}function xn(e,t){if("text"==t)var n=e.a.a;else n=!(n=In(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function An(e,t){return"text"==t?e.a.b:Bt(In(e,t))}function In(e,t){try{return e.b[t].buffered}catch(e){return null}}function Cn(t,n,i,r,a,o){return"text"==n?function(e,t,n,i){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==i)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:i};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(i,this.h)}}.bind(e))}(t.a,i,r,a):t.l[n]?function(e,t){e.f=!0,e.b=new pe,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new fe(2,3,3018)),e.b}(t.l[n],i).then(function(e){return this.a||kn(this,"text/vtt"),e.captions&&bn(this.a,e.captions,r,a,this.b.video.timestampOffset),Mn(this,n,this.ee.bind(this,n,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.a||kn(t,"text/vtt"),null==r&&null==a?t.m.init(i):t.m.b(i,(function(e){e.length&&bn(t.a,e,r,a,t.b.video.timestampOffset)}))),Mn(t,n,t.ee.bind(t,n,i)))}function Pn(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():Mn(e,t,e.fe.bind(e,t,0,e.h.duration))}function Mn(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new pe},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new fe(2,3,3017,t)):n.p.reject(new fe(2,3,3015,i)),Rn(e,t)}return n.p}function Nn(e,t){if(e.v)return Promise.reject();var n,i=[];for(n in e.b){var r=new pe,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[n].push(a),i.push(r),1==e.c[n].length&&a.start()}return Promise.all(i).then(function(){try{t()}catch(t){var e=Promise.reject(new fe(2,3,3015,t))}for(var n in this.b)Rn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Rn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(i){n.p.reject(new fe(2,3,3015,i)),Rn(e,t)}}function Ln(e,t){return e=_n(e),t=_n(t),e.split("-")[0]==t.split("-")[0]}function Dn(e,t){e=_n(e),t=_n(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function _n(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=jn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function On(e){return e.language?_n(e.language):e.audio&&e.audio.language?_n(e.audio.language):e.video&&e.video.language?_n(e.video.language):"und"}function Un(e,t){for(var n=_n(e),i=new Set,r=h(t),a=r.next();!a.done;a=r.next())i.add(_n(a.value));for(a=(r=h(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=h(i)).next();!a.done;a=r.next())if(Dn(a=a.value,n))return a;for(a=(r=h(i)).next();!a.done;a=r.next()){var o=a=a.value,s=n;if(o=_n(o),s=_n(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(i=h(i)).next();!a.done;a=i.next())if(Dn(n,r=a.value))return r;return null}(n=wn.prototype).destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var i=this.c[t],r=i[0];for(this.c[t]=i.slice(0,1),r&&n.push(r.p.catch(qt.ic)),r=1;r<i.length;++r)i[r].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[a].destroy());return Promise.all(n).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}}))},n.init=function(e,t){var n=this;return f((function i(){var r;return D(i,(function(i){switch(i.j){case 1:return r=Gt,E(i,n.s,2);case 2:e.forEach((function(e,i){var a=$e(e.mimeType,e.codecs);i==r.qa?kn(n,a):(!t&&MediaSource.isTypeSupported(a)||!Yt(a,i)||(n.l[i]=new Xt,a=$t(i,a)),a=n.h.addSourceBuffer(a),n.i.w(a,"error",n.Tf.bind(n,i)),n.i.w(a,"updateend",n.ub.bind(n,i)),n.b[i]=a,n.c[i]=[])})),k(i)}}))}))},n.Jc=function(e){if(e.total=Vt(this.f.buffered),e.audio=Vt(In(this,"audio")),e.video=Vt(In(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},n.rc=function(e){var t=An(this,"video")||0;this.a.rc(e,t)},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Mn(this,e,this.fe.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():Mn(this,e,this.Ce.bind(this,e))},n.endOfStream=function(e){return Nn(this,function(){Sn(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},n.wa=function(e){return Nn(this,function(){this.h.duration=e}.bind(this))},n.Y=function(){return this.h.duration},n.ee=function(e,t){this.b[e].appendBuffer(t)},n.fe=function(e,t,n){n<=t?this.ub(e):this.b[e].remove(t,n)},n.oe=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.ub(e)},n.Ce=function(e){this.f.currentTime-=.001,this.ub(e)},n.Sf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.ub(e)},n.Pf=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.ub(e)},n.Tf=function(e){this.c[e][0].p.reject(new fe(2,3,3014,this.f.error?this.f.error.code:0))},n.ub=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Rn(this,e))};var jn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Bn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&!(i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))&&i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))&&i(r.width*r.height,t.minPixels,t.maxPixels))||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Fn(e,t,n){var i=!1;return e.forEach((function(e){var r=e.allowedByApplication;e.allowedByApplication=Bn(e,t,n),r!=e.allowedByApplication&&(i=!0)})),i}function Hn(e,t,n,i){i.variants=i.variants.filter((function(i){if(e&&e.P&&!Mt(e,i))return!1;var r=i.audio;return i=i.video,!(r&&!En(r)||i&&!En(i)||r&&t&&!Vn(r,t)||i&&n&&!Vn(i,n))})),i.textStreams=i.textStreams.filter((function(e){return vn($e(e.mimeType,e.codecs))}))}function Vn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function qn(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Kn(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function zn(e){return e.__shaka_id||(e.__shaka_id=Gn++),e.__shaka_id}var Gn=0;function Wn(e){return{id:zn(e),active:!1,type:"",bandwidth:0,language:_n(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Xn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Yn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=h(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))}function $n(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=Un(_n(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return _n(e.language)==o})))}if(n){if((e=Jn(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(qt.yc,[])).length?Jn(i,e[0]):i}function Jn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Qn(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null}function Zn(){this.h=null,this.f=!1,this.b=new z,this.c=[],this.i=!1,this.a=this.g=null}function ei(e,t){return e&&(t=t.filter((function(t){return Bn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function ti(e,t){this.a=e,this.b=t}function ni(e,t){var n=new ti(2,6),i=ai,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function ii(e,t,n,i){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function ri(e,t,n,i){G([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}F("shaka.abr.SimpleAbrManager",Zn),Zn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Zn.prototype.stop=Zn.prototype.stop,Zn.prototype.init=function(e){this.h=e},Zn.prototype.init=Zn.prototype.init,Zn.prototype.chooseVariant=function(){var e=ei(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=[(e=ei(null,this.c))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=r.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(n=r)}return this.g=Date.now(),n},Zn.prototype.chooseVariant=Zn.prototype.chooseVariant,Zn.prototype.enable=function(){this.f=!0},Zn.prototype.enable=Zn.prototype.enable,Zn.prototype.disable=function(){this.f=!1},Zn.prototype.disable=Zn.prototype.disable,Zn.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,q(n.b,r,i),q(n.c,r,i)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Zn.prototype.segmentDownloaded=Zn.prototype.segmentDownloaded,Zn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Zn.prototype.getBandwidthEstimate=Zn.prototype.getBandwidthEstimate,Zn.prototype.setVariants=function(e){this.c=e},Zn.prototype.setVariants=Zn.prototype.setVariants,Zn.prototype.configure=function(e){this.a=e},Zn.prototype.configure=Zn.prototype.configure,ti.prototype.toString=function(){return"v"+this.a+"."+this.b};var ai=null,oi="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),si="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ui=["loop","playbackRate"],ci=["pause","play"],li="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),hi={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},di={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},fi=[["getConfiguration","configure"]],pi=[["isTextTrackVisible","setTextTrackVisibility"]],mi="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),gi=["attach","detach","load","unload"];function vi(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Ee){var n,i={};for(n in t){var r=t[n];r&&"object"==typeof r?"detail"==n&&(i[n]=r):n in Event||(i[n]=r)}return i}if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)i.start.push(t.start(n)),i.end.push(t.end(n));else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}}))}function yi(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t}))}function bi(e,t,n,i,r,a){this.T=e,this.f=new le(t),this.P=n,this.l=!1,this.G=i,this.M=r,this.C=a,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Nd.bind(this),this.s=this.kf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var wi=!1,Ti=null;function Ei(e){var t=Ti;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function ki(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new fe(1,7,7e3))}}function Si(e){e=vi(e),Ti.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),X)}function xi(e,t,n){var i=this;Se.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,(this.m=n)&&(this.a=new bi(n,(function(){return Ii(i)}),(function(){return Ci(i)}),(function(e,t){return Mi(i,e,t)}),(function(){return Pi(i)}),(function(){return Ai(i)}))),function(e){for(var t in e.a&&e.a.init(),e.i=new Ve,oi.forEach(function(e){this.i.w(this.c,e,this.ig.bind(this))}.bind(e)),li.forEach(function(e){this.i.w(this.b,e,this.yf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.hg.bind(e,t),set:e.jg.bind(e,t)});for(var n in e.l={},e.b)Object.defineProperty(e.l,n,{configurable:!1,enumerable:!0,get:e.Ud.bind(e,n)});e.f=new Se,e.f.Vb=e.h,e.g=new Se,e.g.Vb=e.l}(this)}function Ai(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.bc(),startTime:null};return e.c.pause(),ui.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),fi.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),pi.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function Ii(e){e.dispatchEvent(new Ee("caststatuschanged"))}function Ci(e){e.f.dispatchEvent(new Ee(e.h.paused?"pause":"play"))}function Pi(e){fi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),i=Promise.resolve(),r=e.c.autoplay,a=null;n||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,i=e.b.load(t,a));var o={};ui.forEach(function(e){o[e]=this.a.get("video",e)}.bind(e)),i.then((function(){e.c&&(ui.forEach(function(e){this.c[e]=o[e]}.bind(e)),pi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=r,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Ee("error",{detail:t}))}))}function Mi(e,t,n){e.a.ga()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Ni(e,t,n,i){var r=this;Se.call(this),this.a=e,this.b=t,this.c=new Ve,this.D={video:e,player:t},this.s=n||function(){},this.G=i||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.C=new le((function(){Li(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Qd.bind(e),t.onSenderDisconnected=e.Qd.bind(e),t.onSystemVolumeChanged=e.Be.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.ef.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.rf.bind(e),t.start(),oi.forEach(function(e){this.c.w(this.a,e,this.Wd.bind(this,"video"))}.bind(e)),li.forEach(function(e){this.c.w(this.b,e,this.Wd.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.kd(3840,2160):e.b.kd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,Ri(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,Ri(this)}.bind(e)),e.c.w(e.a,"pause",function(){Ri(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,Ri(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new le((function(){e.a&&e.a.ended&&(e.h=!0,Ri(e))})).O(5)}.bind(e))}(this)}function Ri(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Ee("caststatuschanged")),Di(this)||Ui(this,0))}.bind(e))}function Li(e){e.C.O(.5);var t={video:{},player:{}};if(si.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var n in di)0==e.g%di[n]&&(t.player[n]=e.b[n]());for(var i in hi)0==e.g%hi[i]&&(t.player[i]=e.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),Oi(e,{type:"update",update:t},e.f),Di(e)}function Di(e){return!(!e.l||!e.a.duration&&!e.b.V())&&(_i(e),e.l=!1,!0)}function _i(e){var t={contentId:e.b.bc(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Ui(e,0,t)}function Oi(e,t,n,i){e.v&&(e=vi(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ui(e,t,n){var i=e.a.playbackRate,r=ji;i={mediaSessionId:0,playbackRate:i,playerState:r=e.h?r.IDLE:e.b.Oc()?r.je:e.a.paused?r.le:r.me,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(i.media=n),Oi(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.i)}(n=bi.prototype).destroy=function(){return ki(this),Ti&&Ei(this),this.f&&(this.f.stop(),this.f=null),this.M=this.G=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.ga=function(){return this.b},n.cd=function(){return this.D},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.sc();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,this.Od.bind(this),this.pf.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),wi&&this.f.O(.02),(t=Ti)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Od(t):Ti=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.jd=function(e){this.i=e,this.b&&Si({type:"appData",appData:this.i})},n.cast=function(e){return this.h?wi?this.b?Promise.reject(new fe(1,8,8002)):(this.g=new pe,chrome.cast.requestSession(this.$c.bind(this,e),this.Md.bind(this)),this.g):Promise.reject(new fe(1,8,8001)):Promise.reject(new fe(1,8,8e3))},n.Eb=function(){this.b&&(ki(this),Ti&&(Ei(this),Ti.stop((function(){}),(function(){})),Ti=null))},n.get=function(e,t){if("video"==e){if(ci.includes(t))return this.Yd.bind(this,e,t)}else if("player"==e){if(di[t]&&!this.get("player","isLive")())return function(){};if(mi.includes(t))return this.Yd.bind(this,e,t);if(gi.includes(t))return this.Ef.bind(this,e,t);if(hi[t])return this.Vd.bind(this,e,t)}return this.Vd(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Si({type:"set",targetName:e,property:t,value:n})},n.$c=function(e,t){Ti=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Nd(),Si({type:"init",initState:e,appData:this.i}),this.g.resolve()},n.Md=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new fe(2,8,t,e))},n.Vd=function(e,t){return this.a[e][t]},n.Yd=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];Si({type:"call",targetName:e,methodName:t,args:i})},n.Ef=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new pe;var a=this.v.toString();return this.v++,this.c[a]=r,Si({type:"asyncCall",targetName:e,methodName:t,args:i,id:a}),r},n.Od=function(e){var t=this.C();this.g=new pe,this.l=!0,this.$c(t,e)},n.pf=function(e){wi="available"==e,this.f.sc()},n.Nd=function(){var e=!!Ti&&"connected"==Ti.status;if(this.b&&!e){for(var t in this.M(),this.a)this.a[t]={};ki(this)}this.D=(this.b=e)?Ti.receiver.friendlyName:"",this.f.sc()},n.kf=function(e,t){var n=yi(t);switch(n.type){case"event":var i=n.event;this.G(n.targetName,new Ee(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.l&&(this.P(),this.l=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new fe(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},H(xi,Se),F("shaka.cast.CastProxy",xi),xi.prototype.destroy=function(e){return e&&this.a&&this.a.Eb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},xi.prototype.destroy=xi.prototype.destroy,xi.prototype.Ye=function(){return this.h},xi.prototype.getVideo=xi.prototype.Ye,xi.prototype.Re=function(){return this.l},xi.prototype.getPlayer=xi.prototype.Re,xi.prototype.se=function(){return!!this.a&&(this.a.h&&wi)},xi.prototype.canCast=xi.prototype.se,xi.prototype.ga=function(){return!!this.a&&this.a.ga()},xi.prototype.isCasting=xi.prototype.ga,xi.prototype.cd=function(){return this.a?this.a.cd():""},xi.prototype.receiverName=xi.prototype.cd,xi.prototype.cast=function(){if(!this.a)throw new fe(1,8,8007);var e=Ai(this);return this.a.cast(e).then(function(){if(this.b)return this.b.rd()}.bind(this))},xi.prototype.cast=xi.prototype.cast,xi.prototype.jd=function(e){this.a&&this.a.jd(e)},xi.prototype.setAppData=xi.prototype.jd,xi.prototype.$f=function(){if(this.a){var e=this.a;if(e.b){var t=e.C();chrome.cast.requestSession(e.$c.bind(e,t),e.Md.bind(e))}}},xi.prototype.suggestDisconnect=xi.prototype.$f,xi.prototype.ve=function(e){var t=this;return f((function n(){return D(n,(function(n){switch(n.j){case 1:if(e==t.m)return n.return();if(t.m=e,!t.a){n.A(2);break}return t.a.Eb(),E(n,t.a.destroy(),3);case 3:t.a=null;case 2:t.a=new bi(e,(function(){return Ii(t)}),(function(){return Ci(t)}),(function(e,n){return Mi(t,e,n)}),(function(){return Pi(t)}),(function(){return Ai(t)})),t.a.init(),k(n)}}))}))},xi.prototype.changeReceiverId=xi.prototype.ve,xi.prototype.Eb=function(){this.a&&this.a.Eb()},xi.prototype.forceDisconnect=xi.prototype.Eb,(n=xi.prototype).hg=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a&&this.a.ga()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},n.jg=function(e,t){this.a&&this.a.ga()?this.a.set("video",e,t):this.c[e]=t},n.ig=function(e){this.a&&this.a.ga()||this.f.dispatchEvent(new Ee(e.type,e))},n.Ud=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==e)return this.b.Fb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==e||"drmInfo"==e)return function(){return W(e+"() does not work while casting!"),null};if("getManifestUri"==e)return ni("getManifestUri",'Please use "getAssetUri" instead.'),this.Ud("getAssetUri");if("attach"==e||"detach"==e)return function(){return W(e+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&hi[e]||!this.a||!this.a.ga()?this.b[e].bind(this.b):this.a.get("player",e)},n.yf=function(e){this.a&&this.a.ga()||this.g.dispatchEvent(e)},H(Ni,Se),F("shaka.cast.CastReceiver",Ni),Ni.prototype.isConnected=function(){return this.v},Ni.prototype.isConnected=Ni.prototype.isConnected,Ni.prototype.bf=function(){return this.h},Ni.prototype.isIdle=Ni.prototype.bf,Ni.prototype.destroy=function(){var e=this;return f((function t(){var n;return D(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.C&&(e.C.stop(),e.C=null),e.a=null,e.D=null,e.s=null,e.v=!1,e.h=!0,e.f=null,e.i=null,E(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),k(t)}}))}))},Ni.prototype.destroy=Ni.prototype.destroy,(n=Ni.prototype).Qd=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ri(this)},n.Wd=function(e,t){this.b&&(Li(this),Oi(this,{type:"event",targetName:e,event:t},this.f))},n.Be=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Oi(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Oi(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.rf=function(e){var t=yi(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,function(e,t,n){for(var i in t.player)e.b[i](t.player[i]);e.s(n),n=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var i in t.playerAfterLoad)e.b[i](t.playerAfterLoad[i]);e.a.autoplay=r,t.manifest&&(e.a.play(),Ui(e,0))}}),(function(t){e.b.dispatchEvent(new Ee("error",{detail:t}))}))}(this,t.initState,t.appData),Li(this);break;case"appData":this.s(t.appData);break;case"set":var n=t.targetName,i=t.property;if(t=t.value,"video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.D[n][i]=t;break;case"call":(n=this.D[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.m=!1),r=t.id,e=e.senderId;var a=this.D[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.be.bind(this,e,r,null),this.be.bind(this,e,r))}},n.ef=function(e){var t=yi(e.data);switch(t.type){case"PLAY":this.a.play(),Ui(this,0);break;case"PAUSE":this.a.pause(),Ui(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Ui(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ui(this,0));break;case"STOP":this.b.rd().then(function(){this.b&&Ui(this,0)}.bind(this));break;case"GET_STATUS":Ui(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Ui(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,n=t.currentTime,i=this.G(e.contentId),r=t.autoplay||!0,this.s(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,n).then(function(){this.b&&_i(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Oi(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:Oi(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.be=function(e,t,n){this.b&&Oi(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var ji={IDLE:"IDLE",me:"PLAYING",je:"BUFFERING",le:"PAUSED"};function Bi(e,t){this.K=e,this.b=t==Fi,this.a=0}F("shaka.util.DataViewReader",Bi);var Fi=1;function Hi(){throw new fe(2,3,3e3)}function Vi(){this.c=[],this.b=[],this.a=!1}function qi(e){for(;e.reader.sa()&&!e.parser.a;)e.parser.mc(e.start,e.reader,e.partialOkay)}function Ki(e){for(var t=e.reader.F();0<t&&!e.parser.a;--t)e.parser.mc(e.start,e.reader,e.partialOkay)}function zi(e){return function(t){e(t.reader.Xa(t.reader.K.byteLength-t.reader.ba()))}}function Gi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Wi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Xi(e){this.f=[],this.b=[],this.a=[],(new Vi).fa("pssh",this.c.bind(this)).parse(e.buffer)}Bi.Endianness={lg:0,mg:Fi},Bi.prototype.sa=function(){return this.a<this.K.byteLength},Bi.prototype.hasMoreData=Bi.prototype.sa,Bi.prototype.ba=function(){return this.a},Bi.prototype.getPosition=Bi.prototype.ba,Bi.prototype.Ie=function(){return this.K.byteLength},Bi.prototype.getLength=Bi.prototype.Ie,Bi.prototype.ka=function(){try{var e=this.K.getUint8(this.a);return this.a+=1,e}catch(e){Hi()}},Bi.prototype.readUint8=Bi.prototype.ka,Bi.prototype.Mb=function(){try{var e=this.K.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Hi()}},Bi.prototype.readUint16=Bi.prototype.Mb,Bi.prototype.F=function(){try{var e=this.K.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Hi()}},Bi.prototype.readUint32=Bi.prototype.F,Bi.prototype.Xd=function(){try{var e=this.K.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Hi()}},Bi.prototype.readInt32=Bi.prototype.Xd,Bi.prototype.yb=function(){try{if(this.b)var e=this.K.getUint32(this.a,!0),t=this.K.getUint32(this.a+4,!0);else t=this.K.getUint32(this.a,!1),e=this.K.getUint32(this.a+4,!1)}catch(e){Hi()}if(2097151<t)throw new fe(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Bi.prototype.readUint64=Bi.prototype.yb,Bi.prototype.Xa=function(e){this.a+e>this.K.byteLength&&Hi();var t=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},Bi.prototype.readBytes=Bi.prototype.Xa,Bi.prototype.L=function(e){this.a+e>this.K.byteLength&&Hi(),this.a+=e},Bi.prototype.skip=Bi.prototype.L,Bi.prototype.$d=function(e){this.a<e&&Hi(),this.a-=e},Bi.prototype.rewind=Bi.prototype.$d,Bi.prototype.seek=function(e){(0>e||e>this.K.byteLength)&&Hi(),this.a=e},Bi.prototype.seek=Bi.prototype.seek,Bi.prototype.bd=function(){for(var e=this.a;this.sa()&&0!=this.K.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.K.buffer,this.K.byteOffset+e,this.a-e),this.a+=1,rt(e)},Bi.prototype.readTerminatedString=Bi.prototype.bd,F("shaka.util.Mp4Parser",Vi),Vi.prototype.H=function(e,t){var n=Gi(e);return this.c[n]=0,this.b[n]=t,this},Vi.prototype.box=Vi.prototype.H,Vi.prototype.fa=function(e,t){var n=Gi(e);return this.c[n]=1,this.b[n]=t,this},Vi.prototype.fullBox=Vi.prototype.fa,Vi.prototype.stop=function(){this.a=!0},Vi.prototype.stop=Vi.prototype.stop,Vi.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Bi(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.sa()&&!this.a;)this.mc(0,n,t)},Vi.prototype.parse=Vi.prototype.parse,Vi.prototype.mc=function(e,t,n){var i=t.ba(),r=t.F(),a=t.F();switch(r){case 0:r=t.K.byteLength-i;break;case 1:r=t.yb()}var o=this.b[a];if(o){var s=null,u=null;1==this.c[a]&&(s=(u=t.F())>>>24,u&=16777215),a=i+r,n&&a>t.K.byteLength&&(a=t.K.byteLength),a-=t.ba(),t=0<a?t.Xa(a):new Uint8Array(0),o({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t=new Bi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e})}else t.L(Math.min(i+r-t.ba(),t.K.byteLength-t.ba()))},Vi.prototype.parseNext=Vi.prototype.mc,Vi.children=qi,Vi.sampleDescription=Ki,Vi.allData=zi,Vi.typeToString=Wi,Xi.prototype.c=function(e){if(!(1<e.version)){var t=pt(e.reader.Xa(16)),n=[];if(0<e.version)for(var i=e.reader.F(),r=0;r<i;++r){var a=pt(e.reader.Xa(16));n.push(a)}i=e.reader.F(),e.reader.L(i),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}};var Yi={ac:function(e,t){var n=Yi.R(e,t);return 1!=n.length?null:n[0]},Gc:function(e,t,n){return 1!=(e=Yi.zd(e,t,n)).length?null:e[0]},R:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},zd:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},cc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},J:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},vf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ba:function(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null},oc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},nc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},vb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ae:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Td:function(e,t){var n=new DOMParser;try{var i=n.parseFromString(e,"text/xml")}catch(e){}if(i&&i.documentElement.tagName==t)var r=i.documentElement;return r&&0<r.getElementsByTagName("parsererror").length?null:r},Sd:function(e,t){try{var n=rt(e);return Yi.Td(n,t)}catch(e){}}},$i=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Ji(e,t,n){var i=function(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())(n=er(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new fe(2,4,4010);if(n||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.ae||(r=e.init||r,!1)}))).length&&(0==(e=function(e,t,n){for(var i=[],r=(n=h(n)).next();!r.done;r=n.next()){r=r.value;var a=$i.get(r.ae);if(a){var o;if(o=Yi.Gc(r.node,"urn:microsoft:playready","pro")){o=dt(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=o.length,c=s.length+16+u,l=new ArrayBuffer(c),d=new Uint8Array(l);l=new DataView(l);var f=0;l.setUint32(f,c),f+=4,l.setUint32(f,1886614376),f+=4,l.setUint32(f,0),f+=4,d.set(s,f),f+=s.length,l.setUint32(f,u),f+=4,d.set(o,f),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=zt(a,r.init||e||o),(a=Zi.get(a))&&(o.licenseServerUri=a(r)),i.push(o)}else for(r=h(r=t(r.node)||[]),a=r.next();!a.done;a=r.next())i.push(a.value)}return i}(r,t,a)).length&&(e=[zt("",r)])),i.length&&(n||!a.length))for(e=[],n=(t=h($i.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(zt(n,r));if(o=Array.from(o)[0]||null)for(n=(t=h(e)).next();!n.done;n=t.next())for(i=(n=h(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{wd:o,pg:r,drmInfos:e,Ad:!0}}var Qi,Zi=(new Map).set("com.widevine.alpha",(function(e){return(e=Yi.Gc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Yi.Gc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=dt(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=at(e.value,!0),(e=Yi.Td(e,"WRMHEADER"))?function(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}(e):""):""}));function er(e){var t=e.getAttribute("schemeIdUri"),n=Yi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=Yi.zd(e,"urn:mpeg:cenc:2013","pssh").map(Yi.cc);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new fe(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:dt(e),keyId:null}}))}catch(e){throw new fe(2,4,4007)}return{node:e,ae:t,keyId:n,init:0<r.length?r:null}}function tr(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function nr(e,t){var n=ir(e,t,"timescale"),i=1;n&&(i=Yi.nc(n)||1),n=ir(e,t,"duration"),(n=Yi.nc(n||""))&&(n/=i);var r=ir(e,t,"startNumber"),a=Number(ir(e,t,"presentationTimeOffset"))||0,o=Yi.vb(r||"");null!=r&&null!=o||(o=1);var s=rr(e,t,"SegmentTimeline");if(r=null,s){r=i;var u=e.S.duration||1/0;s=Yi.R(s,"S");for(var c=[],l=0,h=0;h<s.length;++h){var d=s[h],f=Yi.J(d,"t",Yi.vb),p=Yi.J(d,"d",Yi.vb);if(d=Yi.J(d,"r",Yi.parseInt),null!=f&&(f-=a),!p)break;if(f=null!=f?f:l,0>(d=d||0))if(h+1<s.length){if(null==(d=Yi.J(s[h+1],"t",Yi.vb)))break;if(f>=d)break;d=Math.ceil((d-f)/p)-1}else{if(1/0==u)break;if(f/r>=u)break;d=Math.ceil((u*r-f)/p)-1}0<c.length&&f!=l&&(c[c.length-1].end=f/r);for(var m=0;m<=d;++m)l=f+p,c.push({start:f/r,end:l/r,eg:f}),f=l}r=c}return{timescale:i,Z:n,Za:o,la:a/i||0,sd:a,N:r}}function ir(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(qt.Ga).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function rr(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(qt.Ga).map((function(e){return Yi.ac(e,n)})).reduce((function(e,t){return e||t}))}function ar(e,t,n,i,r,a){if(a=void 0===a?0:a,Yi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=Yi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Yi.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var c=e.attributes[u];"http://www.w3.org/1999/xlink"==c.namespaceURI&&(e.removeAttributeNS(c.namespaceURI,c.localName),--u)}if(5<=a)return ge(new fe(2,4,4028));if("onLoad"!=s)return ge(new fe(2,4,4027));var l=Kt([i],[o]);return r.request(0,_e(l,t)).U((function(i){if(!(i=Yi.Sd(i.data,e.tagName)))return ge(new fe(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=0;s<i.attributes.length;s++){var u=i.attributes[s].nodeName,c=i.getAttribute(u);e.setAttribute(u,c)}return ar(e,t,n,l[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return ar(e,t,n,i,r,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Yi.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(ar(u,t,n,i,r,a)))}return we(o).U((function(){return e}))}function or(e,t,n){this.c=e,this.b=t,this.a=n}function sr(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function ur(e,t,n,i){var r,a=(new Vi).fa("sidx",(function(e){r=function(e,t,n,i){var r=[];i.reader.L(4);var a=i.reader.F();if(0==a)throw new fe(2,3,3005);if(0==i.version)var o=i.reader.F(),s=i.reader.F();else o=i.reader.yb(),s=i.reader.yb();i.reader.L(2);var u=i.reader.Mb();for(e=e+i.size+s,s=0;s<u;s++){var c=i.reader.F(),l=(2147483648&c)>>>31;c&=2147483647;var h=i.reader.F();if(i.reader.L(4),1==l)throw new fe(2,3,3006);r.push(new sr(r.length,o/a-t,(o+h)/a-t,(function(){return n}),e,e+c-1)),o+=h,e+=c}return i.parser.stop(),r}(t,i,n,e)}));if(e&&a.parse(e),r)return r;throw new fe(2,3,3004)}function cr(e){this.a=e}function lr(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new sr(n.position,n.startTime,t,n.c,n.b,n.a)}}function hr(e){this.b=e,this.a=new Bi(e,0),Qi||(Qi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function dr(e){var t=fr(e);if(7<t.length)throw new fe(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=fr(e);e:{for(i=0;i<Qi.length;i++)if(mt(n,Qi[i])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.ba();else{if(8==n.length&&224&n[1])throw new fe(2,3,3001);i=n[0]&(1<<8-n.length)-1;for(var r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.ba()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ba(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.ba(),n),e.a.L(n),new pr(t,i)}function fr(e){var t,n=e.a.ka();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new fe(2,3,3002);var i=new Uint8Array(t);for(i[0]=n,n=1;n<t;n++)i[n]=e.a.ka();return i}function pr(e,t){this.id=e,this.a=t}function mr(e){if(8<e.a.byteLength)throw new fe(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new fe(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){t=256*t+e.a.getUint8(n)}return t}function gr(){}function vr(e){var t=new hr(e.a);if(179!=(e=dr(t)).id)throw new fe(2,3,3013);if(e=mr(e),183!=(t=dr(t)).id)throw new fe(2,3,3012);t=new hr(t.a);for(var n=0;t.sa();){var i=dr(t);if(241==i.id){n=mr(i);break}}return{fg:e,Df:n}}function yr(e,t){var n=rr(e,t,"Initialization");if(!n)return null;var i=e.B.oa,r=n.getAttribute("sourceURL");r&&(i=Kt(e.B.oa,[r])),r=0;var a=null;return(n=Yi.J(n,"range",Yi.oc))&&(r=n.start,a=n.end),new or((function(){return i}),r,a)}function br(e,t,n,i,r,a,o,s){var u=e.presentationTimeline,c=!e.kb||!e.S.Qc,l=e.S.start,h=e.S.duration,d=t,f=null;return{createSegmentIndex:function(){var e=[d(i,r,a),"webm"==o?d(n.c(),n.b,n.a):null];return d=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?ur(t,r,i,s):(new gr).parse(t,e,i,s),u.sb(t,l),f=new cr(t),c&&lr(f,h)}))},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function wr(e){return e.Ob}function Tr(e,t){var n=yr(e,Er),i=function(e){return[e.B.Ja,e.ca.Ja,e.ja.Ja].filter(qt.Ga).map((function(e){return Yi.R(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0),{cf:t.getAttribute("media"),start:(t=Yi.J(t,"mediaRange",Yi.oc,{start:0,end:null})).start,end:t.end}}))}(e),r=nr(e,Er),a=r.Za;0==a&&(a=1);var o=0;if(r.Z?o=r.Z*(a-1):r.N&&0<r.N.length&&(o=r.N[0].start),!(i={Z:r.Z,startTime:o,Za:a,la:r.la,N:r.N,qb:i}).Z&&!i.N&&1<i.qb.length)throw new fe(2,4,4002);if(!i.Z&&!e.S.duration&&!i.N&&1==i.qb.length)throw new fe(2,4,4002);if(i.N&&0==i.N.length)throw new fe(2,4,4002);return a=r=null,e.ja.id&&e.B.id&&(r=t[a=e.ja.id+","+e.B.id]),o=function(e,t,n,i){var r=i.qb.length;i.N&&i.N.length!=i.qb.length&&(r=Math.min(i.N.length,i.qb.length));for(var a=[],o=i.startTime,s=0;s<r;s++){var u,c=i.qb[s],l=Kt(n,[c.cf]);u=null!=i.Z?o+i.Z:i.N?i.N[s].end:o+e,a.push(new sr(s+t,o,u,function(e){return e}.bind(null,l),c.start,c.end)),o=u}return a}(e.S.duration,i.Za,e.B.oa,i),r?(r.Tc(o),a=e.presentationTimeline.Hb(),r.Dc(a-e.S.start)):(e.presentationTimeline.sb(o,e.S.start),r=new cr(o),a&&e.kb&&(t[a]=r)),e.kb&&e.S.Qc||lr(r,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,la:i.la}}function Er(e){return e.Ja}function kr(e,t,n,i){var r=function(e){var t=ir(e,Sr,"initialization");if(!t)return null;var n=e.B.id,i=e.bandwidth||null,r=e.B.oa;return new or((function(){var e=tr(t,n,null,i,null);return Kt(r,[e])}),0,null)}(e),a=nr(e,Sr),o=ir(e,Sr,"media"),s=ir(e,Sr,"index");if(o=(a={Z:a.Z,timescale:a.timescale,Za:a.Za,la:a.la,sd:a.sd,N:a.N,Sc:o,Jb:s}).Jb?1:0,o+=a.N?1:0,0==(o+=a.Z?1:0))throw new fe(2,4,4002);if(1!=o&&(a.Jb&&(a.N=null),a.Z=null),!a.Jb&&!a.Sc)throw new fe(2,4,4002);if(a.Jb){if("mp4"!=(n=e.B.mimeType.split("/")[1])&&"webm"!=n)throw new fe(2,4,4006);if("webm"==n&&!r)throw new fe(2,4,4005);i=tr(a.Jb,e.B.id,null,e.bandwidth||null,null),e=br(e,t,r,i=Kt(e.B.oa,[i]),0,null,n,a.la)}else a.Z?(i||(e.presentationTimeline.Vc(a.Z),e.presentationTimeline.Wc(e.S.start)),e=function(e,t){var n=e.S.duration,i=t.Z,r=t.Za,a=t.timescale,o=t.Sc,s=e.bandwidth||null,u=e.B.id,c=e.B.oa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/i)},getSegmentReference:function(e){var t=e*i,l=t+i;return n&&(l=Math.min(l,n)),0>l||n&&t>=n?null:new sr(e,t,l,(function(){var n=tr(o,u,e+r,s,t*a);return Kt(c,[n])}),0,null)}}}(e,a)):(o=t=null,e.ja.id&&e.B.id&&(t=n[o=e.ja.id+","+e.B.id]),s=function(e,t){for(var n=[],i=0;i<t.N.length;i++){var r=i+t.Za;n.push(new sr(r,t.N[i].start,t.N[i].end,function(e,t,n,i,r,a){return Kt(i,[e=tr(e,t,r,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.Sc,e.B.id,e.bandwidth||null,e.B.oa,r,t.N[i].eg+t.sd),0,null))}return n}(e,a),i=!e.kb||!e.S.Qc,t?(i&&lr(new cr(s),e.S.duration),t.Tc(s),n=e.presentationTimeline.Hb(),t.Dc(n-e.S.start)):(e.presentationTimeline.sb(s,e.S.start),t=new cr(s),o&&e.kb&&(n[o]=t)),i&&lr(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,la:a.la}}function Sr(e){return e.Qb}F("shaka.media.InitSegmentReference",or),or.prototype.Ac=function(){return this.c()},or.prototype.createUris=or.prototype.Ac,or.prototype.Lc=function(){return this.b},or.prototype.getStartByte=or.prototype.Lc,or.prototype.Kc=function(){return this.a},or.prototype.getEndByte=or.prototype.Kc,F("shaka.media.SegmentReference",sr),sr.prototype.ba=function(){return this.position},sr.prototype.getPosition=sr.prototype.ba,sr.prototype.Mc=function(){return this.startTime},sr.prototype.getStartTime=sr.prototype.Mc,sr.prototype.Ge=function(){return this.endTime},sr.prototype.getEndTime=sr.prototype.Ge,sr.prototype.Ac=function(){return this.c()},sr.prototype.createUris=sr.prototype.Ac,sr.prototype.Lc=function(){return this.b},sr.prototype.getStartByte=sr.prototype.Lc,sr.prototype.Kc=function(){return this.a},sr.prototype.getEndByte=sr.prototype.Kc,F("shaka.media.SegmentIndex",cr),cr.prototype.destroy=function(){return this.a=null,Promise.resolve()},cr.prototype.destroy=cr.prototype.destroy,cr.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},cr.prototype.find=cr.prototype.find,cr.prototype.get=function(e){return 0==this.a.length?null:0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},cr.prototype.get=cr.prototype.get,cr.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},cr.prototype.offset=cr.prototype.offset,cr.prototype.Tc=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n&&t.push(a):(.1<Math.abs(r.endTime-a.endTime)?t.push(new sr(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new sr(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},cr.prototype.merge=cr.prototype.Tc,cr.prototype.Dc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},cr.prototype.evict=cr.prototype.Dc,hr.prototype.sa=function(){return this.a.sa()},gr.prototype.parse=function(e,t,n,i){var r;if(440786851!=dr(t=new hr(new DataView(t))).id)throw new fe(2,3,3008);var a=dr(t);if(408125543!=a.id)throw new fe(2,3,3009);for(t=a.a.byteOffset,a=new hr(a.a),r=null;a.sa();){var o=dr(a);if(357149030==o.id){r=o;break}}if(!r)throw new fe(2,3,3010);for(a=new hr(r.a),r=1e6,o=null;a.sa();){var s=dr(a);if(2807729==s.id)r=mr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new fe(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new fe(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=dr(new hr(new DataView(e)))).id)throw new fe(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new hr(e.a);for(var u=null,c=null;e.sa();){var l=dr(e);if(187==l.id){var h=vr(l);h&&(l=n*h.fg,h=t+h.Df,null!=u&&s.push(new sr(s.length,u-a,l-a,o,c,h-1)),u=l,c=h)}}return null!=u&&s.push(new sr(s.length,u-a,i-a,o,c,null)),s}(e,t,a,r,n,i)};var xr={wb:{},Lb:{},ed:function(e,t){xr.Lb[e]=t}};function Ar(e,t,n){this.f=e,this.pc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function Ir(e,t,n,i){return e=_e(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Cr(){var e=this;this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new V(5),this.i=new le((function(){!function(e){f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return n=0,S(t,2),E(t,Pr(e),4);case 4:n=t.o,A(t,3);break;case 2:i=I(t),e.a&&(i.severity=1,e.a.onError(i));case 3:if(!e.a)return t.return();Lr(e,n),k(t)}}))}))}(e)})),this.g=new Pe}function Pr(e){var t=Date.now(),n=e.a.networkingEngine.request(0,_e(e.f,e.b.retryParameters));return Me(e.g,n),n.promise.then((function(t){if(e.a)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=Yi.Sd(t,"MPD")))throw new fe(2,4,4001,n);return t=ar(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,n,e.a.networkingEngine),Me(e.g,t),t.promise.then((function(t){return function(e,t,n){return f((function i(){var r,a,o,s,u,c,l,h,d,f,p,m,g,v,y,b,w,T,S,x,A,I,C;return D(i,(function(i){switch(i.j){case 1:s=qt,c=[n],0<(l=(u=Yi).R(t,"Location").map(u.cc).filter(s.Ga)).length&&(h=Kt(c,l),c=e.f=h),d=u.R(t,"BaseURL").map(u.cc),f=Kt(c,d),p=e.b.dash.ignoreMinBufferTime,m=0,p||(m=u.J(t,"minBufferTime",u.Ba)),e.s=u.J(t,"minimumUpdatePeriod",u.Ba,-1),g=u.J(t,"availabilityStartTime",u.vf),v=u.J(t,"timeShiftBufferDepth",u.Ba),y=u.J(t,"suggestedPresentationDelay",u.Ba),b=u.J(t,"maxSegmentDuration",u.Ba),w=t.getAttribute("type")||"static",e.c?T=e.c.presentationTimeline:(S=Math.max(e.b.dash.defaultPresentationDelay,1.5*m),T=new Ar(g,null!=y?y:S,e.b.dash.autoCorrectDrift));for(var P={kb:"static"!=w,presentationTimeline:T,ja:null,S:null,ca:null,B:null,bandwidth:0,Fd:!1},M=f,N=Yi.J(t,"mediaPresentationDuration",Yi.Ba),R=[],L=0,D=Yi.R(t,"Period"),_=0;_<D.length;_++){var O=D[_];L=Yi.J(O,"start",Yi.Ba,L);var U=Yi.J(O,"duration",Yi.Ba),j=null;if(_!=D.length-1){var B=Yi.J(D[_+1],"start",Yi.Ba);null!=B&&(j=B-L)}else null!=N&&(j=N-L);if(null==j&&(j=U),O=Mr(e,P,M,{start:L,duration:j,node:O,Qc:null==j||_==D.length-1}),R.push(O),U=P.ja.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.a.filterNewPeriod(O),e.c.periods.push(O))),null==j){L=null;break}L+=j}if(null==e.c&&e.a.filterAllPeriods(R),null!=N?(r=R,a=N,o=!1):(r=R,a=L,o=!0),x=a,A=r,T.Rb("static"==w),"static"!=w&&o||T.wa(x||1/0),T.V()&&!isNaN(e.b.availabilityWindowOverride)&&(v=e.b.availabilityWindowOverride),null==v&&(v=1/0),T.md(v),T.Vc(b||1),e.c){i.A(0);break}if(e.c={presentationTimeline:T,periods:A,offlineSessionIds:[],minBufferTime:m||0},!T.he()){i.A(0);break}return I=u.R(t,"UTCTiming"),E(i,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var i=e.b.dash.clockSyncUri;return!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),qt.ye(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return _r(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return _r(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return W("NTP UTCTiming scheme is not supported"),Promise.reject();default:return W("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,f,I),4);case 4:if(C=i.o,!e.a)return i.return();T.ce(C),k(i)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return q(e.v,1,n),n}))}function Mr(e,t,n,i){if(t.ja=Dr(i.node,null,n),t.S=i,t.ja.id||(t.ja.id="__shaka_period_"+i.start),Yi.R(i.node,"EventStream").forEach(e.wf.bind(e,i.start,i.duration)),n=Yi.R(i.node,"AdaptationSet").map(e.uf.bind(e,t)).filter(qt.Ga),t.kb){t=[];for(var r=h(n),a=r.next();!a.done;a=r.next())for(var o=(a=h(a.value.Gf)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new fe(2,4,4018)}var s=n.filter((function(e){return!e.qd}));if(n.filter((function(e){return e.qd})).forEach((function(e){var t=e.streams[0],n=e.qd;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Nr(s,"video"),r=Nr(s,"audio"),!t.length&&!r.length)throw new fe(2,4,4004);for(r.length||(r=[null]),t.length||(t=[null]),n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)Rr(e,r[a],t[o],n);for(e=Nr(s,"text"),t=[],r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}function Nr(e,t){return e.filter((function(e){return e.contentType==t}))}function Rr(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Nt(r,a).length){a=Nt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.h++,language:t.language,primary:t.Rc||n.Rc,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.h++,language:a.language||"und",primary:a.Rc,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function Lr(e,t){0>e.s||e.i.O(Math.max(3,e.s-t,K(e.v)))}function Dr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Xc:null},n=n||t.oa;var i=Yi.vb,r=Yi.Ae,a=Yi.R(e,"BaseURL").map(Yi.cc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;r=Yi.J(e,"frameRate",r)||t.frameRate;for(var c=Yi.R(e,"InbandEventStream"),l=t.emsgSchemeIdUris.slice(),d=(c=h(c)).next();!d.done;d=c.next())d=d.value.getAttribute("schemeIdUri"),l.includes(d)||l.push(d);return c=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(i=parseInt(n,10)))continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(i=parseInt(n,16)){for(e=0;i;)1&i&&++e,i>>=1;return e}}}return null}(c=Yi.R(e,"AudioChannelConfiguration"))||t.Xc,o||(o=Or(s,u)),{oa:Kt(n,a),Ob:Yi.ac(e,"SegmentBase")||t.Ob,Ja:Yi.ac(e,"SegmentList")||t.Ja,Qb:Yi.ac(e,"SegmentTemplate")||t.Qb,width:Yi.J(e,"width",i)||t.width,height:Yi.J(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:r,emsgSchemeIdUris:l,id:e.getAttribute("id"),Xc:c}}function _r(e,t,n,i){return(t=_e(t=Kt(t,[n]),e.b.retryParameters)).method=i,t=e.a.networkingEngine.request(4,t),Me(e.g,t),t.promise.then((function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=rt(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Or(e,t){return vn($e(e,t))?"text":e.split("/")[0]}function Ur(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function jr(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Br(e,t){this.name=e,this.value=t}function Fr(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Hr(e,t){this.b=t,this.a=e}F("shaka.media.ManifestParser.registerParserByExtension",xr.ed),xr.Nb=function(e,t){xr.wb[e]=t},F("shaka.media.ManifestParser.registerParserByMime",xr.Nb),xr.Af=function(){var e={};if(Ze()){for(var t in xr.wb)e[t]=!0;for(var n in xr.Lb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=h(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())e[i=i.value]=Ze()?!!xr.wb[i]:et(i);for(var r in t)e[r]=Ze()?!!xr.Lb[r]:et(t[r]);return e},xr.create=function(e,t,n,i){return f((function r(){var a,o;return D(r,(function(r){switch(r.j){case 1:return S(r,2),E(r,xr.He(e,t,n,i),4);case 4:return a=r.o,r.return(new a);case 2:throw(o=I(r)).severity=2,o}}))}))},xr.He=function(e,t,n,i){return f((function r(){var a,o,s,u,c;return D(r,(function(r){switch(r.j){case 1:if(a=xr,i&&(o=a.wb[i.toLowerCase()]))return r.return(o);if((s=a.getExtension(e))&&(u=a.Lb[s]))return r.return(u);if(i){r.A(2);break}return E(r,a.Oe(e,t,n),3);case 3:if((i=r.o)&&(c=xr.wb[i]))return r.return(c);case 2:throw new fe(2,4,4e3,e)}}))}))},xr.Oe=function(e,t,n){return f((function i(){var r,a,o;return D(i,(function(i){switch(i.j){case 1:return(r=_e([e],n)).method="HEAD",E(i,t.request(0,r).promise,2);case 2:return a=i.o,o=a.headers["content-type"],i.return(o?o.toLowerCase():"")}}))}))},xr.getExtension=function(e){return 1==(e=new $(e).ia.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},xr.isSupported=function(e,t){return!!Ze()&&(t in xr.wb||xr.getExtension(e)in xr.Lb)},F("shaka.media.PresentationTimeline",Ar),Ar.prototype.Y=function(){return this.g},Ar.prototype.getDuration=Ar.prototype.Y,Ar.prototype.wa=function(e){this.g=e},Ar.prototype.setDuration=Ar.prototype.wa,Ar.prototype.Te=function(){return this.f},Ar.prototype.getPresentationStartTime=Ar.prototype.Te,Ar.prototype.ce=function(e){this.l=e},Ar.prototype.setClockOffset=Ar.prototype.ce,Ar.prototype.Rb=function(e){this.m=e},Ar.prototype.setStatic=Ar.prototype.Rb,Ar.prototype.md=function(e){this.h=e},Ar.prototype.setSegmentAvailabilityDuration=Ar.prototype.md,Ar.prototype.Qf=function(e){this.pc=e},Ar.prototype.setDelay=Ar.prototype.Qf,Ar.prototype.Fe=function(){return this.pc},Ar.prototype.getDelay=Ar.prototype.Fe,Ar.prototype.sb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.Wc(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},Ar.prototype.notifySegments=Ar.prototype.sb,Ar.prototype.Wc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Ar.prototype.notifyMinSegmentStartTime=Ar.prototype.Wc,Ar.prototype.Vc=function(e){this.a=Math.max(this.a,e)},Ar.prototype.notifyMaxSegmentDuration=Ar.prototype.Vc,Ar.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Ar.prototype.offset=Ar.prototype.offset,Ar.prototype.V=function(){return 1/0==this.g&&!this.m},Ar.prototype.isLive=Ar.prototype.V,Ar.prototype.Va=function(){return 1/0!=this.g&&!this.m},Ar.prototype.isInProgress=Ar.prototype.Va,Ar.prototype.Hb=function(){if(1/0==this.h)return this.i;var e=this.nb()-this.h;return Math.max(this.i,e)},Ar.prototype.getSegmentAvailabilityStart=Ar.prototype.Hb,Ar.prototype.de=function(e){this.i=e},Ar.prototype.setUserSeekStart=Ar.prototype.de,Ar.prototype.nb=function(){return this.V()||this.Va()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},Ar.prototype.getSegmentAvailabilityEnd=Ar.prototype.nb,Ar.prototype.Gb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.nb()-this.h;return e=Math.min(n+e,this.za()),Math.max(t,e)},Ar.prototype.getSafeSeekRangeStart=Ar.prototype.Gb,Ar.prototype.mb=function(){return this.Gb(0)},Ar.prototype.getSeekRangeStart=Ar.prototype.mb,Ar.prototype.za=function(){var e=this.V()||this.Va()?this.pc:0;return Math.max(0,this.nb()-e)},Ar.prototype.getSeekRangeEnd=Ar.prototype.za,Ar.prototype.he=function(){return null!=this.f&&null==this.b},Ar.prototype.usingPresentationStartTime=Ar.prototype.he,F("shaka.dash.DashParser",Cr),(n=Cr.prototype).configure=function(e){this.b=e},n.start=function(e,t){var n=this;return f((function i(){var r;return D(i,(function(i){switch(i.j){case 1:return n.f=[e],n.a=t,E(i,Pr(n),2);case 2:if(r=i.o,n.a&&Lr(n,r),!n.a)throw new fe(2,7,7001);return i.return(n.c)}}))}))},n.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){Pr(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.uf=function(e,t){e.ca=Dr(t,e.ja,null);var n=!1,i=Yi.R(t,"Role"),r=i.map((function(e){return e.getAttribute("value")})).filter(qt.Ga),a=void 0,o="text"==e.ca.contentType;o&&(a="subtitle");for(var s=0;s<i.length;s++){var u=i[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=i[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":a=u}}var c=null,l=!1;Yi.R(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?c=e.getAttribute("value"):l=!0})),s=Yi.R(t,"Accessibility");var d=new Map;for(i={},u=(s=h(s)).next();!u.done;i={Db:i.Db},u=s.next()){var f=u.value;u=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(i.Db=1,null!=f?f.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Db,e.Db+=2;d.set(n,_n(t))}}(i)):d.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=f&&(r.push(f),"captions"==f&&(a="caption"))}if(l)return null;var p=Ji(i=Yi.R(t,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(i=_n(t.getAttribute("lang")||"und"),u=t.getAttribute("label"),0==(r=(s=Yi.R(t,"Representation")).map(this.xf.bind(this,e,p,a,i,u,n,r,d)).filter((function(e){return!!e}))).length){if(o)return null;throw new fe(2,4,4003)}return e.ca.contentType&&"application"!=e.ca.contentType||(e.ca.contentType=Or(r[0].mimeType,r[0].codecs),r.forEach((function(t){t.type=e.ca.contentType}))),r.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=s.map((function(e){return e.getAttribute("id")})).filter(qt.Ga),{id:e.ca.id||"__fake__"+this.h++,contentType:e.ca.contentType,language:i,Rc:n,streams:r,drmInfos:p.drmInfos,qd:c,Gf:o}},n.xf=function(e,t,n,i,r,a,o,s,u){if(e.B=Dr(u,e.ca,null),!function(e){var t=e.Ob?1:0;return t+=e.Ja?1:0,0==(t+=e.Qb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Ob&&(e.Ja=null),e.Qb=null),!0)}(e.B))return null;e.bandwidth=Yi.J(u,"bandwidth",Yi.nc)||0;var c=e.B.contentType;c="text"==c||"application"==c;try{var l=this.Hf.bind(this);if(e.B.Ob)var h=function(e,t){var n=Number(ir(e,wr,"presentationTimeOffset"))||0,i=ir(e,wr,"timescale"),r=1;i&&(r=Yi.nc(i)||1),n=n/r||0,i=yr(e,wr);var a=e.B.contentType;if(r=e.B.mimeType.split("/")[1],"text"!=a&&"mp4"!=r&&"webm"!=r)throw new fe(2,4,4006);if("webm"==r&&!i)throw new fe(2,4,4005);a=rr(e,wr,"RepresentationIndex");var o=ir(e,wr,"indexRange"),s=e.B.oa;if(o=Yi.oc(o||""),a){var u=a.getAttribute("sourceURL");u&&(s=Kt(e.B.oa,[u])),o=Yi.J(a,"range",Yi.oc,o)}if(!o)throw new fe(2,4,4002);return{createSegmentIndex:(r=br(e,t,i,s,o.start,o.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,la:n}}(e,l);else if(e.B.Ja)h=Tr(e,this.m);else if(e.B.Qb)h=kr(e,l,this.m,!!this.c);else{var d=e.B.oa,f=e.S.duration||0;h={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new sr(1,0,f,(function(){return d}),0,null)},initSegmentReference:null,la:0}}}catch(e){if(c&&4002==e.code)return null;throw e}return u=function(e,t,n,i){var r=Ji(e,t,i);if(n.Ad)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Ad=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new fe(2,4,4008);return r.wd||n.wd}(u=Yi.R(u,"ContentProtection"),this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:e.B.id,createSegmentIndex:h.createSegmentIndex,findSegmentPosition:h.findSegmentPosition,getSegmentReference:h.getSegmentReference,initSegmentReference:h.initSegmentReference,presentationTimeOffset:h.la,mimeType:e.B.mimeType,codecs:e.B.codecs,frameRate:e.B.frameRate,bandwidth:e.bandwidth,width:e.B.width,height:e.B.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:i,label:r,type:e.ca.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.B.emsgSchemeIdUris,roles:o,channelsCount:e.B.Xc,closedCaptions:s}},n.wf=function(e,t,n){var i=Yi.vb,r=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=Yi.J(n,"timescale",i)||1;Yi.R(n,"Event").forEach(function(n){var s=Yi.J(n,"presentationTime",i)||0,u=Yi.J(n,"duration",i)||0;u=(s=s/o+e)+u/o,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:r,value:a,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.Hf=function(e,t,n){return e=Ir(e,t,n,this.b.retryParameters),e=this.a.networkingEngine.request(1,e),Me(this.g,e),e.promise.then((function(e){return e.data}))},xr.ed("mpd",Cr),xr.Nb("application/dash+xml",Cr),jr.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},jr.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Vr={lb:function(e,t){return e.filter((function(e){return e.name==t}))},Ra:function(e,t){var n=Vr.lb(e,t);return n.length?n[0]:null},Hc:function(e,t,n){return e.filter((function(e){var i=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),i.value==t&&e.value==n}))},zc:function(e,t){return Kt([e],[t])[0]},Pc:function(e){return/^#(?!EXT)/m.test(e)}};function qr(e){this.b=e,this.a=0}function Kr(e){zr(e,/[ \t]+/gm)}function zr(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,Jf:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.Jf)}function Gr(e){return e.a==e.b.length?null:(e=zr(e,/[^ \t\n]*/gm))?e[0]:null}function Wr(){this.a=0}function Xr(e,t,n){var i=(t=(t=rt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new fe(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Vr.Pc(i[r])){var a=$r(e,i[r]);if(--e.a,Jr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Vr.Pc(i[a]))a+=1;else{var o=$r(e,i[a]);if(Qr.includes(o.name)){if(1!=t)throw new fe(2,4,4017);return new Ur(n,t,r,e=Yr(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Br("URI",i[a])),a+=1)}return new Ur(n,t,r)}function Yr(e,t,n,i){var r=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=$r(e,n),Jr.includes(n.name)?i.push(n):a.push(n);else{if(Vr.Pc(n))return[];n=Vr.zc(t,n.trim()),r.push(new Hr(n,a)),a=[]}})),r}function $r(e,t){var n=e.a++,i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new fe(2,4,4016,t);var r,a=i[1],o=i[2];if(i=[],o){var s;(s=zr(o=new qr(o),/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=zr(o,u);)i.push(new Br(s[1],s[2]||s[3]))}return new jr(n,a,i,r)}var Jr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Qr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Zr(e){try{var t=Zr.parse(e);return ye({uri:e,ad:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ge(e)}}function ea(){var e=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new Wr,this.P=0,this.h=new le((function(){!function(e){f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return e.g?(S(t,2),E(t,e.update(),4)):t.return();case 4:n=e.P,e.h.O(n),A(t,0);break;case 2:(i=I(t)).severity=1,e.g.onError(i),e.h.O(.1),k(t)}}))}))}(e)})),this.f=wa,this.m=null,this.C=0,this.G=1/0,this.i=new Pe,this.M=[],this.l=new Map,this.W=!1}function ta(e,t){return f((function n(){var i,r,a,o,s,u,c,l,h,d;return D(n,(function(n){switch(n.j){case 1:return i=Vr,r=Ta,a=t.pe,E(n,pa(e,a),2);case 2:if(o=n.o,1!=(s=Xr(e.s,o.data,o.uri)).type)throw new fe(2,4,4017);return c=(u=i.Ra(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,l=t.stream,E(n,ca(e,t.tc,s,c,l.mimeType,l.codecs),3);case 3:h=n.o,t.Pb.a=h,d=h[h.length-1],i.Ra(s.a,"EXT-X-ENDLIST")&&(va(e,r.Oa),e.b.wa(d.endTime)),k(n)}}))}))}function na(e){e.forEach((function(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}))}function ia(e,t,n,i,r){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function ra(e,t,n){return f((function i(){var r,a,o,s,u,c,l,h,d;return D(i,(function(i){switch(i.j){case 1:if(r=da(t,"URI"),e.a.has(r))return i.return(e.a.get(r));if(a=da(t,"TYPE").toLowerCase(),o=Gt,"subtitles"==a&&(a=o.qa),s=_n(Fr(t,"LANGUAGE","und")),u=Fr(t,"NAME"),c=t.getAttribute("DEFAULT"),l=t.getAttribute("AUTOSELECT"),h=Fr(t,"CHANNELS"),"audio"==a)if(h){var f=h.split("/")[0];f=parseInt(f,10)}else f=null;else f=null;return E(i,aa(e,r,n,a,s,!!c||!!l,u,f,null),2);case 2:return null==(d=i.o)?i.return(null):e.a.has(r)?i.return(e.a.get(r)):(e.D.set(t.id,d),e.a.set(r,d),i.return(d))}}))}))}function aa(e,t,n,i,r,a,o,s,u){return f((function c(){var l,d,p,m,g,v,y,b,w,T,k,S,x,A,I,C,P,M,N,R,L,_,O,U,j;return D(c,(function(c){switch(c.j){case 1:return d=(l=Vr).zc(e.v,t),m="",E(c,pa(e,d),2);case 2:if(v=c.o,d=v.uri,1!=(p=Xr(e.s,v.data,d)).type)throw new fe(2,4,4017);y=[],p.segments.forEach((function(e){e=l.lb(e.b,"EXT-X-KEY"),y.push.apply(y,e)})),b=!1,w=[],T=null;for(var B=h(y),F=B.next();!F.done;F=B.next())if(k=F.value,"NONE"!=(S=da(k,"METHOD"))){if(b=!0,"AES-128"==S)return e.W=!0,c.return(null);x=da(k,"KEYFORMAT"),(I=(A=ba[x])?A(k):null)&&(I.keyIds.length&&(T=I.keyIds[0]),w.push(I))}if(b&&!w.length)throw new fe(2,4,4026);return function(e,t){var n=Ta,i=Vr.Ra(t.a,"EXT-X-PLAYLIST-TYPE"),r=Vr.Ra(t.a,"EXT-X-ENDLIST");r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r,i=!r&&!i,r?va(e,n.Oa):(va(e,i?n.td:n.ke),n=fa(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.C=Math.max(n,e.C),e.G=Math.min(n,e.G))}(e,p),m=function(e,t){if(1==t.length)return t[0];var n=ha(e,t);if(null!=n)return n;throw new fe(2,4,4025,t)}(i,n),E(c,function(e,t,n,i){return f((function r(){var a,o,s,u,c,l,h,d,f,p;return D(r,(function(r){switch(r.j){case 1:return a=Gt,o=Re,s=i.segments[0].a,u=new $(s),c=u.ia.split(".").pop(),l=ga[t],(h=l[c])?r.return(h):t==a.qa?n&&"vtt"!=n?r.return("application/mp4"):r.return("text/vtt"):((d=_e([s],e.c.retryParameters)).method="HEAD",E(r,ya(e,d,o.ud),2));case 2:if(f=r.o,!(p=f.headers["content-type"]))throw new fe(2,4,4021,c);return r.return(p.split(";")[0])}}))}))}(e,i,m,p),3);case 3:return g=c.o,P=(C=l.Ra(p.a,"EXT-X-MEDIA-SEQUENCE"))?Number(C.value):0,E(c,ca(e,t,p,P,g,m),4);case 4:return M=c.o,N=M[0].startTime,R=M[M.length-1].endTime,L=R-N,_=new cr(M),O=oa(p),U=void 0,"text"==i&&(U="subtitle"),j={id:e.$++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:_.find.bind(_),getSegmentReference:_.get.bind(_),initSegmentReference:O,presentationTimeOffset:0,mimeType:g,codecs:m,kind:U,encrypted:b,keyId:T,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:u},c.return({stream:j,Pb:_,drmInfos:w,tc:t,pe:d,Uc:N,qg:R,duration:L})}}))}))}function oa(e){var t=Vr.lb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new fe(2,4,4020);var n=da(t=t[0],"URI"),i=Vr.zc(e.b,n);return e=0,n=null,(t=Fr(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new or((function(){return[i]}),e,n)}function sa(e,t,n,i){var r=t.b,a=t.a;t=fa(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Vr.Ra(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new sr(n,i,t,(function(){return[a]}),o,s)}function ua(e){e.b&&(e.M.forEach((function(t){e.b.sb(t,0)})),e.M=[])}function ca(e,t,n,i,r,a){return f((function o(){var s,u,c,l,h,d,p,m,g,v;return D(o,(function(o){switch(o.j){case 1:return s=n.segments,u=[],c=s[0].a,l=sa(null,s[0],i,0),h=oa(n),E(o,function(e,t,n,i,r,a){return f((function o(){var s,u,c,l,h,d,f,p,m;return D(o,(function(o){switch(o.j){case 1:if(e.m&&(s=e.a.get(t),u=s.Pb,c=u.get(i.position)))return o.return(c.startTime);if("audio/mpeg"==r)return o.return(0);if("video/mp4"!=r&&"audio/mp4"!=r){o.A(2);break}return l=[la(e,i)],n&&l.push(la(e,n)),E(o,Promise.all(l),3);case 3:return h=o.o,d=h[0],f=h[1]||h[0],o.return(function(e,t){var n=0;if((new Vi).H("moov",qi).H("trak",qi).H("mdia",qi).fa("mdhd",(function(e){e.reader.L(0==e.version?8:16),n=e.reader.F(),e.parser.stop()})).parse(t,!0),!n)throw new fe(2,4,4030);var i=0,r=!1;if((new Vi).H("moof",qi).H("traf",qi).fa("tfdt",(function(e){i=(0==e.version?e.reader.F():e.reader.yb())/n,r=!0,e.parser.stop()})).parse(e,!0),!r)throw new fe(2,4,4030);return i}(d.data,f.data));case 2:if("video/mp2t"!=r){o.A(4);break}return E(o,la(e,i),5);case 5:return p=o.o,o.return(function(e){function t(){throw new fe(2,4,4030)}e=new Bi(new DataView(e),0);for(var n=0,i=0;;){if(n=e.ba(),71!=(i=e.ka())&&t(),16384&e.Mb()||t(),0!=(i=(48&e.ka())>>4)&&2!=i||t(),3==i&&(i=e.ka(),e.L(i)),1==e.F()>>8)return e.L(3),0!=(n=e.ka()>>6)&&1!=n||t(),0==e.ka()&&t(),n=e.ka(),i=e.Mb(),e=e.Mb(),(1073741824*((14&n)>>1)+((65534&i)<<14|(65534&e)>>1))/9e4;e.seek(n+188),71!=(i=e.ka())&&(e.seek(n+192),i=e.ka()),71!=i&&(e.seek(n+204),i=e.ka()),71!=i&&t(),e.$d(1)}}(p.data));case 4:if("application/mp4"!=r&&!r.startsWith("text/")){o.A(6);break}return E(o,la(e,i),7);case 7:return m=o.o,o.return(function(e,t,n){return vn(e=$e(e,t))?(yn(t=new mn(null),e),t.Mc(n)):0}(r,a,m.data));case 6:if("video/webm"==r)return o.return(null);throw new fe(2,4,4030)}}))}))}(e,t,h,l,r,a),2);case 2:d=o.o,c.split("/").pop();for(var y=0;y<s.length;++y)p=s[y],m=u[u.length-1],g=0==y?d:m.endTime,v=sa(m,p,i+y,g),u.push(v);return e.M.push(u),ua(e),o.return(u)}}))}))}function la(e,t){return f((function n(){var i,r,a,o,s,u;return D(n,(function(n){switch(n.j){case 1:return i=Re,r=Ir(t.c(),t.b,t.b+2048-1,e.c.retryParameters),a=Ir(t.c(),t.b,t.a,e.c.retryParameters),S(n,2),E(n,ya(e,r,i.ud),4);case 4:return o=n.o,n.return(o);case 2:if(7001==(s=I(n)).code)throw s;return W("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),E(n,ya(e,a,i.ud),5);case 5:return u=n.o,n.return(u)}}))}))}function ha(e,t){for(var n=ma[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function da(e,t){var n=e.getAttribute(t);if(!n)throw new fe(2,4,4023,t);return n.value}function fa(e,t){var n=Vr.Ra(e,t);if(!n)throw new fe(2,4,4024,t);return n}function pa(e,t){return ya(e,_e([t],e.c.retryParameters),Re.ng)}F("shaka.net.DataUriPlugin",Zr),Zr.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new fe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new fe(2,1,1004,t);var i=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var r=null;if(1<(i=i.split(";")).length&&(r=i[1]),"base64"==r)t=dt(n).buffer;else{if(r)throw new fe(2,1,1005,t);t=st(n)}return{data:t,contentType:i[0]}},De("data",Zr),F("shaka.hls.HlsParser",ea),(n=ea.prototype).configure=function(e){this.c=e},n.start=function(e,t){var n=this;return f((function i(){var r,a;return D(i,(function(i){switch(i.j){case 1:return n.g=t,E(i,pa(n,e),2);case 2:return r=i.o,n.v=r.uri,E(i,function(e,t){return f((function n(){var i,r,a,o,s,u,c,l,d,p,m;return D(n,(function(n){switch(n.j){case 1:if(0!=(i=Xr(e.s,t,e.v)).type)throw new fe(2,4,4022);return E(n,function(e,t){return f((function n(){var i,r,a,o,s,u,c,l,d,p,m,g;return D(n,(function(n){switch(n.j){case 1:return i=Vr,r=qt,a=t.a,o=i.lb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==da(e,"TYPE")}.bind(e)),u=s.map(function(e){var t=this;return f((function n(){var i;return D(n,(function(n){switch(n.j){case 1:return S(n,2),E(n,function(e,t){return f((function n(){var i;return D(n,(function(n){switch(n.j){case 1:return da(t,"TYPE"),E(n,ra(e,t,[]),2);case 2:return i=n.o,n.return(i.stream)}}))}))}(t,e),4);case 4:return n.return(n.o);case 2:if(i=I(n),t.c.hls.ignoreTextStreamFailures)return n.return(null);throw i}}))}))}.bind(e)),c=o.filter((function(e){return"CLOSED-CAPTIONS"==da(e,"TYPE")})),function(e,t){for(var n=h(t),i=n.next();!i.done;i=n.next()){da(i=i.value,"TYPE");var r=Fr(i,"LANGUAGE")||"und";r=_n(r);var a=da(i,"GROUP-ID");i=da(i,"INSTREAM-ID"),e.l.get(a)||e.l.set(a,new Map),e.l.get(a).set(i,r)}}(e,c),E(n,Promise.all(u),2);case 2:return l=n.o,d=i.lb(a,"EXT-X-STREAM-INF"),p=d.map(function(e){return function(e,t,n){return f((function i(){var r,a,o,s,u,c,l,d,p,m,g,v,y,b,w,T,k,S,x,A,I,C,P,M,N,R,L;return D(i,(function(i){switch(i.j){case 1:return r=Gt,a=Vr,o=Fr(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],i=(e=h(e)).next();!i.done;i=e.next()){var r=Je(i=i.value)[0];t.has(r)||(n.push(i),t.add(r))}return n}(o.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),l=c=null,d=Fr(t,"FRAME-RATE"),p=Number(da(t,"BANDWIDTH")),u&&(m=u.value.split("x"),c=m[0],l=m[1]),g=(g=(g=a.lb(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=da(e,"TYPE")}))).filter((function(e){var t=Fr(e,"URI")||"";return"SUBTITLES"==(Fr(e,"TYPE")||"")||""!=t})),v=Fr(t,"AUDIO"),y=Fr(t,"VIDEO"),v?g=a.Hc(g,"AUDIO",v):y&&(g=a.Hc(g,"VIDEO",y)),(b=ha(r.qa,s))&&((w=Fr(t,"SUBTITLES"))&&((T=a.Hc(g,"SUBTITLES",w)).length&&(k=e.D.get(T[0].id))&&(k.stream.codecs=b)),Ie(s,b)),S=g.map(function(e){return ra(this,e,s)}.bind(e)),x=[],A=[],E(i,Promise.all(S),2);case 2:if(C=(C=i.o).filter((function(e){return null!=e})),v?x=C:y&&(A=C),M=!1,x.length||A.length?x.length?(R=da(t,"URI"),L=x[0].tc,R==L?(P=r.Ab,M=!0):P=r.Na):P=r.Ab:1==s.length?(N=ha(r.Na,s),P=u||d||N?r.Na:r.Ab):(P=r.Na,s=[s.join(",")]),M){i.A(3);break}return E(i,function(e,t,n,i){return f((function r(){var a,o,s,u,c;return D(r,(function(r){switch(r.j){case 1:return a=Gt,o=da(t,"URI"),e.a.has(o)?r.return(e.a.get(o)):(s=Fr(t,"CLOSED-CAPTIONS"),u=null,i==a.Na&&s&&"NONE"!=s&&(u=e.l.get(s)),E(r,aa(e,o,n,i,"und",!1,null,null,u),2));case 2:return null==(c=r.o)?r.return(null):e.a.has(o)?r.return(e.a.get(o)):(e.a.set(o,c),r.return(c))}}))}))}(e,t,s,P),4);case 4:I=i.o;case 3:if(I)I.stream.type==r.Ab?x=[I]:A=[I];else if(null===I)return i.return([]);return A&&na(A),x&&na(x),i.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var s=[],u=(t=h(t)).next();!u.done;u=t.next()){u=u.value;for(var c=h(n),l=c.next();!l.done;l=c.next()){var d=l.value;l=u?u.stream:null;var f=d?d.stream:null,p=u?u.drmInfos:null,m=d?d.drmInfos:null;d=(d?d.tc:"")+" - "+(u?u.tc:"");var g=void 0;if(l&&f){if(p.length&&m.length&&!(0<Nt(p,m).length))continue;g=Nt(p,m)}else l?g=p:f&&(g=m);e.T.has(d)||(l=ia(e,l,f,i,g),s.push(l),e.T.add(d))}}return s}(e,x,A,p,c,l,d))}}))}))}(this,e,t)}.bind(e)),E(n,Promise.all(p),3);case 3:return m=n.o,g=(g=m.reduce(r.yc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:g,textStreams:l.filter((function(e){return null!=e}))})}}))}))}(e,i),2);case 2:if(r=n.o,!e.g)throw new fe(2,7,7001);if(e.W&&0==r.variants.length)throw new fe(2,4,4034);e.g.filterAllPeriods([r]),a=1/0,o=0,s=1/0;for(var g=h(e.a.values()),v=g.next();!v.done;v=g.next())u=v.value,a=Math.min(a,u.Uc),o=Math.max(o,u.Uc),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.f!=Ta.Oa?(e.b=new Ar(0,3*e.C),e.b.Rb(!1)):(e.b=new Ar(null,0),e.b.Rb(!0)),ua(e),e.f!=Ta.Oa){for(e.P=e.G,c=Ta,e.f==c.td&&(l=e.b.pc,isNaN(e.c.availabilityWindowOverride)||(l=e.c.availabilityWindowOverride),e.b.md(l)),d=0;95443.7176888889<=o;)d+=95443.7176888889,o-=95443.7176888889;if(d)for(v=(g=h(e.a.values())).next();!v.done;v=g.next())95443.7176888889>(p=v.value).Uc&&(p.stream.presentationTimeOffset=-d,p.Pb.offset(d))}else for(e.b.wa(s),e.b.offset(-a),v=(g=h(e.a.values())).next();!v.done;v=g.next())(m=v.value).stream.presentationTimeOffset=a,m.Pb.offset(-a),lr(m.Pb,s);e.m={presentationTimeline:e.b,periods:[r],offlineSessionIds:[],minBufferTime:0},k(n)}}))}))}(n,r.data),3);case 3:return 0<(a=n.P)&&n.h.O(a),i.return(n.m)}}))}))},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(e)},n.update=function(){if(this.f!=Ta.Oa){for(var e=[],t=h(this.a.values()),n=t.next();!n.done;n=t.next())e.push(ta(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var ma={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ga={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function va(e,t){e.f=t,e.b&&e.b.Rb(e.f==Ta.Oa),e.f!=Ta.Oa||e.h.stop()}function ya(e,t,n){if(!e.i)throw new fe(2,7,7001);return t=e.g.networkingEngine.request(n,t),Me(e.i,t),t.promise}var ba={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=da(e,"METHOD");return ni("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=da(e,"URI"),t=Zr.parse(t),t=zt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Fr(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},wa="VOD",Ta={Oa:wa,ke:"EVENT",td:"LIVE"};function Ea(){this.a=new Map}function ka(e,t,n){Sa(e,t).text=n}function Sa(e,t){return e.a.has(t)||e.a.set(t,new xa),e.a.get(t)}function xa(){this.text=this.variant=null}function Aa(e,t){this.a=e,this.b=new Set([e]);for(var n=h(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Ia(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Ca(n,i)&&Pa(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Ca(n=e.video,i=t.video)&&Pa(n.roles,i.roles))),!n}function Ca(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Je(e)[0]})),i=t.codecs.split(",").map((function(e){return Je(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Pa(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=h(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Ma(e){this.a=e,this.b=new Na(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Na(e,t,n){this.c=e,this.b=t,this.a=n}function Ra(e,t){this.a=Da,this.b=(new Map).set(Da,t).set(La,e)}xr.ed("m3u8",ea),xr.Nb("application/x-mpegurl",ea),xr.Nb("application/vnd.apple.mpegurl",ea),Aa.prototype.add=function(e){return!!Ia(this.a,e)&&(this.b.add(e),!0)},Aa.prototype.values=function(){return this.b.values()},Ma.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ia(t.a,e)}));return n.length?new Aa(n[0],n):this.b.create(e)},Na.prototype.create=function(e){var t=[];t=function(e,t){var n=Un(_n(t),e.map((function(e){return On(e)})));return n?e.filter((function(e){return n==On(e)})):[]}(e,this.c);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.b&&((e=function(e,t){return e.filter((function(e){var n=e.audio;return e=e.video,n&&0<=n.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.b)).length&&(t=e)),this.a&&((e=Yn(t,this.a)).length&&(t=e)),e=new Aa(t[0]),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,Ia(e.a,n)&&e.add(n);return e};var La=0,Da=1;function _a(e,t){this.f=e,this.g=Ua(e),this.b=e.a.currentTime,this.c=Date.now()/1e3,this.h=t,this.a=function(){}}function Oa(e){this.a=e}function Ua(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i||e>r-.5)){t=!0;break e}}t=!1}return t}function ja(e,t,n,i,r){var a=this;this.a=e,this.v=t,this.s=n,this.l=r,this.f=new Ve,this.i=!1,this.m=e.readyState,this.c=!1,this.b=i,this.h=!1,this.f.w(e,"waiting",(function(){return Ba(a)})),this.g=new le((function(){Ba(a)})).La(.25)}function Ba(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,n=e.a.currentTime,i=e.a.buffered;e:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0)))for(var r=tt("Edge/")||tt("Trident/")||tt("Tizen")||tt("CrKey")?.5:.1,a=0;a<i.length;a++)if(i.start(a)>n&&(0==a||i.end(a-1)-n<=r)){r=a;break e}r=null}if(null==r)e.b&&(i=Ua(n=(e=e.b).f),n=n.a.currentTime,r=Date.now()/1e3,e.b==n&&e.g==i||(e.c=r,e.b=n,e.g=i),(n=r-e.c)>=e.h&&i&&e.a(e.b,n));else if(0!=r||e.h){a=i.start(r);var o=e.v.za();if(!(a>=o)){t=(o=a-n)<=t;var s=!1;.001>o||(t||e.c||(e.c=!0,(n=new Ee("largegap",{currentTime:n,gapSize:o})).cancelable=!0,e.l(n),e.s.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=r&&i.end(r-1),e.a.currentTime=a)}}}}}function Fa(e){var t=this;this.c=e,this.a=new Set,this.b=new le((function(){Ha(t,!1)})).La(.25)}function Ha(e,t){for(var n=h(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Va(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())for(var i=(n=h(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function qa(e,t){for(var n=null,i=h(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function Ka(e){this.c=e,this.a=null,this.b=function(){}}function za(e){var t=this;this.a=e,this.f=!1,this.c=this.a.ec(),this.b=new le((function(){t.a.Id(.25*t.c)}))}function Ga(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.ec()!=t&&e.a.ld(t))}catch(e){}e.b.La(.25),0!=e.a.ec()&&e.a.ld(0)}function Wa(e,t,n){this.a=e,this.f=t,this.g=n,this.h=!1,this.b=new Ve,this.c=new Qa(e),0<e.readyState?$a(this,n):Ya(this,n)}function Xa(e){return e.h?e.a.currentTime:e.g}function Ya(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",(function(){$a(e,t)}))}function $a(e,t){.001>Math.abs(e.a.currentTime-t)?Ja(e):(e.b.da(e.a,"seeking",(function(){Ja(e)})),Za(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Ja(e){e.h=!0,e.b.w(e.a,"seeking",(function(){return e.f()}))}function Qa(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new le((function(){0>=t.c?t.a.stop():t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function Za(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.La(.1)}function eo(e){function t(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",(function(){n.f=!0})),n.a.currentTime=n.c)}var n=this;this.a=e,this.f=!1,this.c=null,this.b=new Ve,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",t):t()}function to(e,t,n,i,r,a){var o=this;this.b=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.g=n,this.v=r,this.l=null,this.f=new ja(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new _a(new Oa(e),t.stallThreshold);return function(e,t){e.a=t}(i,(function(){e.currentTime+=n})),i}(e,n),a),this.c=new Wa(e,(function(){var e=o.f;e.i=!0,e.h=!1,e.c=!1;var t=Xa(o.c);return e=io(o,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!o.l||o.l<t-1)?(o.l=t,0<(t=o.c).a.readyState?Za(t.c,e):Ya(t,e),e=void 0):(o.v(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.Y()?e.a.mb():e.a.za():0>t&&(t=e.a.za()+t),no(e,ro(e,t))}(this,i)),this.i=new le((function(){if(0!=o.b.readyState&&!o.b.paused){var e=o.b.currentTime,t=o.a.mb(),n=o.a.za();3>n-t&&(t=n-3),e<t&&(e=io(o,e),o.b.currentTime=e)}})).La(.25)}function no(e,t){var n=e.a.Y();return t>=n?n-e.g.durationBackoff:t}function io(e,t){var n=Ft.bind(null,e.b.buffered),i=Math.max(e.C,e.g.rebufferingGoal),r=e.g.safeSeekOffset,a=e.a.mb(),o=e.a.za(),s=e.a.Y();3>o-a&&(a=o-3);var u=e.a.Gb(i),c=e.a.Gb(r);return i=e.a.Gb(i+r),t>=s?no(e,t):t>o?o:t<a?n(c)?c:i:t>=u||n(t)?t:i}function ro(e,t){var n=e.a.mb();return t<n?n:t>(n=e.a.za())?n:t}function ao(){this.b=function(){},this.a=new Set}function oo(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{bb:null,ab:uo,Ua:function(e,n){return t.a(e,n)}},{bb:so,ab:uo,Ua:function(e,n){return t.a(e,n)}},{bb:co,ab:uo,Ua:function(e,n){return t.a(e,n)}},{bb:uo,ab:so,Ua:function(e,n){return t.b(e,n)}},{bb:uo,ab:co,Ua:function(e,n){return t.b(e,n)}},{bb:so,ab:co,Ua:function(e,n){return t.c(e,n)}},{bb:co,ab:so,Ua:function(e,n){return t.c(e,n)}}]}_a.prototype.release=function(){this.f=null,this.a=function(){}},ja.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},ja.prototype.Zc=function(){this.h=!0,Ba(this)},Fa.prototype.release=function(){this.b.stop();for(var e=h(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Ka.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ka.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=qa(n,e)||n[0])&&this.b(e),this.a=e},za.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},za.prototype.set=function(e){this.c=e,Ga(this)},Wa.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Qa.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},eo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},eo.prototype.m=function(e){this.c=this.f?this.c:e},eo.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},eo.prototype.s=function(){},to.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},to.prototype.m=function(e){var t=this.c;0<t.a.readyState?Za(t.c,e):Ya(t,e)},to.prototype.h=function(){var e=Xa(this.c);return 0<this.b.readyState&&!this.b.paused?ro(this,e):e},to.prototype.s=function(){this.f.Zc()},ao.prototype.release=function(){this.b=function(){},this.a.clear()},oo.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},oo.prototype.g=function(e,t){for(var n=h(this.h.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?so:e>i.endTime?co:uo;this.f.set(i,a);for(var o=h(this.i),s=o.next();!s.done;s=o.next())(s=s.value).bb==r&&s.ab==a&&s.Ua(i,t)}};var so=1,uo=2,co=3;function lo(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.G=null,this.D=this.f=this.m=!1,this.C=0}function ho(e){return po(e,"audio")}function fo(e){return po(e,"video")}function po(e,t){var n=e.b.get(t);return n?n.Ia||n.stream:null}function mo(e,t){return f((function n(){var i,r,a,o,s,u,c,l,h;return D(n,(function(n){switch(n.j){case 1:return i=Gt,E(n,Pn(e.a.I,i.qa),2);case 2:return e.C++,e.D=!1,r=e.C,a=e.a.I,o=new Map,s=new Set,o.set(i.qa,t),s.add(t),E(n,a.init(o,!1),3);case 3:return e.f?n.return():E(n,ko(e,s),4);case 4:if(e.f)return n.return();u=e.a.I.g.isTextVisible()||e.g.alwaysStreamText,e.C!=r||e.b.has(i.qa)||e.D||!u||(c=e.a.Sa(),l=Mo(e,c),h=To(t,l,0),e.b.set(i.qa,h),Do(e,h,0)),k(n)}}))}))}function go(e,t){var n=e.b.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ia&&(yo(e,r,!1,0,!1),n.Ia=i)}else(i=n.Ia)&&(n.Ia=null,yo(e,i,!0,0,!1))}}function vo(e,t,n,i){t.video&&yo(e,t.video,n,i,!1),t.audio&&yo(e,t.audio,n,i,!1)}function yo(e,t,n,i,r){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)mo(e,t);else if(a){var o=No(e,t),s=Array.from(e.b.values()).every((function(e){return e.pa==a.pa}));n&&o!=a.pa&&s?e.b.forEach((function(t){bo(e,t)})):(a.Ia&&(t.trickModeVideo?(a.Ia=t,t=t.trickModeVideo):a.Ia=null),(s=e.h[o])&&s.zb&&(s=e.i.get(t.id))&&s.zb&&(a.stream!=t||r)&&("text"==t.type&&kn(e.a.I,$e(t.mimeType,t.codecs)),a.stream=t,a.hc=!0,function(e,t,n){if(!t.Kb)return!1;var i=e.a.Sa(),r=An(e.a.I,t.type);if(null==(n=(n=Ao(e,t,i,r,n))&&n.a?n.a-n.b:null))return!1;var a=t.stream.initSegmentReference;return a&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Kb.b.a>n}(e,a,o)&&a.Kb.abort(),n&&(a.Pa?a.uc=!0:a.Ha?(a.Ma=!0,a.Zb=i,a.uc=!0):(_o(a),Lo(e,a,!0,i).catch((function(t){e.a&&e.a.onError(t)}))))))}}function bo(e,t){t.Pa||t.Ma||(t.Ha?(t.Ma=!0,t.Zb=0):null==xn(e.a.I,t.type)?null==t.Da&&Do(e,t,0):(_o(t),Lo(e,t,!1,0).catch((function(t){e.a&&e.a.onError(t)}))))}function wo(e,t,n,i,r){return f((function a(){var o,s,u,c,l,h,d;return D(a,(function(a){switch(a.j){case 1:return o=e.a.Sa(),s=Mo(e,o),u=Gt,c=new Map,l=new Set,t&&(c.set(u.Ab,t),l.add(t)),n&&(c.set(u.Na,n),l.add(n)),i&&(c.set(u.qa,i),l.add(i)),h=e.a.I,d=e.g.forceTransmuxTS,E(a,h.init(c,d),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.I.wa(t):e.a.I.wa(Math.pow(2,32))}(e),E(a,ko(e,l),3));case 3:if(e.f)return a.return();c.forEach((function(t,n){if(!e.b.has(n)){var i=To(t,s,r);e.b.set(n,i),Do(e,i,0)}})),k(a)}}))}))}function To(e,t,n){return{stream:e,type:e.type,pb:null,Aa:null,Ia:null,hc:!0,pa:t,endOfStream:!1,Ha:!1,Da:null,Ma:!1,Zb:0,uc:!1,Pa:!1,dd:!1,Ib:!1,Zd:n||0,Kb:null}}function Eo(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new pe,zb:!1},e.h[t]=n;for(var i=new Set,r=h(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=h(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.v=e.v.then(function(){if(!this.f)return ko(this,i)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].zb=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function ko(e,t){return f((function n(){var i,r,a,o,s,u,c;return D(n,(function(n){switch(n.j){case 1:i=[];for(var l=h(t),d=l.next();!d.done;d=l.next())r=d.value,(a=e.i.get(r.id))?i.push(a.promise):(e.i.set(r.id,{promise:new pe,zb:!1}),i.push(r.createSegmentIndex()));return S(n,2),E(n,Promise.all(i),4);case 4:if(e.f)return n.return();A(n,3);break;case 2:if(o=I(n),e.f)return n.return();for(d=(n=h(t)).next();!d.done;d=n.next())s=d.value,e.i.get(s.id).promise.catch((function(){})),e.i.get(s.id).promise.reject(),e.i.delete(s.id);throw o;case 3:for(d=(l=h(t)).next();!d.done;d=l.next())u=d.value,(c=e.i.get(u.id)).zb||(c.promise.resolve(),c.zb=!0);k(n)}}))}))}function So(e,t){if(!e.f&&!t.Ha&&null!=t.Da&&!t.Pa)if(t.Da=null,t.Ma)Lo(e,t,t.uc,t.Zb);else{try{var n=function(e,t){if(Co(t))return e.a.I.rc(t.stream.originalId||""),null;var n=e.a.Sa(),i=xo(e,t,n),r=No(e,t.stream),a=Mo(e,i),o=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):Ht(e=In(e,t),n)}(e.a.I,t.type,n),s=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(i>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(i=e.b.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.pa=a,a!=r)return null;if(o>=s)return.5;if(a=An(e.a.I,t.type),!(a=Ao(e,t,n,a,r)))return 1;var u=1/0;return Array.from(e.b.values()).forEach((function(t){Co(t)||(t=xo(e,t,n),u=Math.min(u,t))})),i>=u+e.c.presentationTimeline.a?1:(t.Zd=0,function(e,t,n,i,r){var a=e.c.periods[i],o=t.stream,s=e.c.presentationTimeline.Y(),u=e.c.periods[i+1];i=function(e,t,n,i,r){return t.hc?(n=function(e,t,n,i,r){return"text"==t?(e.a.m=n,(e=e.a).f=i,e.h=r,Promise.resolve()):Promise.all([Mn(e,t,e.oe.bind(e,t)),Mn(e,t,e.Sf.bind(e,t,n)),Mn(e,t,e.Pf.bind(e,t,i,r))])}(e.a.I,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,i,r),t.stream.initSegmentReference?(e=Ro(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return Cn(this.a.I,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.hc=!0,Promise.reject(e)})),Promise.all([n,e])):n):Promise.resolve()}(e,t,i,Math.max(0,a.startTime-.1),u?u.startTime+.01:s),t.Ha=!0,t.hc=!1,s=Ro(e,t,r),Promise.all([i,s]).then(function(e){if(!this.f&&!this.m)return function(e,t,n,i,r,a,o){var s=r.closedCaptions&&0<r.closedCaptions.size;return null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new Vi).fa("emsg",e.M.bind(e,i,a,r.emsgSchemeIdUris)).parse(o),function(e,t,n){var i=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),r=xn(e.a.I,t.type);return null==r?Promise.resolve():0>=(n=n-r-i)?Promise.resolve():e.a.I.remove(t.type,r,r+n).then(function(){}.bind(e))}(e,t,n).then(function(){if(!this.f)return Cn(this.a.I,t.type,o,a.startTime+i.startTime,a.endTime+i.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.pb=r,t.Aa=a,Promise.resolve()}.bind(e))}(this,t,n,a,o,r,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ha=!1,t.dd=!1,t.Ma||this.a.Zc(),Do(this,t,0),function(e,t){if(!e.s){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.s=n.every((function(e){return"text"==e.type||!e.Ma&&!e.Pa&&e.Aa}))),e.s){for(n=No(e,t),e.h[n]||Eo(e,n).then(function(){this.f||this.a.Kd()}.bind(e)).catch(qt.ic),n=0;n<e.c.periods.length;++n)Eo(e,n).catch(qt.ic);e.a.sf&&e.a.sf()}}}(this,o))}.bind(e)).catch(function(e){this.f||this.m||(t.Ha=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==e.code?(t.Ha=!1,t.Da=null,Do(this,t,0)):3017==e.code?function(e,t,n){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.dd}))){var i=Math.round(100*e.l);if(20<i)e.l-=.2;else{if(!(4<i))return t.Ib=!0,e.m=!0,void e.a.onError(n);e.l-=.04}t.dd=!0}Do(e,t,4)}(this,t,e):(t.Ib=!0,e.severity=2,Oo(this,e)))}.bind(e))}(e,t,n,r,a),null)}(e,t);null!=n&&(Do(e,t,n),t.Ib=!1)}catch(t){return void Oo(e,t)}n=Array.from(e.b.values()),function(e,t){var n=No(e,t.stream);if(t.pa!=n){var i=t.pa,r=Array.from(e.b.values());r.every((function(e){return e.pa==i||Co(e)}))&&r.every(Po)&&Eo(e,i).then(function(){if(!this.f&&r.every(function(e){var t=Po(e),n=No(this,e.stream);return!!Co(e)||t&&e.pa==i&&n!=i}.bind(this))){var e=this.c.periods[i],t=this.a.Ld(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);var a=h(this.b.keys());for(t=a.next();!t.done;t=a.next())if(t=t.value,!n.has(t)&&"text"!=t)return void this.a.onError(new fe(2,5,5005));for(t=(a=h(Array.from(n.keys()))).next();!t.done;t=a.next())if(t=t.value,!this.b.has(t)){if("text"!=t)return void this.a.onError(new fe(2,5,5005));wo(this,null,null,n.get("text"),e.startTime),n.delete(t)}for(t=(e=h(Array.from(this.b.keys()))).next();!t.done;t=e.next())t=t.value,(a=n.get(t))?(yo(this,a,!1,0,!1),Do(this,this.b.get(t),0)):this.b.delete(t);this.a.Kd()}}.bind(e)).catch(qt.ic)}}(e,t),e.s&&n.every((function(e){return e.endOfStream}))&&e.a.I.endOfStream().then(function(){if(!this.f){var e=this.a.I.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(e)}}.bind(e))}}function xo(e,t,n){return t.pb&&t.Aa?(n=No(e,t.pb),e.c.periods[n].startTime+t.Aa.endTime):Math.max(n,t.Zd)}function Ao(e,t,n,i,r){if(t.Aa&&t.stream==t.pb)return Io(e,t,r,t.Aa.position+1);if(t.Aa?(n=No(e,t.pb),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.Aa.endTime-e.c.periods[r].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(i||n)-e.c.periods[r].startTime)),null==n)return null;var a=null;return null==i&&(a=Io(e,t,r,Math.max(0,n-1))),a||Io(e,t,r,n)}function Io(e,t,n,i){return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).Hb(),i=i.nb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?null:t):null}function Co(e){return"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Po(e){return!e.Ha&&null==e.Da&&!e.Ma&&!e.Pa}function Mo(e,t){var n=qa(e.c.periods,t+Wt);return n?e.c.periods.indexOf(n):0}function No(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=h(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=h(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function Ro(e,t,n){return n=Ir(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.rb.request(1,n),t.Kb=e,e.promise.then((function(e){return t.Kb=null,e.data}))}function Lo(e,t,n,i){return f((function r(){var a,o,s;return D(r,(function(r){switch(r.j){case 1:return t.Ma=!1,t.uc=!1,t.Zb=0,t.Pa=!0,i?(o=e.a.Sa(),s=e.a.I.Y(),a=e.a.I.remove(t.type,o+i,s)):a=Pn(e.a.I,t.type).then(function(){if(!this.f&&n)return this.a.I.flush(t.type)}.bind(e)),E(r,a,2);case 2:if(e.f)return r.return();t.pb=null,t.Aa=null,t.Pa=!1,t.endOfStream=!1,Do(e,t,0),k(r)}}))}))}function Do(e,t,n){t.Da=new ce((function(){return f((function n(){var i;return D(n,(function(n){switch(n.j){case 1:return S(n,2),E(n,So(e,t),4);case 4:A(n,0);break;case 2:i=I(n),e.a&&e.a.onError(i),k(n)}}))}))})).O(n)}function _o(e){null!=e.Da&&(e.Da.stop(),e.Da=null)}function Oo(e,t){de(e.G).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Uo(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,ad:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=ot(t)}catch(e){}throw new fe(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function jo(e,t,n,i){var r=new jo.b;Xe(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new jo.a,o={vd:!1,ge:!1};if(e=new me(e=jo.l(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.vd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new le((function(){o.ge=!0,a.abort()}));s.O(t/1e3),e.finally((function(){s.stop()}))}return e}function Bo(e,t,n,i){var r=new Bo.f,a=Date.now(),o=0;return new me(new Promise((function(s,u){for(var c in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){u(new fe(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=h(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=Uo(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){u(e)}},r.onerror=function(t){u(new fe(1,1,1002,e,t,n))},r.ontimeout=function(){u(new fe(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(c.toLowerCase(),t.headers[c]);r.send(t.body)})),(function(){return r.abort(),Promise.resolve()}))}function Fo(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ho(e,t){this.g=e,this.b=new Map,this.c=!1,this.f=t,this.a=new Fo}function Vo(e,t,n,i,r){var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,i);i=e.b.get(t)||Promise.resolve(),e.b.set(t,i.then((function(){return f((function t(){var i;return D(t,(function(t){switch(t.j){case 1:return E(t,function(e,t){return f((function n(){var i;return D(n,(function(n){switch(n.j){case 1:return E(n,e.g.request(1,t).promise,2);case 2:return i=n.o,n.return(i.data)}}))}))}(e,n),2);case 2:if(i=t.o,e.c)throw new fe(2,9,7001);e.a.close(a,i.byteLength);var o=e.a;return e.f(0==o.b?0:o.f/o.b,e.a.a),t.return(r(i))}}))}))})))}function qo(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new pe,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Ko(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function zo(e){this.b=e,this.a=[]}function Go(e,t){return Xo(e,t,"readonly")}function Wo(e,t){return Xo(e,t,"readwrite")}function Xo(e,t,n){var i=new qo(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){Ie(e.a,i)}),(function(){Ie(e.a,i)})),i}function Yo(e){this.a=new zo(e)}function $o(){this.a=new Map}function Jo(e,t,n){if(!(e=e.a.get(t)))throw new fe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new fe(2,9,9013,"Could not find cell with name "+n);return t}function Qo(e,t){Zo.set(e,t)}lo.prototype.destroy=function(){for(var e=h(this.b.values()),t=e.next();!t.done;t=e.next())_o(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},lo.prototype.configure=function(e){this.g=e,this.G=new he({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},lo.prototype.start=function(){var e=this;return f((function t(){var n,i,r;return D(t,(function(t){switch(t.j){case 1:return n=e.a.Sa(),i=Mo(e,n),(r=e.a.Ld(e.c.periods[i])).variant||r.text?E(t,wo(e,r.variant?r.variant.audio:null,r.variant?r.variant.video:null,r.text,n),2):t.return(new fe(2,5,5005));case 2:if(e.f)return t.return();e.a&&e.a.gf&&e.a.gf(),k(t)}}))}))},lo.prototype.M=function(e,t,n,i){var r=i.reader.bd(),a=i.reader.bd(),o=i.reader.F(),s=i.reader.F(),u=i.reader.F(),c=i.reader.F();i=i.reader.Xa(i.reader.K.byteLength-i.reader.ba()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.hf():this.a.onEvent(new Ee("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:c,messageData:i}})))},F("shaka.net.HttpFetchPlugin",jo),jo.l=function(e,t,n,i,r){return f((function a(){var o,s,u,c,l,h,d,p,m,g,v,y;return D(a,(function(a){switch(a.j){case 1:return o=jo.g,s=jo.c,h=l=0,d=Date.now(),S(a,2),E(a,o(e,n),4);case 4:return u=a.o,p=u.clone().body.getReader(),g=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,new s({start:function(e){!function t(){return f((function n(){var i,a;return D(n,(function(n){switch(n.j){case 1:return S(n,2),E(n,p.read(),4);case 4:i=n.o,A(n,3);break;case 2:return I(n),n.return();case 3:i.done||(l+=i.value.byteLength),(100<(a=Date.now())-d||i.done)&&(r(a-d,l-h,g-l),h=l,d=a),i.done?e.close():(e.enqueue(i.value),t()),k(n)}}))}))}()}}),E(a,u.arrayBuffer(),5);case 5:c=a.o,A(a,3);break;case 2:if(v=I(a),i.vd)throw new fe(1,1,7001,e,t);if(i.ge)throw new fe(1,1,1003,e,t);throw new fe(1,1,1002,e,v,t);case 3:return y={},u.headers.forEach((function(e,t){y[t.trim()]=e})),a.return(Uo(y,c,u.status,e,u.url,t))}}))}))},jo.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},jo.isSupported=jo.isSupported,jo.g=e.fetch,jo.a=e.AbortController,jo.c=e.ReadableStream,jo.b=e.Headers,jo.isSupported()&&(De("http",jo,2),De("https",jo,2)),F("shaka.net.HttpXHRPlugin",Bo),Bo.f=e.XMLHttpRequest,De("http",Bo,1),De("https",Bo,1),Fo.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Ho.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},qo.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},qo.prototype.store=function(){return this.b},qo.prototype.promise=function(){return this.a},zo.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},Yo.prototype.destroy=function(){return this.a.destroy()},Yo.prototype.getAll=function(){var e=this;return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return n=Go(e.a,"session-ids"),i=[],E(t,Ko(n,(function(e,t){i.push(t)})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(i)}}))}))},Yo.prototype.add=function(e){for(var t=Wo(this.a,"session-ids"),n=t.store(),i=(e=h(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Yo.prototype.remove=function(e){var t=this;return f((function n(){var i;return D(n,(function(n){switch(n.j){case 1:return E(n,Ko(i=Wo(t.a,"session-ids"),(function(t,n,i){0<=e.indexOf(n.sessionId)&&i.delete()})),2);case 2:return E(n,i.promise(),0)}}))}))},$o.prototype.destroy=function(){for(var e=[],t=h(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},$o.prototype.init=function(){var e=this;Zo.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=h(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},$o.prototype.erase=function(){var e=this;return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),(i=0<n.length)||Zo.forEach((function(e){(e=e())&&n.push(e)})),E(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!i)return E(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},F("shaka.offline.StorageMuxer.register",Qo),F("shaka.offline.StorageMuxer.unregister",(function(e){Zo.delete(e)}));var Zo=new Map;function es(e){this.a=new zo(e)}function ts(e){return Promise.reject(new fe(2,9,9011,"Cannot add new value to "+e))}function ns(e,t,n,i){var r=(e=Wo(e.a,t)).store();return n.forEach((function(e){r.delete(e).onsuccess=function(){return i(e)}})),e.promise()}function is(e,t,n){var i=(e=Go(e.a,t)).store(),r={},a=[];return n.forEach((function(e){i.get(e).onsuccess=function(t){null==(t=t.target.result)&&a.push(e),r[e]=t}})),e.promise().then((function(){return a.length?Promise.reject(new fe(2,9,9012,"Could not find values for "+a)):n.map((function(e){return r[e]}))}))}function rs(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(as),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function as(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var i=0;if(n.length&&!t.length){var r=i++;n.forEach((function(e){e.variantIds.push(r)}))}if(!n.length&&t.length){var a=i++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&t.forEach((function(e){n.forEach((function(t){var n=i++;e.variantIds.push(n),t.variantIds.push(n)}))}))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(os)}}function os(e){var t=e.$e?cs(e.$e):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(ss),variantIds:e.variantIds}}function ss(e){var t=cs(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function us(e){return{data:e.data}}function cs(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new fe(2,9,9004,"Could not parse uri "+e)}function ls(e,t,n,i){this.a=new zo(e),this.c=t,this.b=n,this.f=i}function hs(e,t,n){if(e.f)return Promise.reject(new fe(1,9,9011,"Cannot add new value to "+t));var i=(e=Wo(e.a,t)).store(),r=[];return n.forEach((function(e){i.add(e).onsuccess=function(e){r.push(e.target.result)}})),e.promise().then((function(){return r}))}function ds(e,t,n,i){var r=(e=Wo(e.a,t)).store();return n.forEach((function(e){r.delete(e).onsuccess=function(){return i(e)}})),e.promise()}function fs(e,t,n){var i=(e=Go(e.a,t)).store(),r={},a=[];return n.forEach((function(e){var t=i.get(e);t.onsuccess=function(){null==t.result&&a.push(e),r[e]=t.result}})),e.promise().then((function(){return a.length?Promise.reject(new fe(1,9,9012,"Could not find values for "+a)):n.map((function(e){return r[e]}))}))}function ps(){this.g=this.c=this.b=this.a=this.f=null}function ms(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function gs(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new ms(t,n,i,Number(e[4])):null}function vs(e,t){this.b=e,this.a=t}function ys(e,t,n){var i=t.streams.filter((function(e){return"audio"==e.contentType})),r=t.streams.filter((function(e){return"video"==e.contentType}));return i=function(e,t,n){for(var i=new Set,r=h(t),a=r.next();!a.done;a=r.next()){var o=h(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(r=h(n),a=r.next();!a.done;a=r.next())for(o=h(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(r=new Map,i=h(i),a=i.next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=h(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=bs(e,i),o=h(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=h(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=bs(e,i),a=h(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(e,i,r),r=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return bs(e,t)})),t.streams.forEach((function(i){i=i.segments.map((function(t,n){return ws(e,n,t)})),n.sb(i,t.startTime)})),{startTime:t.startTime,variants:Array.from(i.values()),textStreams:r}}function bs(e,t){var n=t.segments.map((function(t,n){return ws(e,n,t)})),i=new cr(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return i.find(e)},getSegmentReference:function(e){return i.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new ms("segment",e.b,e.a,t);return new or((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function ws(e,t,n){var i=new ms("segment",e.b,e.a,n.dataKey);return new sr(t,n.startTime,n.endTime,(function(){return[i.toString()]}),0,null)}function Ts(){this.a=null}function Es(e){var t=gs(e);return t&&"manifest"==t.a?Es.h(e):t&&"segment"==t.a?Es.i(t.key(),t):ge(new fe(2,1,9004,e))}function ks(e,t,n){return f((function i(){var r,a,o,s,u,c;return D(i,(function(i){switch(i.j){case 1:r=[];for(var l=[],d=h(n),p=d.next();!p.done;p=d.next()){p=p.value;for(var m=!1,g=h(l),v=g.next();!v.done;v=g.next())if(Ss((v=v.value).info,p)){v.sessionIds.push(p.sessionId),m=!0;break}m||l.push({info:p,sessionIds:[p.sessionId]})}a=h(l),o=a.next();case 2:if(o.done){i.A(4);break}return s=o.value,u=function(e,t,n){return f((function i(){var r,a;return D(i,(function(i){switch(i.j){case 1:return r=new vt({rb:t,onError:function(){},kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),S(i,2),r.configure(e),E(i,function(e,t,n,i,r,a){var o=new Map;return o.set(t,{audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}]}),xt(e,o)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(i,3);break;case 2:return I(i),E(i,r.destroy(),5);case 5:return i.return([]);case 3:return S(i,6),E(i,wt(r),8);case 8:A(i,7);break;case 6:return I(i),E(i,r.destroy(),9);case 9:return i.return([]);case 7:return a=[],E(i,Promise.all(n.sessionIds.map((function(e){return f((function t(){return D(t,(function(t){switch(t.j){case 1:return S(t,2),E(t,function(e,t){return f((function n(){var i,r,a;return D(n,(function(n){switch(n.j){case 1:return E(n,At(e,t),2);case 2:return(i=n.o)?(r=[],(a=e.b.get(i))&&(a.xa=new pe,r.push(a.xa)),r.push(i.remove()),E(n,Promise.all(r),0)):n.return()}}))}))}(r,e),4);case 4:a.push(e),A(t,0);break;case 2:I(t),k(t)}}))}))}))),10);case 10:return E(i,r.destroy(),11);case 11:return i.return(a)}}))}))}(e,t,s),E(i,u,5);case 5:c=i.o,r=r.concat(c),o=a.next(),i.A(2);break;case 4:return i.return(r)}}))}))}function Ss(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ce(e.audioCapabilities,t.audioCapabilities,n)&&Ce(e.videoCapabilities,t.videoCapabilities,n)}function xs(e,t){var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},i=this;this.g=t,this.c=e,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then((function(){return function(e){return f((function t(){return D(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.f.length||e.a&&!e.a.Ta)var n=!1;else{e.a&&(e.a.ta.Wa(),e.a=null);var i=(n=e.f.shift()).create(e.i);i?(n.ta.tb(),e.a={node:i.node,payload:i.payload,Ta:i.Ta,ta:n.ta}):n.ta.lc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return e.c=e.g.Pe(e.c,e.i,e.a.node,e.a.payload),S(t,2),e.b=e.g.ze(e.c,e.i,e.a.payload),E(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.jc(),e.a=null),A(t,0);break;case 2:return 7001==(n=I(t)).code?e.a.ta.Wa():e.a.ta.onError(n),e.a=null,e.b=null,i=e,E(t,e.g.handleError(e.i,n),5);case 5:i.c=t.o,k(t)}}))}))}(e):(e.g.ff(e.c),e.h=new pe,n=e.h),E(t,n,1)}t.A(0)}}))}))}(i)}))}function As(e,t){var n={tb:function(){},jc:function(){},Wa:function(){},onError:function(){},lc:function(){},sg:function(){}};return e.f.push({create:t,ta:n}),e.b&&e.b.abort(),Is(e),n}function Is(e){e.h&&(e.h.resolve(),e.h=null)}function Cs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Ps(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function Ms(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Ns(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,c=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===c||o?delete e[a]:e[a]=xe(c):c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=xe(c)),u=Ns(e[a],t[a],c,i,u),s=s&&u):typeof t[a]!=typeof c||null==t[a]||t[a].constructor!=c.constructor?s=!1:e[a]=t[a]:s=!1}return s}function Rs(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Ls(){}function Ds(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e){return e},fairPlayTransform:!0},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};tt("Web0S")&&(r.stallEnabled=!1);var a={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:Zn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Un(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return _n(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=h(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage)},o}function _s(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ns(e,t,n||Ds(),i,"")}function Os(){this.a=null,this.b=[]}function Us(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function js(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=h(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Bs(){this.b=this.c=null,this.a=[]}function Fs(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new Os,this.c=new Bs}function Hs(t,n){var i=this;Se.call(this),this.h=Su,this.a=null,this.eb=!1,this.i=new Ve,this.vc=this.l=this.Bb=this.c=this.m=this.f=this.Sb=this.P=this.Tb=this.W=this.gb=this.s=this.D=this.g=this.G=null,this.Hd=1e9,this.Wb=new Set,this.ib=!0,this.Ea=null,this.Dd=!1,this.Bd=0,this.na=null,this.$=new Ea,this.b=$s(this),this.Xb={width:1/0,height:1/0},this.v=null,this.Ub=new Na(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ma=this.b.preferredTextLanguage,this.cb=this.b.preferredTextRole,n&&n(this),this.G=function(e){return new Ne((function(t,n){e.l&&e.l.segmentDownloaded(t,n)}))}(this),this.i.w(e,"online",(function(){i.gd()})),this.C={name:"detach"},this.M={name:"attach"},this.Fa={name:"unload"},this.Ec={name:"manifest-parser"},this.Cc={name:"manifest"},this.fb={name:"media-source"},this.wc={name:"drm-engine"},this.T={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.hb={name:"src-equals"};var r=new Map;r.set(this.M,(function(e,t){return be(function(e,t,n){return null==t.u&&(t.u=n.u,e.i.w(t.u,"error",(function(){var t=hu(e);t&&e.Ka(t)}))),e.a=t.u,Promise.resolve()}(i,e,t))})),r.set(this.C,(function(e){return e.u&&(i.i.ea(e.u,"error"),e.u=null),i.a=null,be(e=Promise.resolve())})),r.set(this.Fa,(function(e){return be(zs(i,e))})),r.set(this.fb,(function(t){return be(t=function(t,n){return f((function i(){var r,a,o,s;return D(i,(function(i){switch(i.j){case 1:return r=e.muxjs?new Ut:new jt,a=t.b.textDisplayFactory,o=new a,t.xc=a,E(i,(s=new wn(n.u,r,o)).s,2);case 2:t.D=s,k(i)}}))}))}(i,t))})),r.set(this.Ec,(function(e,t){return be(function(e,t,n){return f((function i(){var r,a,o;return D(i,(function(i){switch(i.j){case 1:if(t.ya=n.ya,t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,a=e.G,e.Bb=r,t.ya){e.m=t.ya(),i.A(2);break}return o=e,E(i,xr.create(r,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.m=i.o;case 2:e.m.configure(e.b.manifest),k(i)}}))}))}(i,e,t))})),r.set(this.Cc,(function(e){return function(e,t){var n=t.uri,i=e.G;e.Sb=new ao,function(e,t){e.b=t}(e.Sb,(function(t){lu(e,"timelineregionadded",t)}));var r={networkingEngine:i,filterNewPeriod:function(t){return e.Fc(t)},filterAllPeriods:function(t){return Js(e,t)},onTimelineRegionAdded:function(t){var n=e.Sb;e:{for(var i=h(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ka(t)}};return new me(Promise.resolve().then((function(){return f((function t(){var i;return D(t,(function(t){switch(t.j){case 1:return i=e,E(t,e.m.start(n,r),2);case 2:if(i.c=t.o,e.dispatchEvent(new Ee("manifestparsed")),0==e.c.periods.length)throw new fe(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}(e.c.periods),k(t)}}))}))})),(function(){return e.m.stop()}))}(i,e)})),r.set(this.wc,(function(){return be(function(e){return f((function t(){return D(t,(function(t){switch(t.j){case 1:return e.g=new vt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){du(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),E(t,yt(e.g,Va(e.c.periods),e.c.offlineSessionIds),2);case 2:Js(e,e.c.periods),k(t)}}))}))}(i))})),r.set(this.T,(function(e,t){return be(function(e,t,n){return f((function i(){var r,a,o,s,u,c,l,d,f;return D(i,(function(i){switch(i.j){case 1:return t.startTime=n.startTime,r=t.u,a=t.uri,e.Bb=a,e.v=new Fs,o=function(){return tu(e)},s=function(){var t=e.a.playbackRate;0!=t&&e.W.set(t)},e.i.w(r,"playing",o),e.i.w(r,"pause",o),e.i.w(r,"ended",o),e.i.w(r,"ratechange",s),u=e.b.abrFactory,e.l&&e.vc==u||(e.vc=u,e.l=new u,e.l.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=h(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=h((o=o.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!r.has(u)){var c={id:e.Hd++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(u),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,closedCaptions:null};r.set(u,c)}for(r=h(r.values()),a=r.next();!a.done;a=r.next())i.textStreams.push(a.value)}}(e,e.c.periods),e.Ub=new Na(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.ma=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.V()||e.de(t)),n<e.Y()&&(e.V()||e.wa(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),E(i,e.g.Cb(r),2);case 2:return e.l.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i;e:{for(var r=h(e.c.periods),a=r.next();!a.done;a=r.next())if((a=a.value).variants.includes(t)){r=a;break e}r=null}Xs(e,r,t,!0),e.f&&(vo(e.f,t,n,i),ru(e))})),e.s=function(e,t){return new to(e.a,e.c,e.b.streaming,t,(function(){e.gb&&Ha(e.gb,!0),e.f&&function(e){function t(t){var r=e.a.I;return"text"==t?t=null!=(t=r.a).a&&null!=t.b&&(n>=t.a&&n<t.b):t=Ft(t=In(r,t),n,i),t}var n=e.a.Sa(),i=e.g.smallGapLimit,r=Mo(e,n);if(We(e.b.values(),(function(e){return e.pa==r})))for(var a=h(e.b.keys()),o=a.next();!o.done;o=a.next())t(o=o.value)||bo(e,e.b.get(o));else We(e.b.keys(),t)||e.b.forEach((function(t){bo(e,t)}))}(e.f)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.gb=function(e){var t=new Ka(e.c);!function(e,t){e.b=t}(t,(function(){au(e)}));var n=new oo(e.Sb);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(n,(function(t){lu(e,"timelineregionenter",t)}),(function(t){lu(e,"timelineregionexit",t)}),(function(t,n){n||(lu(e,"timelineregionenter",t),lu(e,"timelineregionexit",t))}));var i=new Fa(e.a);return i.a.add(t),i.a.add(n),i}(e),e.W=new za({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),c=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Gs(e,c),e.f=function(e){return new lo(e.c,{Sa:function(){return e.s.h()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},I:e.D,rb:e.G,Ld:e.df.bind(e),Kd:e.te.bind(e),onError:e.Ka.bind(e),onEvent:function(t){return e.dispatchEvent(t)},hf:e.jf.bind(e),Zc:e.qf.bind(e)})}(e),e.f.configure(e.b.streaming),function(e){function t(e){var t="";e.video&&(t=Je(e.video.codecs)[0]);var n="";return e.audio&&(n=Je(e.audio.codecs)[0]),t+"-"+n}var n=e.c.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);n=Yn(n,e.b.preferredAudioChannelCount);var i=new ke;n.forEach((function(e){var n=t(e);i.push(n,e)}));var r=null,a=1/0;i.forEach((function(e,t){var n=0,i=0;t.forEach((function(e){n+=e.bandwidth||0,++i}));var o=n/i;o<a&&(r=e,a=o)})),e.c.periods.forEach((function(e){e.variants=e.variants.filter((function(e){return t(e)==r}))}))}(e),e.h=xu,e.dispatchEvent(new Ee("streaming")),E(i,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(l=e.s.h(),d=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var i=ho(e.f),r=fo(e.f),a=yu(e);return i=n(i,t),null!=(r=n(r,t))&&null!=i?Math.max(r,i):null!=r?r:null!=i?i:t}(e,l),e.s.m(d)),e.c.periods.forEach(e.Fc.bind(e)),au(e),ru(e),(f=yu(e)||e.c.periods[0]).variants.some((function(e){return e.primary})),nu(e,f.variants),e.i.da(r,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.od})),k(i)}}))}))}(i,e,t))})),r.set(this.Ic,(function(e){return be(e=function(e,t){return f((function n(){var i,r;return D(n,(function(n){switch(n.j){case 1:return i=Gt,e.g=new vt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){du(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},E(n,yt(e.g,[r],[]),2);case 2:return E(n,e.g.Cb(t.u),0)}}))}))}(i,e))})),r.set(this.hb,(function(e,t){return function(e,t,n){function i(){return tu(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Bb=t.uri,e.v=new Fs,e.s=new eo(t.u),null!=t.startTime&&e.s.m(t.startTime),e.W=new za({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),Gs(e,e.b.streaming.rebufferingGoal),e.i.w(t.u,"playing",i),e.i.w(t.u,"pause",i),e.i.w(t.u,"ended",i),e.i.da(t.u,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.od})),e.a.audioTracks&&(e.i.w(e.a.audioTracks,"addtrack",(function(){return au(e)})),e.i.w(e.a.audioTracks,"removetrack",(function(){return au(e)}))),e.a.textTracks){var r=e.a.textTracks;e.i.w(r,"addtrack",(function(){return au(e)})),e.i.w(r,"removetrack",(function(){return au(e)}))}t.u.src=t.uri,e.h=Au,e.dispatchEvent(new Ee("streaming"));var a=new pe;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?a.resolve():e.a.error?a.reject(hu(e)):(e.i.da(e.a,"loadeddata",(function(){a.resolve()})),e.i.da(e.a,"error",(function(){a.reject(hu(e))}))),new me(a,(function(){return a.reject(new fe(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.jb=new xs(this.C,{Pe:function(e,t,n,r){var a=null;return e==i.C&&(a=n==i.C?i.C:i.M),e==i.M&&(a=n==i.C||t.u!=r.u?i.C:n==i.M?i.M:n==i.fb||n==i.T?i.fb:n==i.hb?i.Ic:null),e==i.fb&&(a=n==i.T&&t.u==r.u?i.Ec:i.Fa),e==i.Ec&&(a=Tu(i.T,i.Cc,i.Fa,n,t,r)),e==i.Cc&&(a=Tu(i.T,i.wc,i.Fa,n,t,r)),e==i.wc&&(a=Tu(i.T,i.T,i.Fa,n,t,r)),e==i.Ic&&(a=n==i.hb&&t.u==r.u?i.hb:i.Fa),e!=i.T&&e!=i.hb||(a=i.Fa),e==i.Fa&&(a=r.u&&t.u==r.u?i.M:i.C),a},ze:function(e,t,n){return i.dispatchEvent(new Ee("onstatechange",{state:e.name})),r.get(e)(t,n)},handleError:function(e){return f((function t(){return D(t,(function(t){switch(t.j){case 1:return E(t,zs(i,e),2);case 2:return t.return(e.u?i.M:i.C)}}))}))},ff:function(e){i.dispatchEvent(new Ee("onstateidle",{state:e.name}))}}),t&&this.Cb(t,!0)}(n=es.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return ts("segment")},n.removeSegments=function(e,t){return ns(this,"segment",e,t)},n.getSegments=function(e){return is(this,"segment",e).then((function(e){return e.map(us)}))},n.addManifests=function(){return ts("manifest")},n.updateManifestExpiration=function(e,t){var n=Wo(this.a,"manifest"),i=n.store(),r=new pe;return i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new fe(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return r}))},n.removeManifests=function(e,t){return ns(this,"manifest",e,t)},n.getManifests=function(e){return is(this,"manifest",e).then((function(e){return e.map(rs)}))},n.getAllManifests=function(){var e=this;return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return n=Go(e.a,"manifest"),i=new Map,E(t,Ko(n,(function(e,t){i.set(e,rs(t))})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(i)}}))}))},(n=ls.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return hs(this,this.c,e)},n.removeSegments=function(e,t){return ds(this,this.c,e,t)},n.getSegments=function(e){return fs(this,this.c,e)},n.addManifests=function(e){return hs(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=Wo(this.a,this.b),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},n.removeManifests=function(e,t){return ds(this,this.b,e,t)},n.getManifests=function(e){return fs(this,this.b,e)},n.getAllManifests=function(){var e=this;return f((function t(){var n,i;return D(t,(function(t){switch(t.j){case 1:return n=Go(e.a,e.b),i=new Map,E(t,Ko(n,(function(e,t){i.set(e,t)})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(i)}}))}))},(n=ps.prototype).init=function(){var t=this,n=new pe,i=e.indexedDB.open("shaka_offline_db",4);return i.onsuccess=function(e){e=e.target.result,t.f=e;var i=e.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new es(e):null,t.a=i,i=(i=e.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?new ls(e,"segment-v2","manifest-v2",!0):null,t.b=i,i=(i=e.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?new ls(e,"segment-v3","manifest-v3",!1):null,t.c=i,e=e.objectStoreNames.contains("session-ids")?new Yo(e):null,t.g=e,n.resolve()},i.onupgradeneeded=function(e){e=e.target.result;for(var t=h(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new fe(2,9,9001,i.error)),e.preventDefault()},n},n.destroy=function(){var e=this;return f((function t(){return D(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return E(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),k(t)}}))}))},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var t=this;return f((function n(){return D(n,(function(n){switch(n.j){case 1:if(!t.a){n.A(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.A(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.A(6);break}return E(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),E(n,function(){var t=new pe,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new fe(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,E(n,t.init(),0)}}))}))},Qo("idb",(function(){return e.indexedDB?new ps:null})),ms.prototype.ua=function(){return this.g},ms.prototype.aa=function(){return this.f},ms.prototype.key=function(){return this.c},ms.prototype.toString=function(){return this.b},(n=Ts.prototype).configure=function(){},n.start=function(e){var t=this;return f((function n(){var i,r,a,o,s;return D(n,(function(n){switch(n.j){case 1:return i=gs(e),t.a=i,null==i||"manifest"!=i.a?n.return(Promise.reject(new fe(2,1,9004,i))):(r=new $o,x(n,2),E(n,r.init(),4));case 4:return E(n,Jo(r,i.ua(),i.aa()),5);case 5:return E(n,n.o.getManifests([i.key()]),6);case 6:return a=n.o,o=a[0],s=new vs(i.ua(),i.aa()),n.return(function(e,t){var n=new Ar(null,0);n.wa(t.duration);var i=t.periods.map((function(t){return ys(e,t,n)})),r=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&i.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=r}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:i}}(s,o));case 2:return C(n),E(n,r.destroy(),7);case 7:P(n,0)}}))}))},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this;return f((function i(){var r,a,o,s,u,c,l;return D(i,(function(i){switch(i.j){case 1:return r=n.a,a=new $o,S(i,2,3),E(i,a.init(),5);case 5:return E(i,Jo(a,r.ua(),r.aa()),6);case 6:return E(i,(o=i.o).getManifests([r.key()]),7);case 7:if(s=i.o,u=s[0],c=u.sessionIds.includes(e),l=null==u.expiration||u.expiration>t,!c||!l){i.A(3);break}return E(i,o.updateManifestExpiration(r.key(),t),3);case 3:return C(i),E(i,a.destroy(),10);case 10:P(i,0);break;case 2:I(i),i.A(3)}}))}))},xr.Nb("application/x-offline-manifest",Ts),F("shaka.offline.OfflineScheme",Es),Es.h=function(e){return ye(e={uri:e,ad:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},Es.i=function(e,t){var n=new $o;return ye(void 0).U((function(){return n.init()})).U((function(){return Jo(n,t.ua(),t.aa())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,ad:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},De("offline",Es),xs.prototype.destroy=function(){var e=this;return f((function t(){return D(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),Is(e),E(t,e.m,2);case 2:e.a&&e.a.ta.Wa();for(var n=h(e.f),i=n.next();!i.done;i=n.next())i.value.ta.Wa();e.a=null,e.f=[],e.g=null,k(t)}}))}))},F("shaka.text.SimpleTextDisplayer",Cs),Cs.prototype.remove=function(e,t){return!!this.a&&(Ms(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},Cs.prototype.remove=Cs.prototype.remove,Cs.prototype.append=function(e){for(var t=Ps,n=[],i=0;i<e.length;i++){var r=t(e[i]);r&&n.push(r)}n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},Cs.prototype.append=Cs.prototype.append,Cs.prototype.destroy=function(){return this.a&&Ms(this.a,(function(){return!0})),this.a=null,Promise.resolve()},Cs.prototype.destroy=Cs.prototype.destroy,Cs.prototype.isTextVisible=function(){return"showing"==this.a.mode},Cs.prototype.isTextVisible=Cs.prototype.isTextVisible,Cs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Cs.prototype.setTextVisibility=Cs.prototype.setTextVisibility,F("shaka.util.ConfigUtils.mergeConfigObjects",Ns),F("shaka.util.ConfigUtils.convertToConfigObject",Rs),F("shaka.util.PlayerConfiguration",Ls),Ls.mergeConfigObjects=_s,H(Hs,Se),F("shaka.Player",Hs),Hs.prototype.destroy=function(){var e=this;return f((function t(){var n;return D(t,(function(t){switch(t.j){case 1:return e.h==ku?t.return():(e.h=ku,n=As(e.jb,(function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}})),E(t,new Promise((function(e){n.tb=function(){},n.jc=function(){e()},n.Wa=function(){e()},n.onError=function(){e()},n.lc=function(){e()}})),2));case 2:return E(t,e.jb.destroy(),3);case 3:if(e.i&&(e.i.release(),e.i=null),e.vc=null,e.l=null,e.b=null,!e.G){t.A(0);break}return E(t,e.G.destroy(),5);case 5:e.G=null,k(t)}}))}))},Hs.prototype.destroy=Hs.prototype.destroy,Hs.version="v2.5.5";var Vs=["2","5"];ai=new function(e){this.a=e,this.c=ii,this.b=ri}(new ti(Number(Vs[0]),Number(Vs[1])));var qs=["output-restricted","internal-error"],Ks={};function zs(e,t){return f((function n(){return D(n,(function(n){switch(n.j){case 1:if(e.h!=ku&&(e.h=Su),e.dispatchEvent(new Ee("unloading")),t.ya=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.i.ea(t.u,"loadeddata"),e.i.ea(t.u,"playing"),e.i.ea(t.u,"pause"),e.i.ea(t.u,"ended"),e.i.ea(t.u,"ratechange")),e.gb&&(e.gb.release(),e.gb=null),e.Tb&&(e.Tb.stop(),e.Tb=null),!e.m){n.A(2);break}return E(n,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.l){n.A(4);break}return E(n,e.l.stop(),4);case 4:if(!e.f){n.A(6);break}return E(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.s&&(e.s.release(),e.s=null),!e.D){n.A(8);break}return E(n,e.D.destroy(),9);case 9:e.D=null;case 8:if(t.u&&t.u.src&&(t.u.removeAttribute("src"),t.u.load()),!e.g){n.A(10);break}return E(n,e.g.destroy(),11);case 11:e.g=null;case 10:e.$.a.clear(),e.Bb=null,e.P=null,e.Wb.clear(),e.c=null,e.v=null,e.xc=null,e.ib=!0,eu(e),k(n)}}))}))}function Gs(e,t){e.P=new Ra(t,Math.min(.5,t/2)),e.P.a=La,eu(e),e.Tb=new le((function(){switch(e.h){case Au:var t=!!e.a.ended||Bt(e.a.buffered)>=e.a.duration-.1;break;case xu:e:if(e.a.ended||Sn(e.D))t=!0;else{if(e.c.presentationTimeline.V()){var n=e.c.presentationTimeline.nb();if(Bt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=Ht(e.a.buffered,e.a.currentTime),r=t,a=(n=e.P).b.get(n.a);t=n.a,i=r||i>=a?Da:La,n.a=i,t!=i&&eu(e)})).La(.25)}function Ws(e){if(e.m&&e.m.configure(e.b.manifest),e.g&&e.g.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Fc.bind(e))}catch(t){e.Ka(t)}var t=ho(e.f),n=fo(e.f),i=yu(e);t=Qn(t,n,i.variants),e.l&&t&&t.allowedByApplication&&t.allowedByKeySystem?nu(e,i.variants):iu(e,i)}if(e.D&&(i=e.b.textDisplayFactory,e.xc!=i)){t=new i;var r=(n=e.D).g;n.g=t,r&&(t.setTextVisibility(r.isTextVisible()),r.destroy()),n.a&&(n.a.c=t),e.xc=i,e.f&&((t=(i=e.f).b.get("text"))&&yo(i,t.stream,!0,0,!0))}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.ib?e.l.enable():e.l.disable(),cu(e))}function Xs(e,t,n,i){Sa(e.$,t).variant=n,(e=e.v.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function Ys(e,t,n,i){ka(e.$,t,n),(e=e.v.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function $s(e){var t=Ds();return t.streaming.failureCallback=function(t){e.V()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.gd())},t.textDisplayFactory=function(){return new Cs(e.a)},t}function Js(e,t){var n=e.f?ho(e.f):null,i=e.f?fo(e.f):null;if(t.forEach(Hn.bind(null,e.g,n,i)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some(Xn)}))))throw new fe(2,4,4032);if(n<t.length)throw new fe(2,4,4011);t.forEach(function(e){Fn(e.variants,this.b.restrictions,this.Xb)&&this.f&&yu(this)==e&&au(this),pu(this,e.variants)}.bind(e))}function Qs(e,t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.ib?(e.Ea=t,e.Dd=n,e.Bd=i):(vo(e.f,t,n,i),ou(e))}function Zs(e,t){e.ib?e.na=t:(yo(e.f,t,!0,0,!1),su(e))}function eu(e){var t=e.Oc();if(e.v&&e.P&&e.s){var n=e.W;n.f=t,Ga(n),tu(e)}e.dispatchEvent(new Ee("buffering",{buffering:t}))}function tu(e){if(e.v&&e.P){var t=e.v.a;e.P.a==La?Us(t,"buffering"):e.a.paused?Us(t,"paused"):e.a.ended?Us(t,"ended"):Us(t,"playing")}}function nu(e,t){try{pu(e,t)}catch(t){return e.Ka(t),null}var n=t.filter((function(e){return Xn(e)}));return n=e.Ub.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function iu(e,t){var n=nu(e,t.variants);n&&(Xs(e,t,n,!0),Qs(e,n,!0)),(n=$n(t.textStreams,e.ma,e.cb)[0]||null)&&(e.b.streaming.alwaysStreamText||e.gc())&&(Ys(e,t,n,!0),Zs(e,n)),ru(e)}function ru(e){mu(e,new Ee("adaptation"))}function au(e){mu(e,new Ee("trackschanged"))}function ou(e){mu(e,new Ee("variantchanged"))}function su(e){mu(e,new Ee("textchanged"))}function uu(e){mu(e,new Ee("texttrackvisibility"))}function cu(e){mu(e,new Ee("abrstatuschanged",{rg:e.b.abr.enabled}))}function lu(e,t,n){e.dispatchEvent(new Ee(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function hu(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new fe(2,3,3016,t,n,e.a.error.message)}function du(e,t){if(e.f){var n=yu(e),i=!1,r=Object.keys(t),a=1==r.length&&"00"==r[0];r.length&&n.variants.forEach((function(e){(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t})(e).forEach((function(n){var r=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!qs.includes(n)),r!=e.allowedByKeySystem&&(i=!0)}))})),(r=Qn(r=ho(e.f),fo(e.f),n.variants))&&!r.allowedByKeySystem&&iu(e,n),i&&(au(e),nu(e,n.variants))}}function fu(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),e.dispatchEvent(new Ee("expirationupdated"))}function pu(e,t){var n=e.g?Ye(e.g.T):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=[],s=[],u=h(t),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var d=(l=h(l)).next();!d.done;d=l.next())if((d=d.value).keyId){var f=n[i?"00":d.keyId];f?qs.includes(f)&&(s.includes(f)||s.push(f)):o.includes(d.keyId)||o.push(d.keyId)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new fe(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function mu(e,t){f((function n(){return D(n,(function(n){switch(n.j){case 1:return E(n,Promise.resolve(),2);case 2:e.h!=ku&&e.dispatchEvent(t),k(n)}}))}))}function gu(e){for(var t=new Set,n=(e=h(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(_n(n.language)):t.add("und");return t}function vu(e){for(var t=new Map,n=(e=h(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=_n(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=h(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function yu(e){for(var t=e.s.h(),n=null,i=(e=h(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function bu(e){var t=yu(e);return Sa(e.$,t).variant}function wu(){return new fe(2,7,7e3)}function Tu(e,t,n,i,r,a){return i==e&&r.u==a.u&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.ya==a.ya?t:n}function Eu(e){return new Promise((function(t,n){e.Wa=function(){return n(wu())},e.jc=function(){return t()},e.onError=function(e){return n(e)},e.lc=function(){return n(wu())}}))}Hs.registerSupportPlugin=function(e,t){Ks[e]=t},Hs.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!Ze()||et("application/x-mpegurl"))},Hs.probeSupport=function(){return Pt().then((function(e){for(var t=xr.Af(),n={},i=h('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=Ze()?!!vn(r)||(MediaSource.isTypeSupported(r)||Yt(r)):et(r);var a=r.split(";")[0];n[a]=n[a]||n[r]}for(var o in e={manifest:t,media:n,drm:e},Ks)e[o]=Ks[o]();return e}))},Hs.prototype.Cb=function(e,t){if(t=void 0===t||t,this.h==ku)return Promise.reject(wu());var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};n.u=e,Ze()||(t=!1);var i=t?this.fb:this.M,r=As(this.jb,(function(){return{node:i,payload:n,Ta:!1}}));return r.tb=function(){},Eu(r)},Hs.prototype.attach=Hs.prototype.Cb,Hs.prototype.detach=function(){var e=this;if(this.h==ku)return Promise.reject(wu());var t=As(this.jb,(function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}}));return t.tb=function(){},Eu(t)},Hs.prototype.detach=Hs.prototype.detach,Hs.prototype.rd=function(e){var t=this;if(e=void 0===e||e,this.h==ku)return Promise.reject(wu());Ze()||(e=!1);var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},i=As(this.jb,(function(i){var r=i.u&&e?t.fb:i.u?t.M:t.C;return n.u=i.u,{node:r,payload:n,Ta:!1}}));return i.tb=function(){},Eu(i)},Hs.prototype.unload=Hs.prototype.rd,Hs.prototype.load=function(e,t,n){if(this.h==ku)return Promise.reject(wu());this.dispatchEvent(new Ee("loading"));var i={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};i.uri=e,i.od=Date.now()/1e3,n&&"string"!=typeof n&&(ni("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.ya=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e){if(e.ya)return!1;if(!Ze())return!0;var t=e.mimeType;return e=e.uri||"",t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[xr.getExtension(e)]),!!t&&(!!et(t)&&(!xr.isSupported(e,t)||!!navigator.vendor&&navigator.vendor.includes("Apple")))}(i)?this.hb:this.T,a=As(this.jb,(function(e){return null==e.u?null:(i.u=e.u,{node:r,payload:i,Ta:!0})}));return a.tb=function(){},new Promise((function(e,t){a.lc=function(){return t(new fe(2,7,7002))},a.jc=function(){return e()},a.Wa=function(){return t(wu())},a.onError=function(e){return t(e)}}))},Hs.prototype.load=Hs.prototype.load,Hs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Rs(e,t));var n=_s(this.b,e,$s(this));return Ws(this),n},Hs.prototype.configure=Hs.prototype.configure,Hs.prototype.getConfiguration=function(){var e=$s(this);return _s(e,this.b,$s(this)),e},Hs.prototype.getConfiguration=Hs.prototype.getConfiguration,Hs.prototype.If=function(){for(var e in this.b)delete this.b[e];_s(this.b,$s(this),$s(this)),Ws(this)},Hs.prototype.resetConfiguration=Hs.prototype.If,Hs.prototype.Je=function(){return this.h},Hs.prototype.getLoadMode=Hs.prototype.Je,Hs.prototype.Ne=function(){return this.a},Hs.prototype.getMediaElement=Hs.prototype.Ne,Hs.prototype.Fb=function(){return this.G},Hs.prototype.getNetworkingEngine=Hs.prototype.Fb,Hs.prototype.bc=function(){return this.Bb},Hs.prototype.getAssetUri=Hs.prototype.bc,Hs.prototype.Me=function(){return ni("getManifestUri",'Please use "getAssetUri" instead.'),this.bc()},Hs.prototype.getManifestUri=Hs.prototype.Me,Hs.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},Hs.prototype.isLive=Hs.prototype.V,Hs.prototype.Va=function(){return!!this.c&&this.c.presentationTimeline.Va()},Hs.prototype.isInProgress=Hs.prototype.Va,Hs.prototype.af=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Hs.prototype.isAudioOnly=Hs.prototype.af,Hs.prototype.Kf=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.mb(),end:e.za()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Hs.prototype.seekRange=Hs.prototype.Kf,Hs.prototype.keySystem=function(){return this.g?this.g.keySystem():""},Hs.prototype.keySystem=Hs.prototype.keySystem,Hs.prototype.drmInfo=function(){return this.g?this.g.a:null},Hs.prototype.drmInfo=Hs.prototype.drmInfo,Hs.prototype.dc=function(){return this.g?this.g.dc():1/0},Hs.prototype.getExpiration=Hs.prototype.dc,Hs.prototype.Oc=function(){return!!this.P&&this.P.a==La},Hs.prototype.isBuffering=Hs.prototype.Oc,Hs.prototype.Qe=function(){if(this.W){var e=this.W;e=e.f?0:e.c}else e=0;return e},Hs.prototype.getPlaybackRate=Hs.prototype.Qe,Hs.prototype.bg=function(e){0==e?W("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(e),this.h==xu&&go(this.f,1<Math.abs(e)))},Hs.prototype.trickPlay=Hs.prototype.bg,Hs.prototype.ue=function(){this.h==Au&&this.W.set(1),this.h==xu&&(this.W.set(1),go(this.f,!1))},Hs.prototype.cancelTrickPlay=Hs.prototype.ue,Hs.prototype.Nc=function(){if(this.c&&this.s){for(var e=bu(this),t=[],n=h(function(e){return null==(e=yu(e))?[]:e.variants.filter((function(e){return Xn(e)}))}(this)),i=n.next();!i.done;i=n.next()){var r=qn(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){var t=Wn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t})):[]},Hs.prototype.getVariantTracks=Hs.prototype.Nc,Hs.prototype.ob=function(){if(this.c&&this.s){for(var e=function(e){var t=yu(e);if(null==t)return null;if(!Sa(e.$,t).text){var n=$n(t.textStreams,e.ma,e.cb);n.length&&ka(e.$,t,n[0])}return Sa(e.$,t).text}(this),t=[],n=h(function(e){var t=yu(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Wb.has(t)}))}(this)),i=n.next();!i.done;i=n.next()){var r=Kn(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map((function(e){var t=Wn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t})):[]},Hs.prototype.getTextTracks=Hs.prototype.ob,Hs.prototype.hd=function(e){if(this.c&&this.f){var t=yu(this),n=t.textStreams.find((function(t){return t.id==e.id}));n&&(Ys(this,t,n,!1),Zs(this,n),this.ma=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=h(t=Array.from(this.a.textTracks))).next();!n.done;n=t.next())zn(n=n.value)==e.id?n.mode=this.eb?"showing":"hidden":n.mode="disabled";su(this)}},Hs.prototype.selectTextTrack=Hs.prototype.hd,Hs.prototype.Mf=function(){ni("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ob().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.hd(e[0])},Hs.prototype.selectEmbeddedTextTrack=Hs.prototype.Mf,Hs.prototype.gg=function(){ni("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ob().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Hs.prototype.usingEmbeddedTextTrack=Hs.prototype.gg,Hs.prototype.Of=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var i=yu(this);this.b.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find((function(t){return t.id==e.id}));r&&Xn(r)&&(Xs(this,i,r,!1),Qs(this,r,t,n),this.Ub=new Ma(r),nu(this,i.variants))}else if(this.a&&this.a.audioTracks){for(n=(t=h(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())zn(n=n.value)==e.id&&(n.enabled=!0);ou(this)}},Hs.prototype.selectVariantTrack=Hs.prototype.Of,Hs.prototype.Ee=function(){return vu(this.Nc())},Hs.prototype.getAudioLanguagesAndRoles=Hs.prototype.Ee,Hs.prototype.Xe=function(){return vu(this.ob())},Hs.prototype.getTextLanguagesAndRoles=Hs.prototype.Xe,Hs.prototype.De=function(){return Array.from(gu(this.Nc()))},Hs.prototype.getAudioLanguages=Hs.prototype.De,Hs.prototype.We=function(){return Array.from(gu(this.ob()))},Hs.prototype.getTextLanguages=Hs.prototype.We,Hs.prototype.Lf=function(e,t){if(this.c&&this.s){var n=yu(this);this.Ub=new Na(e,t||"",0),iu(this,n)}else if(this.a&&this.a.audioTracks){for(var i=(n=h(n=Array.from(this.a.audioTracks))).next();!i.done;i=n.next())(i=i.value).language==e&&(i.enabled=!0);ou(this)}},Hs.prototype.selectAudioLanguage=Hs.prototype.Lf,Hs.prototype.Nf=function(e,t){if(this.c&&this.s){var n=yu(this);this.ma=e,this.cb=t||"";var i=$n(n.textStreams,this.ma,this.cb)[0]||null;i&&(Ys(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.gc())&&Zs(this,i))}else(n=this.ob().filter((function(t){return t.language==e}))[0])&&this.hd(n)},Hs.prototype.selectTextLanguage=Hs.prototype.Nf,Hs.prototype.gc=function(){var e=this.eb;return this.c?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some((function(e){return"showing"==e.mode})):e},Hs.prototype.isTextTrackVisible=Hs.prototype.gc,Hs.prototype.Rf=function(e){var t=this;return f((function n(){var i,r,a,o;return D(n,(function(n){switch(n.j){case 1:if(t.eb==(i=e))return n.return();if(t.eb=i,t.h!=xu){if(t.a&&t.a.src&&t.a.textTracks)for(var s=h(Array.from(t.a.textTracks)),u=s.next();!u.done;u=s.next())"disabled"!=(r=u.value).mode&&(r.mode=e?"showing":"hidden");n.A(2);break}if(t.D.g.setTextVisibility(e),t.b.streaming.alwaysStreamText){n.A(2);break}if(!e){(s=t.f).D=!0,(u=s.b.get("text"))&&(_o(u),s.b.delete("text")),n.A(2);break}if(a=yu(t),!(0<(o=$n(a.textStreams,t.ma,t.cb)).length)){n.A(2);break}return E(n,mo(t.f,o[0]),2);case 2:uu(t),k(n)}}))}))},Hs.prototype.setTextTrackVisibility=Hs.prototype.Rf,Hs.prototype.Se=function(){if(!this.V())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},Hs.prototype.getPlayheadTimeAsDate=Hs.prototype.Se,Hs.prototype.Ue=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Hs.prototype.getPresentationStartTimeAsDate=Hs.prototype.Ue,Hs.prototype.Jc=function(){var e={total:[],audio:[],video:[],text:[]};return this.h==Au&&(e.total=Vt(this.a.buffered)),this.h==xu&&this.D.Jc(e),e},Hs.prototype.getBufferedInfo=Hs.prototype.Jc,Hs.prototype.getStats=function(){if(this.h!=xu&&this.h!=Au)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};tu(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=n}this.h==xu&&((e=bu(this))&&(this.v.l=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.m=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.v.f=e);var i=this.v;e=i.m,t=i.g,n=i.l;for(var r=i.h,a=i.i,o=i.f,s=i.b,u=js(i.a,"playing"),c=js(i.a,"paused"),l=js(i.a,"buffering"),d=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=h(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.a),f=[],p=(i=h(i.c.a)).next();!p.done;p=i.next())p=p.value,f.push({timestamp:p.timestamp,id:p.id,type:p.type,fromAdaptation:p.fromAdaptation,bandwidth:p.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,estimatedBandwidth:o,loadLatency:s,playTime:u,pauseTime:c,bufferingTime:l,stateHistory:d,switchHistory:f}},Hs.prototype.getStats=Hs.prototype.getStats,Hs.prototype.addTextTrack=function(e,t,n,i,r,a){var o=this;return f((function s(){var u,c,l,h,d,f,p,m,g;return D(s,(function(s){switch(s.j){case 1:if(o.h==Au)throw Error("State error!");if(o.h!=xu)throw Error("State error!");if(u=yu(o),c=Gt,l=o.c.periods.indexOf(u),d=(h=l+1)>=o.c.periods.length?o.c.presentationTimeline.Y():o.c.periods[h].startTime,1/0==(f=d-u.startTime))throw new fe(1,4,4033);return p=new sr(1,0,f,(function(){return[e]}),0,null),m={id:o.Hd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:c.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},o.Wb.add(m),u.textStreams.push(m),E(s,mo(o.f,m),2);case 2:return(g=po(o.f,"text"))&&ka(o.$,u,g),o.Wb.delete(m),iu(o,u),au(o),s.return(Kn(m))}}))}))},Hs.prototype.addTextTrack=Hs.prototype.addTextTrack,Hs.prototype.kd=function(e,t){this.Xb.width=e,this.Xb.height=t},Hs.prototype.setMaxHardwareResolution=Hs.prototype.kd,Hs.prototype.gd=function(){if(this.h==xu){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=h(e.b.values()),n=t.next();!n.done;n=t.next())(n=n.value).Ib&&(n.Ib=!1,Do(e,n,.1));e=!0}}else e=!1;return e},Hs.prototype.retryStreaming=Hs.prototype.gd,Hs.prototype.Ke=function(){return this.c},Hs.prototype.getManifest=Hs.prototype.Ke,Hs.prototype.Le=function(){return this.m?this.m.constructor:null},Hs.prototype.getManifestParserFactory=Hs.prototype.Le,(n=Hs.prototype).Fc=function(e){var t=this.f?ho(this.f):null,n=this.f?fo(this.f):null;if(Hn(this.g,t,n,e),!(t=e.variants).some(Xn))throw new fe(2,4,4011);if(pu(this,e.variants),Fn(t,this.b.restrictions,this.Xb)&&this.f&&yu(this)==e&&au(this),e=this.g?this.g.a:null)for(n=(t=h(t)).next();!n.done;n=t.next())for(var i=(n=h(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=h(i.initData||[])).next();!r.done;r=i.next())r=r.value,Et(this.g,r.initDataType,r.initData)},n.df=function(e){try{this.ib=!0,this.l.disable(),cu(this);var t=nu(this,e.variants),n=$n(e.textStreams,this.ma,this.cb)[0]||null;this.Ea&&(e.variants.includes(this.Ea)&&(t=this.Ea),this.Ea=null),this.na&&(e.textStreams.includes(this.na)&&(n=this.na),this.na=null),t&&Xs(this,e,t,!0),n&&Ys(this,e,n,!0);var i=this.f,r=i.b.get("video");if(r)var a=i.c.periods[r.pa];else{var o=i.b.get("audio");a=o?i.c.periods[o.pa]:null}var s=t?t.audio:null;if(!a&&n){var u;if(u=s){e=n;var c=_n(this.b.preferredTextLanguage),l=_n(s.language),h=_n(e.language);u=Ln(h,c)&&!Ln(l,h)}u&&(this.eb=!0),this.eb&&this.D.g.setTextVisibility(!0),uu(this)}return this.b.streaming.alwaysStreamText||this.gc()?{variant:t,text:n}:{variant:t,text:null}}catch(e){return this.Ka(e),{variant:null,text:null}}},n.te=function(){this.ib=!1,this.b.abr.enabled&&(this.l.enable(),cu(this)),this.Ea&&(vo(this.f,this.Ea,this.Dd,this.Bd),ou(this),this.Ea=null),this.na&&(yo(this.f,this.na,!0,0,!1),su(this),this.na=null)},n.jf=function(){this.m&&this.m.update&&this.m.update()},n.qf=function(){this.s&&this.s.s()},n.Ka=function(e){if(this.h!=ku){var t=new Ee("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var ku=0,Su=1,xu=2,Au=3;function Iu(e,t){var n=ys(new vs(e.ua(),e.aa()),t.periods[0],new Ar(null,0)),i=t.appMetadata||{};return n=Cu(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Cu(e){for(var t=[],n=function(e){return e.filter((function(e){return Xn(e)}))}(e.variants),i=(n=h(n)).next();!i.done;i=n.next())t.push(qn(i.value));for(n=(e=h(e.textStreams)).next();!n.done;n=e.next())t.push(Kn(n.value));return t}function Pu(){this.a={}}function Mu(e,t){var n=e.a[t];return null==n&&(n=0),n}function Nu(e){this.a=!1,this.b=new pe,this.c=e}function Ru(e){var t=new Du;e.periods.forEach((function(e,n){var i=Ou(e.variants);if(0==n)for(var r=(i=h(i.a)).next();!r.done;r=i.next())t.add(r.value);else!function(e,t){e.a=e.a.filter((function(e){return _u(t,e)}))}(t,i)}));for(var n=(e=h(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return _u(t,new Lu(e))}))}function Lu(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Du(){this.a=[]}function _u(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function Ou(e){for(var t=new Du,n=(e=h(e)).next();!n.done;n=e.next())t.add(new Lu(n.value));return t}function Uu(e){var t=this;if(e&&e.constructor!=Hs)throw new fe(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Fb()):(this.a=Ds(),this.b=new Ne),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Nu((function(){return f((function e(){var i;return D(e,(function(e){switch(e.j){case 1:return i=function(){},E(e,Promise.all(t.g.map((function(e){return e.then(i,i)}))),2);case 2:if(!n){e.A(3);break}return E(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,k(e)}}))}))}))}function ju(){if(Ze())e:{for(var e=h(Zo.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Bu(e,t){for(var n=[],i=h(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=h(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:$e(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:$e(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Fu(e,t,n){return f((function i(){return D(i,(function(i){switch(i.j){case 1:return E(i,function(e,t,n,i){return f((function r(){var a,o,s;return D(r,(function(r){switch(r.j){case 1:return i.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new fe(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Bu(i,!1),videoCapabilities:Bu(i,!0)}})),E(r,ks(t,e,o),2)):r.return();case 2:return s=r.o,E(r,a.remove(s),3);case 3:return E(r,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}}))}))}function Hu(e,t,n,i){function r(){s+=1,e.a.offline.progressCallback(u,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(i),o=a.length+1,s=0,u=Iu(n,i);return Promise.all([t.removeSegments(a,r),t.removeManifests([n.key()],r)])}function Vu(e,t,n,i,r,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};r=r.presentationTimeline.Hb();var s=a.id;return function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(a,r,(function(r){var u=Ir(r.c(),r.b,r.a,e.a.streaming.retryParameters);Vo(t,s,u,function(e,t,n){return n=n.endTime-n.startTime,Mu(e,t)*n}(i,a.id,r),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.segments.push({startTime:r.startTime,endTime:r.endTime,dataKey:t[0]})}))}))})),(r=a.initSegmentReference)&&(r=Ir(r.c(),r.b,r.a,e.a.streaming.retryParameters),Vo(t,s,r,.5*Mu(i,a.id),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.initSegmentKey=t[0]}))}))),o}function qu(e){if(e.h.a)throw new fe(2,9,7001)}function Ku(){if(!ju())throw new fe(2,9,9e3)}function zu(e,t){return f((function n(){return D(n,(function(n){switch(n.j){case 1:return e.g.push(t),x(n,2),E(n,t,4);case 4:return n.return(n.o);case 2:C(n),Ie(e.g,t),P(n,0)}}))}))}function Gu(e){for(var t=new Set,n=(e=h(e.periods)).next();!n.done;n=e.next()){for(var i=h((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(i=(n=h(n.variants)).next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}function Wu(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=h(t),i=n.next();!i.done;i=n.next())for(var r=(i=h(t)).next();!r.done;r=i.next());for(n=(t=h(e)).next();!n.done;n=t.next())for(i=(n=h(e)).next();!i.done;i=n.next());}Hs.LoadMode={DESTROYED:ku,NOT_LOADED:Su,MEDIA_SOURCE:xu,SRC_EQUALS:Au},Nu.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},Du.prototype.add=function(e){_u(this,e)||this.a.push(e)},F("shaka.offline.Storage",Uu),Uu.support=ju,Uu.prototype.destroy=function(){return this.h.destroy()},Uu.prototype.destroy=Uu.prototype.destroy,Uu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Rs(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&ni("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),_s(this.a,e)},Uu.prototype.configure=Uu.prototype.configure,Uu.prototype.getConfiguration=function(){var e=Ds();return _s(e,this.a,Ds()),e},Uu.prototype.getConfiguration=Uu.prototype.getConfiguration,Uu.prototype.Fb=function(){return this.b},Uu.prototype.getNetworkingEngine=Uu.prototype.Fb,Uu.prototype.store=function(e,t,n){var i=this;return zu(this,function(e,t,n,i){return f((function r(){var a,o,s,u,c,l,d,p,m;return D(r,(function(r){switch(r.j){case 1:return Ku(),e.f?r.return(Promise.reject(new fe(2,9,9006))):(e.f=!0,E(r,function(e,t,n){return f((function i(){var r,a,o,s,u,c;return D(i,(function(i){switch(i.j){case 1:return r=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},E(i,n(),2);case 2:return(s=i.o).configure(e.a.manifest),qu(e),x(i,3),E(i,s.start(t,o),5);case 5:return u=i.o,qu(e),c=Gu(u),E(i,Promise.all(Array.from(c).map((function(e){return e.createSegmentIndex()}))),6);case 6:if(qu(e),r)throw r;return i.return(u);case 3:return C(i),E(i,s.stop(),7);case 7:P(i,0)}}))}))}(e,t,i),2));case 2:if(a=r.o,qu(e),!(!a.presentationTimeline.V()&&!a.presentationTimeline.Va()))throw new fe(2,9,9005,t);return o=null,s=new $o,c=u=null,S(r,3,4),E(r,function(e,t,n){return f((function i(){var r,a,o;return D(i,(function(i){switch(i.j){case 1:return r=new vt({rb:e.b,onError:n,kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Va(t.periods),o=e.a,r.configure(o.drm),E(i,function(e,t,n){return e.s=[],e.D=n,bt(e,t)}(r,a,o.offline.usePersistentLicense),2);case 2:return E(i,wt(r),3);case 3:return E(i,Tt(r),4);case 4:return i.return(r)}}))}))}(e,a,(function(e){c=c||e})),6);case 6:if(o=r.o,qu(e),c)throw c;return function(e,t,n){(function(e,t){for(var n={width:1/0,height:1/0},i=h(e.periods),r=i.next();!r.done;r=i.next())(r=r.value).variants=r.variants.filter((function(e){return Bn(e,t,n)}))})(t,e.a.restrictions),function(e){for(var t=(e=h(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&En(e.audio)),e.video&&(t=t&&En(e.video)),t}))}(t),function(e,t){for(var n=h(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(e){return Mt(t,e)}))}(t,n),Ru(t),function(e,t){var n=new Du;e.periods.forEach((function(e,i){0<i&&(e.variants=e.variants.filter((function(e){return _u(n,new Lu(e))}))),t(e),n=Ou(e.variants)}))}(t,(function(t){for(var n=[],i=h(t.variants),r=i.next();!r.done;r=i.next())n.push(qn(r.value));for(r=(i=h(t.textStreams)).next();!r.done;r=i.next())n.push(Kn(r.value));n=e.a.offline.trackSelectionCallback(n);var a=new Set,o=new Set;for(i=(n=h(n)).next();!i.done;i=n.next())"variant"==(i=i.value).type&&a.add(i.id),"text"==i.type&&o.add(i.id);t.variants=t.variants.filter((function(e){return a.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return o.has(e.id)}))})),function(e){if(0==e.periods.length)throw new fe(2,4,4014);for(var t=(e=h(e.periods)).next();!t.done;t=e.next())Wu(t.value)}(t)}(e,a,o),E(r,s.init(),7);case 7:return qu(e),E(r,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{ua:n,aa:i},aa:e})}))})),t)return t;throw new fe(2,9,9013,"Could not find a cell that supports add-operations")}(s),8);case 8:return u=r.o,qu(e),E(r,function(e,t,n,i,r,a){return f((function o(){var s,u,c,l;return D(o,(function(o){switch(o.j){case 1:return s=function(e,t,n){var i=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.Y(),size:0,expiration:i,tracks:t=Cu(t.periods[0]),appMetadata:n}}(r,i,a),u=new Ho(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)})),x(o,2),l=c=function(e,t,n,i,r,a,o){var s=new Pu,u=r.periods.map((function(i){return function(e,t,n,i,r,a){r.periods.forEach((function(e){e.variants.forEach((function(e){var t=e.audio,n=e.video;if(t&&!n&&(i.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(i.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var r=t.bandwidth||393216,a=n.bandwidth||e.bandwidth-r;0>=a&&(a=e.bandwidth),i.a[t.id]=r,i.a[n.id]=a}})),e.textStreams.forEach((function(e){i.a[e.id]=52}))}));for(var o=Gu(r),s=new Map,u=(o=h(o)).next();!u.done;u=o.next()){u=u.value;var c=Vu(e,t,n,i,r,u);s.set(u.id,c)}return a.variants.forEach((function(e){e.audio&&s.get(e.audio.id).variantIds.push(e.id),e.video&&s.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(s.values())}}(e,t,n,s,r,i)})),c=i.a,l=St(i);if(c&&e.a.offline.usePersistentLicense){if(!l.length)throw new fe(2,9,9007,a);c.initData=[]}return{originalManifestUri:a,duration:r.presentationTimeline.Y(),size:0,expiration:i.dc(),periods:u,sessionIds:e.a.offline.usePersistentLicense?l:[],drmInfo:c,appMetadata:o}}(e,u,t,n,i,r,a),E(o,function(e){return f((function t(){return D(t,(function(t){switch(t.j){case 1:return E(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(u),4);case 4:return l.size=o.o,o.return(c);case 2:return C(o),E(o,u.destroy(),5);case 5:P(o,0)}}))}))}(e,u.aa,o,a,t,n),9);case 9:if(l=r.o,qu(e),c)throw c;return E(r,u.aa.addManifests([l]),10);case 10:return d=r.o,qu(e),p=new ms("manifest",u.path.ua,u.path.aa,d[0]),r.return(Iu(p,l));case 4:return C(r),e.f=!1,e.c=[],E(r,s.destroy(),11);case 11:if(!o){r.A(12);break}return E(r,o.destroy(),12);case 12:P(r,0);break;case 3:if(m=I(r),!u){r.A(14);break}return E(r,u.aa.removeSegments(e.c,(function(){})),14);case 14:throw c||m}}))}))}(this,e,t||{},(function(){return f((function t(){var r,a;return D(t,(function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(ni("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.return(new r)):E(t,xr.create(e,i.b,i.a.manifest.retryParameters,n),2);case 2:return a=t.o,t.return(a)}}))}))})))},Uu.prototype.store=Uu.prototype.store,Uu.prototype.Ve=function(){return this.f},Uu.prototype.getStoreInProgress=Uu.prototype.Ve,Uu.prototype.remove=function(e){return zu(this,function(e,t){return f((function n(){var i,r,a,o,s,u;return D(n,(function(n){switch(n.j){case 1:return Ku(),null==(i=gs(t))||"manifest"!=i.a?n.return(Promise.reject(new fe(2,9,9004,t))):(r=i,a=new $o,x(n,2),E(n,a.init(),4));case 4:return E(n,Jo(a,r.ua(),r.aa()),5);case 5:return E(n,(o=n.o).getManifests([r.key()]),6);case 6:return s=n.o,u=s[0],E(n,Promise.all([Fu(e,u,a),Hu(e,o,r,u)]),2);case 2:return C(n),E(n,a.destroy(),8);case 8:P(n,0)}}))}))}(this,e))},Uu.prototype.remove=Uu.prototype.remove,Uu.prototype.Ff=function(){return zu(this,function(e){return f((function t(){var n,i,r,a,o,s,u,c,l;return D(t,(function(t){switch(t.j){case 1:return Ku(),n=e.b,i=e.a.drm,r=new $o,a=!1,x(t,2),E(t,r.init(),4);case 4:for(o=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return o.push(e)})),s=Promise.resolve(),u={},c=h(o),l=c.next();!l.done;u={qc:u.qc},l=c.next())u.qc=l.value,s=s.then(function(e){return function(){return f((function t(){var r,o;return D(t,(function(t){switch(t.j){case 1:return E(t,e.qc.getAll(),2);case 2:return r=t.o,E(t,ks(i,n,r),3);case 3:return o=t.o,E(t,e.qc.remove(o),4);case 4:o.length!=r.length&&(a=!0),k(t)}}))}))}}(u));return E(t,s,2);case 2:return C(t),E(t,r.destroy(),6);case 6:P(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Uu.prototype.removeEmeSessions=Uu.prototype.Ff,Uu.prototype.list=function(){return zu(this,f((function e(){var t,n,i;return D(e,(function(e){switch(e.j){case 1:return Ku(),t=[],n=new $o,x(e,2),E(e,n.init(),4);case 4:return i=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({ua:n,aa:i},e)}))}))}(n,(function(e,n){i=i.then((function(){return f((function i(){return D(i,(function(i){switch(i.j){case 1:return E(i,n.getAllManifests(),2);case 2:i.o.forEach((function(n,i){var r=Iu(new ms("manifest",e.ua,e.aa,i),n);t.push(r)})),k(i)}}))}))}))})),E(e,i,2);case 2:return C(e),E(e,n.destroy(),6);case 6:P(e,3);break;case 3:return e.return(t)}}))})))},Uu.prototype.list=Uu.prototype.list,Uu.deleteAll=function(){return f((function e(){var t;return D(e,(function(e){switch(e.j){case 1:return t=new $o,x(e,2),E(e,t.erase(),2);case 2:return C(e),E(e,t.destroy(),5);case 5:P(e,0)}}))}))},Ks.offline=ju,F("shaka.polyfill.installAll",(function(){for(var e=0;e<$u.length;++e)$u[e].re()}));var Xu,Yu,$u=[];function Ju(e,t){for(var n={priority:t=t||0,re:e},i=0;i<$u.length;i++)if($u[i].priority<t)return void $u.splice(i,0,n);$u.push(n)}function Qu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Zu(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function ec(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function tc(e){var t=e.target,n=t.mediaSource_;if(n.Ed){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.xd=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].xd)return;n.Ed=!1}}function nc(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",tc,!1);e.removeEventListener("sourceclose",nc,!1)}function ic(e,t){try{var n=new rc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function rc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=h(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=h(r.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){a=!0;var c=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(i.audioCapabilities.push(u),o=!0)}if(r.videoCapabilities)for(u=(r=h(r.videoCapabilities)).next();!u.done;u=r.next())(s=u.value).contentType&&(a=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ac(e){var t=this.mediaKeys;return t&&t!=e&&sc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?sc(e,this):Promise.resolve()}function oc(e){this.b=new WebKitMediaKeys(e),this.a=new Ve}function sc(e,t){if(e.a.Ya(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",cc);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function uc(e){Se.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new Ve,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new hc}function cc(e){var t=new Event("encrypted");t.initDataType="cenc",t.initData=e.initData,this.dispatchEvent(t)}function lc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function hc(){this.size=0,this.a=void 0}function dc(e,t){try{var n=new fc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function fc(e,t){this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u=r.audioCapabilities[s];if(u.contentType){o=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.audioCapabilities.push(u),n=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(u=r.videoCapabilities[s]).contentType&&(o=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function pc(e){var t=this.mediaKeys;return t&&t!=e&&gc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?gc(e,this):Promise.resolve()}function mc(e){this.a=new MSMediaKeys(e),this.b=new Ve}function gc(e,t){if(e.b.Ya(),!t)return Promise.resolve();e.b.w(t,"msneedkey",yc);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",(function e(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",e)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function vc(e){Se.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Ve,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new wc}function yc(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Xi(e);if(1>=t.a.length)return e;for(var n=[],i=0;i<t.a.length;i++)n.push(e.subarray(t.a[i].start,t.a[i].end+1));for(e=[],t={},i=h(n),n=i.next();!n.done;t={fc:t.fc},n=i.next())t.fc=n.value,e.some(function(e){return function(t){return mt(t,e.fc)}}(t))||e.push(t.fc);for(t=0,i=h(e),n=i.next();!n.done;n=i.next())t+=n.value.length;for(t=new Uint8Array(t),i=0,e=h(e),n=e.next();!n.done;n=e.next())n=n.value,t.set(n,i),i+=n.length;return t}(e.initData),this.dispatchEvent(t)}}function bc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function wc(){this.size=0,this.a=void 0}function Tc(){return Promise.reject(Error("The key system specified is not supported."))}function Ec(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function kc(){throw new TypeError("Illegal constructor.")}function Sc(){throw new TypeError("Illegal constructor.")}F("shaka.polyfill.register",Ju),Ju((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Qu),document.addEventListener("webkitfullscreenerror",Qu),document.addEventListener("mozfullscreenchange",Qu),document.addEventListener("mozfullscreenerror",Qu),document.addEventListener("MSFullscreenChange",Qu),document.addEventListener("MSFullscreenError",Qu)}})),Ju((function(){tt("CrKey")&&delete e.indexedDB})),Ju((function(){tt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Zu)})),Ju((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Ju((function(){})),Ju((function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)!function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var i=n.split(/ *; */),r=i[0],a={},o=1;o<i.length;++o){var s=i[o].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[u]=s}if(!(i=a.codecs))return e(n);var c=!1,l=!1;for(var h in n=i.split(",").filter((function(e){return t.test(e)&&(l=!0),/^(hev|hvc)1\.2/.test(e)&&(c=!0),!0})),l&&(c=!1),a.codecs=n.join(","),c&&(a.eotf="smpte2084"),a)r+="; "+h+'="'+a[h]+'"';return cast.__platform__.canDisplayType(r)}}();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion;!function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),t.includes("Version/8")?e.MediaSource=null:t.includes("Version/9")?ec():t.includes("Version/10")?(ec(),function(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];for(var r=i=0;r<this.sourceBuffers.length;++r){var a=this.sourceBuffers[r];a=a.buffered.end(a.buffered.length-1),i=Math.max(i,a)}if(!isNaN(this.duration)&&i<this.duration)for(this.Ed=!0,i=0;i<this.sourceBuffers.length;++i)this.sourceBuffers[i].xd=!1;return e.apply(this,n)};var t=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];return(i=n.apply(this,i)).mediaSource_=this,i.addEventListener("updateend",tc,!1),t||(this.addEventListener("sourceclose",nc,!1),t=!0),i}}()):(t.includes("Version/11")||t.includes("Version/12"))&&(ec(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}())}else tt("Tizen")&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Je(t)[0]&&e(t)}}()})),rc.prototype.createMediaKeys=function(){var e=new oc(this.keySystem);return Promise.resolve(e)},rc.prototype.getConfiguration=function(){return this.a},oc.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new uc(this.b,e)},oc.prototype.setServerCertificate=function(e){return e&&new Uint8Array(e),Promise.resolve(!0)},H(uc,Se),(n=uc.prototype).generateRequest=function(e,t){this.a=new pe;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Wf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Uf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Vf.bind(this)),lc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.c=new pe;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},n.close=function(){try{this.b.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Wf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ee("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Uf=function(){this.c&&(lc(this,"usable"),this.c.resolve(),this.c=null)},n.Vf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:lc(this,"output-not-allowed");break;default:lc(this,"internal-error")}},(n=hc.prototype).forEach=function(e){this.a&&e(this.a,Xu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Xu;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(Xu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ac,e.MediaKeys=oc,e.MediaKeySystemAccess=rc,navigator.requestMediaKeySystemAccess=ic)})),fc.prototype.createMediaKeys=function(){var e=new mc(this.keySystem);return Promise.resolve(e)},fc.prototype.getConfiguration=function(){return this.a},mc.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new vc(this.a,e)},mc.prototype.setServerCertificate=function(){return Promise.resolve(!1)},H(vc,Se),(n=vc.prototype).generateRequest=function(e,t){this.a=new pe;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.nf.bind(this)),this.f.w(this.c,"mskeyadded",this.lf.bind(this)),this.f.w(this.c,"mskeyerror",this.mf.bind(this)),bc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new pe;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.nf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ee("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.lf=function(){this.a?(bc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(bc(this,"usable"),this.b.resolve(),this.b=null)},n.mf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:bc(this,"output-not-allowed");break;default:bc(this,"internal-error")}},(n=wc.prototype).forEach=function(e){this.a&&e(this.a,Yu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Yu;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Yu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=pc,e.MediaKeys=mc,e.MediaKeySystemAccess=fc,navigator.requestMediaKeySystemAccess=dc)})),kc.prototype.createSession=function(){},kc.prototype.setServerCertificate=function(){},Sc.prototype.getConfiguration=function(){},Sc.prototype.createMediaKeys=function(){},Ju((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Tc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ec,e.MediaKeys=kc,e.MediaKeySystemAccess=Sc)}),-10);var xc,Ac="";function Ic(e){return Ac?Ac+e.charAt(0).toUpperCase()+e.slice(1):e}function Cc(e,t){try{var n=new Mc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Pc(e){var t=this.mediaKeys;return t&&t!=e&&Rc(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Rc(e,this),Promise.resolve()}function Mc(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var l=o.audioCapabilities[c];if(l.contentType){u=!0;var h=l.contentType.split(";")[0];r.canPlayType(h,this.a)&&(s.audioCapabilities.push(l),i=!0)}}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(l=o.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(l.contentType,this.a)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Nc(e){this.g=e,this.b=null,this.a=new Ve,this.c=[],this.f={}}function Rc(e,t){e.b=t,e.a.Ya();var n=Ac;t&&(e.a.w(t,n+"needkey",e.tf.bind(e)),e.a.w(t,n+"keymessage",e.Zf.bind(e)),e.a.w(t,n+"keyadded",e.Xf.bind(e)),e.a.w(t,n+"keyerror",e.Yf.bind(e)))}function Lc(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Dc(e,t,n){Se.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new Uc}function _c(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=new Uint8Array(st("LOAD_SESSION|"+n));else{var r=st("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),i=a}else i=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new pe;var o=Ic("generateKeyRequest");try{e.f[o](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new le((function(){try{e.f[o](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).O(.01)}return e.b}function Oc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function Uc(){this.size=0,this.a=void 0}function jc(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Bc(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Fc(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Hc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Vc(t,n,i){return new e.TextTrackCue(t,n,i)}function qc(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function Kc(){}Mc.prototype.createMediaKeys=function(){var e=new Nc(this.a);return Promise.resolve(e)},Mc.prototype.getConfiguration=function(){return this.b},(n=Nc.prototype).createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Dc(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return Promise.resolve(!1)},n.tf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.Zf=function(e){var t=Lc(this,e.sessionId);t&&(e=new Ee("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.Xf=function(e){(e=Lc(this,e.sessionId))&&(Oc(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.Yf=function(e){var t=Lc(this,e.sessionId);t&&t.handleError(e)},H(Dc,Se),(n=Dc.prototype).handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Oc(this,"output-restricted"):Oc(this,1==t?"expired":"internal-error"))},n.nd=function(e,t){if(this.a)this.a.then(this.nd.bind(this,e,t)).catch(this.nd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=rt(t),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=dt(i.keys[0].k),i=dt(i.keys[0].kid)}else n=new Uint8Array(t),i=null;var r=Ic("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},n.generateRequest=function(e,t){return _c(this,t,null)},n.load=function(e){return"persistent-license"==this.g?_c(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new pe;return this.nd(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ic("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Uc.prototype).forEach=function(e){this.a&&e(this.a,xc)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=xc;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Ac="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;xc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Cc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Pc,e.MediaKeys=Nc,e.MediaKeySystemAccess=Mc}})),Ju((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Bc,document.exitPictureInPicture=Fc,document.addEventListener("webkitpresentationmodechanged",jc,!0))}})),Ju((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Ju((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Hc)}})),Ju((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Vc;else if(6==t)e.VTTCue=qc;else{try{var n=!!Vc(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=Vc)}}})),Kc.prototype.parseInit=function(){},Kc.prototype.parseMedia=function(e,t){var n=rt(e),i=[],r=new DOMParser,a=null;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new fe(2,2,2005)}if(a){if(!(a=a.getElementsByTagName("tt")[0]))throw new fe(2,2,2005);var o=Yi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Yi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Yi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Yi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=a.getAttribute("xml:space")||"default",r=a.getAttribute("tts:extent"),"default"!=n&&"preserve"!=n)throw new fe(2,2,2005);n="default"==n,o=new hl(o,s,u,c),s=nl(a.getElementsByTagName("metadata")[0]),u=nl(a.getElementsByTagName("styling")[0]),c=nl(a.getElementsByTagName("layout")[0]);for(var l=[],h=0;h<c.length;h++){var d,f,p=c[h],m=u,g=r,v=new dn,y=p.getAttribute("xml:id");if(y)v.id=y,y=null,g&&(y=zc.exec(g)||Wc.exec(g)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(d=ol(p,m,"extent"))&&(null!=(d=(f=zc.exec(d))||Wc.exec(d))&&(v.width=null!=g?100*Number(d[1])/g:Number(d[1]),v.height=null!=y?100*Number(d[2])/y:Number(d[2]),v.widthUnits=f||null!=g?fn:0,v.heightUnits=f||null!=y?fn:0)),(p=ol(p,m,"origin"))&&(null!=(d=(f=zc.exec(p))||Wc.exec(p))&&(v.viewportAnchorX=null!=y?100*Number(d[1])/y:Number(d[1]),v.viewportAnchorY=null!=g?100*Number(d[2])/g:Number(d[2]),v.viewportAnchorUnits=f||null!=g?fn:0));else v=null;v&&l.push(v)}for(r=nl(a.getElementsByTagName("body")[0]),a=0;a<r.length;a++)(h=il(r[a],t.periodStart,o,s,u,c,l,n))&&i.push(h)}return i};var zc=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Gc=/^(\d+px|\d+em)$/,Wc=/^(\d+)px (\d+)px$/,Xc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Yc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,$c=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Jc=/^(\d*(?:\.\d*)?)f$/,Qc=/^(\d*(?:\.\d*)?)t$/,Zc=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,el={left:sn,center:"center",right:"end",start:sn,end:"end"},tl={left:"line-left",center:"center",right:"line-right"};function nl(e){var t=[];if(!e)return t;for(var n=e.childNodes,i=0;i<n.length;i++){var r="span"==n[i].nodeName&&"p"==e.nodeName;n[i].nodeType!=Node.ELEMENT_NODE||"br"==n[i].nodeName||r||(r=nl(n[i]),t=t.concat(r))}return t.length||t.push(e),t}function il(e,t,n,i,r,a,o,s){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;!function e(t,n){for(var i=t.childNodes,r=0;r<i.length;r++)if("br"==i[r].nodeName&&0<r)i[r-1].textContent+="\n";else if(0<i[r].childNodes.length)e(i[r],n);else if(n){var a=i[r].textContent.trim();a=a.replace(/\s+/g," "),i[r].textContent=a}}(e,s),s=cl(e.getAttribute("begin"),n);var u=cl(e.getAttribute("end"),n);n=cl(e.getAttribute("dur"),n);var c=e.textContent;if(null==u&&null!=n&&(u=s+n),null==s||null==u)throw new fe(2,2,2001);if(t=new Jt(s+t,u+t,c),(a=ul(e,"region",a,""))&&a.getAttribute("xml:id")){var l=a.getAttribute("xml:id");o=o.filter((function(e){return e.id==l})),t.region=o[0]}return function(e,t,n,i,r){"rtl"==al(t,n,r,"direction")&&(e.direction="rtl");var a=al(t,n,r,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=rn),(a=al(t,n,r,"textAlign"))&&(e.positionAlign=tl[a],e.lineAlign=el[a],e.textAlign=en[a.toUpperCase()]);(a=al(t,n,r,"displayAlign"))&&(e.displayAlign=nn[a.toUpperCase()]);(a=al(t,n,r,"color"))&&(e.color=a);(a=al(t,n,r,"backgroundColor"))&&(e.backgroundColor=a);(a=al(t,n,r,"fontFamily"))&&(e.fontFamily=a);(a=al(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=al(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=al(t,n,r,"lineHeight"))&&a.match(Gc)&&(e.lineHeight=a),(a=al(t,n,r,"fontSize"))&&a.match(Gc)&&(e.fontSize=a),(a=al(t,n,r,"fontStyle"))&&(e.fontStyle=hn[a.toUpperCase()]);if(i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(n=ol(n,r,"textDecoration"))&&rl(e,n),(t=sl(t,r,"textDecoration"))&&rl(e,t)}(t,e,a,i=ul(e,"smpte:backgroundImage",i,"#"),r),t}function rl(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ie(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ie(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ie(e.textDecoration,"overline")}}function al(e,t,n,i){return(e=sl(e,n,i))?e:ol(t,n,i)}function ol(e,t,n){for(var i=nl(e),r=0;r<i.length;r++){var a=Yi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=ul(e,"style",t,""))?Yi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function sl(e,t,n){return(e=ul(e,"style",t,""))?Yi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function ul(e,t,n,i){if(!e||1>n.length)return null;var r=null,a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(i+n[e].getAttribute("xml:id")==t){r=n[e];break}return r}function cl(e,t){var n=null;if(Xc.test(e)){n=Xc.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else Yc.test(e)?n=ll(Yc,e):$c.test(e)?n=ll($c,e):Jc.test(e)?(n=Jc.exec(e),n=Number(n[1])/t.frameRate):Qc.test(e)?(n=Qc.exec(e),n=Number(n[1])/t.a):Zc.test(e)&&(n=ll(Zc,e));return n}function ll(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function hl(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function dl(){this.a=new Kc}function fl(){}function pl(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Zt:en[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=un[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=on,e.line=Number(n[1]),n[2]&&(e.lineAlign=un[n[2].toUpperCase()]))}function ml(e){if(null==(e=zr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function gl(){this.a=null}function vl(e,t,n){var i,r,a;return(new Vi).H("payl",zi((function(e){i=rt(e)}))).H("iden",zi((function(e){r=rt(e)}))).H("sttg",zi((function(e){a=rt(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Jt(i,r,e),t&&(e.id=t),n)for(t=new qr(n),n=Gr(t);n;)pl(e,n,[]),Kr(t),n=Gr(t);return e}(i,r,a,t,n):null}gn["application/ttml+xml"]=Kc,dl.prototype.parseInit=function(e){var t=!1;if((new Vi).H("moov",qi).H("trak",qi).H("mdia",qi).H("minf",qi).H("stbl",qi).fa("stsd",Ki).H("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new fe(2,2,2007)},dl.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new Vi).H("mdat",zi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new fe(2,2,2007);return i},gn['application/mp4; codecs="stpp"']=dl,gn['application/mp4; codecs="stpp.TTML.im1t"']=dl,fl.prototype.parseInit=function(){},fl.prototype.parseMedia=function(e,t){var n=rt(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new fe(2,2,2e3);var i=t.segmentStart;if(null==i&&(i=0,n[0].includes("X-TIMESTAMP-MAP"))){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=ml(new qr(r[1]))))throw new fe(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];var o=n[0].split("\n");for(r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new qr(o[r]),u=new dn;Gr(s),Kr(s);for(var c=Gr(s);c;){var l=u,h=c;(c=/^id=(.*)$/.exec(h))?l.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(h))?l.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(h))?(l.height=Number(c[1]),l.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(l.regionAnchorX=Number(c[1]),l.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(l.viewportAnchorX=Number(c[1]),l.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(h)&&(l.scroll="up"),Kr(s),c=Gr(s)}a.push(u)}for(r=[],s=1;s<n.length;s++){if(c=o=n[s].split("\n"),h=i,o=a,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1));var d=ml(l=new qr(c[0])),f=zr(l,/[ \t]+--\x3e[ \t]+/g),p=ml(l);if(null==d||null==f||null==p)throw new fe(2,2,2001);for(c=new Jt(d+h,p+h,c.slice(1).join("\n").trim()),Kr(l),h=Gr(l);h;)pl(c,h,o),Kr(l),h=Gr(l);null!=u&&(c.id=u),o=c}o&&r.push(o)}return r},gn["text/vtt"]=fl,gn['text/vtt; codecs="vtt"']=fl,gl.prototype.parseInit=function(e){var t=!1;if((new Vi).H("moov",qi).H("trak",qi).H("mdia",qi).fa("mdhd",function(e){0==e.version?(e.reader.L(4),e.reader.L(4),this.a=e.reader.F(),e.reader.L(4)):(e.reader.L(8),e.reader.L(8),this.a=e.reader.F(),e.reader.L(8)),e.reader.L(4)}.bind(this)).H("minf",qi).H("stbl",qi).fa("stsd",Ki).H("wvtt",(function(){t=!0})).parse(e),!this.a)throw new fe(2,2,2008);if(!t)throw new fe(2,2,2008)},gl.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new fe(2,2,2008);var i,r=0,a=[],o=[],s=!1,u=!1,c=!1,l=null;if((new Vi).H("moof",qi).H("traf",qi).fa("tfdt",(function(e){s=!0,r=0==e.version?e.reader.F():e.reader.yb()})).fa("tfhd",(function(e){var t=e.flags;(e=e.reader).L(4),1&t&&e.L(8),2&t&&e.L(4),l=8&t?e.F():null})).fa("trun",(function(e){u=!0;var t=e.version,n=e.flags,i=(e=e.reader).F();1&n&&e.L(4),4&n&&e.L(4);for(var r=[],o=0;o<i;o++){var s={duration:null,sampleSize:null,pd:null};256&n&&(s.duration=e.F()),512&n&&(s.sampleSize=e.F()),1024&n&&e.L(4),2048&n&&(s.pd=0==t?e.F():e.Xd()),r.push(s)}a=r})).H("mdat",zi((function(e){c=!0,i=e}))).parse(e),!c&&!s&&!u)throw new fe(2,2,2008);var h=r,d=new Bi(new DataView(i.buffer,i.byteOffset,i.byteLength),0);return a.forEach((function(e){var i=e.duration||l,a=e.pd?r+e.pd:h;h=a+(i||0);var s=0;do{var u=d.F();s+=u;var c=null;"vttc"==Wi(d.F())?8<u&&(c=d.Xa(u-8)):d.L(u-8),i&&c&&o.push(vl(c,t.periodStart+a/n.a,t.periodStart+h/n.a))}while(e.sampleSize&&s<e.sampleSize)})),o.filter(qt.Ga)},gn['application/mp4; codecs="wvtt"']=gl,F("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),F("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),F("shaka.util.Dom.asHTMLElement",(function(e){return e})),F("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),F("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}.call(i,n,n),i.shaka)t[r]=i.shaka[r]}()}).call(this,n(74))}}]);