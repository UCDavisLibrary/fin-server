(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{128:function(e,t){e.exports=(e=>(class extends e{constructor(){super(),this._injectModel("MediaModel")}_getImgPath(e){return this.MediaModel.getImgPath(e)}_getImgUrl(e,t,n){return this.MediaModel.getImgUrl(e,t,n)}_getImageMediaList(e){return this.MediaModel.getImageMediaList(e)}}))},139:function(e,t){e.exports='<style>\n  :host {\n    display : block;\n  }\n  .layout {\n    display: flex;\n  }\n  .tab {\n    flex: 1;\n    cursor: pointer;\n    text-transform: uppercase;\n    padding: 12px 0 9px 0;\n    text-align: center;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-weight: normal;\n    color: var(--gray-text);\n    border-bottom: 2px solid var(--gray-text);\n  }\n  .tab:focus {\n    border-bottom-color: var(--default-secondary-color);\n    outline: none;\n  }\n  .tab[selected] {\n    cursor: default;\n    font-weight: bold;\n    color: var(--default-primary-color);\n    border-bottom: 4px solid var(--default-primary-color);\n    padding: 12px 0 7px 0;\n  }\n</style>\n\n<div class="layout">\n  <template is="dom-repeat" items="[[tabs]]">\n    <div class="tab" \n      role="tab" \n      tabindex="0" \n      aria-selected$="[[item.ariaSelected]]"\n      selected$="[[item.selected]]"\n      on-click="_onTabClicked" \n      on-keyup="_onTabClicked"\n      value$="[[item.value]]">\n      [[item.label]]\n    </div>\n  </template>\n</div>'},140:function(e,t,n){"use strict";var i=n(4),a=n(139),o=n.n(a);customElements.define("app-tabs",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{role:{type:String,value:"tablist",reflectToAttribute:!0},selected:{type:String,value:"",notify:!0,observer:"_renderTabs"},tabs:{type:Array,value:()=>[],observer:"_renderTabs"}}}_renderTabs(){this.tabs&&(this.selected||!this.tabs.length?this.tabs.forEach((e,t)=>{let n=e.value===this.selected;this.set(`tabs.${t}.selected`,n),this.set(`tabs.${t}.ariaSelected`,n+""),e.label||this.set(`tabs.${t}.label`,e.value)}):this.selected=this.tabs[0])}_onTabClicked(e){"keyup"===e.type&&13!==e.which||(this.selected=e.currentTarget.getAttribute("value"))}})},141:function(e,t){e.exports='<style>\n  :host {\n    display: block;\n  }\n  [hidden] {\n    display:none !important;\n  }\n  textarea {\n    width: 100%;\n    font-size: var(--font-size);\n  }\n\n  .copyButton {\n    white-space: nowrap;\n    height: 38px;\n    width: 85px;\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    border-radius: 0;\n    border: none;\n    cursor: pointer;\n  }\n\n  .copyButton[active] {\n    text-align: center;\n    background-color: var(--default-primary-color);\n    color: var(--default-secondary-color);\n  }\n  \n  .copyButton[active] span {\n    display: none;\n  }\n\n  #citeText {\n    padding-bottom: 10px;\n    overflow: auto;\n    word-break: break-word;\n  }\n\n  .buttons {\n    display: flex;\n  }\n</style>\n\n<div hidden$="[[copying]]" id="citeText"></div>\n<textarea hidden$="[[!copying]]" id="copyArea"></textarea>\n\n<div class="buttons">\n  <div>\n    <slot></slot>\n  </div>\n  <button active$="[[copying]]" on-click="_onCopyClicked" class="copyButton">\n    <iron-icon icon="content-copy" id="icon"></iron-icon>\n    <span>Copy</span>\n  </button>\n</div>\n'},142:function(e,t,n){"use strict";var i=n(4),a=n(141),o=n.n(a),s=n(149),l=n.n(s);customElements.define("app-copy-cite",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{text:{type:String,value:"",observer:"_onTextUpdate"},copying:{type:Boolean,value:!1}}}_onTextUpdate(){this.$.citeText.innerHTML=this.text||"",this.$.copyArea.value=l()(this.text).trim()}_onCopyClicked(){this.$.copyArea.style.height=this.$.citeText.offsetHeight-10+"px",this.$.copyArea.style.width=this.$.citeText.offsetWidth-10+"px",this.copying=!0,this.$.copyArea.focus(),this.$.copyArea.setSelectionRange(0,9999),document.execCommand("Copy"),this.$.icon.icon="check",setTimeout(()=>{this.$.icon.icon="content-copy",this.copying=!1},3e3)}})},145:function(e,t){e.exports='<style>\n  :host {\n    display: inline-block;\n    margin: 15px;\n    outline : 0;\n    height: 320px;\n    width: 320px;\n  }\n\n  :host(:hover), :host(:focus)  {\n    cursor: pointer;\n    margin: 13px;\n    border: 2px solid var(--default-secondary-color);\n  }\n\n  .img.defaultImage {\n    background-size: 65%;\n  }\n\n  .img {\n    height: 320px;\n    width: 320px;\n    position: relative;\n    background-image: url(\'/images/logos/logo-white-512.png\'); /* fallback */\n    background-color: var(--light-background-color);\n    background-size: cover; /* needs to be 65% */\n    background-repeat: no-repeat;\n    background-position: center center;    \n  }\n\n  .img > div  {\n    padding: 15px;\n    position: absolute;\n    left: 0;\n    right: 25px;\n    bottom: 25px;\n    \n    color: var(--default-secondary-color);\n    font-weight: var(--font-weight-heavy);\n\n    background-color: rgba(0, 38, 85, .8);      \n  }\n</style>\n\n<div \n  id="img"\n  class="img" \n  role="img" \n  aria-label="[[collection.name]]">\n  <div>[[collection.name]]</div>\n</div>\n'},146:function(e,t,n){"use strict";var i=n(4),a=n(145),o=n.n(a);customElements.define("app-collection-card",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{collection:{type:Object,value:()=>({}),observer:"_onCollectionChange"},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}constructor(){super(),this.shownInViewport=!1,this.active=!0}ready(){super.ready(),this.observer=new IntersectionObserver(e=>this._onViewportIntersection(e),{rootMargin:"10px",threshold:0})}connectedCallback(){super.connectedCallback(),"/images/logos/logo-white-512.png"===this.collection.thumbnailUrl&&(this.shadowRoot.querySelectorAll(".img")[0].className+=" defaultImage"),this.imageLoaded=!1,this.observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}_onCollectionChange(){this.shownInViewport&&this._setBackgroundImage()}_onViewportIntersection(e){0!==e.length&&(e=e[0],!this.shownInViewport&&e.isIntersecting&&(this.shownInViewport=!0,this._setBackgroundImage()))}_setBackgroundImage(){this.$.img.style.backgroundImage=`url('${this.collection.thumbnailUrl}')`}})},178:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    background-color: var(--light-background-color);\n    position: relative;\n  }\n\n  #filters {\n    margin-left: 10px;\n  }\n\n  .title {\n    color: var(--default-primary-color);\n    font-weight: bold;\n    padding: 15px 0;\n    margin-left: 10px;\n    border-bottom: 1px solid var(--medium-background-color);\n    display: none;\n  }\n\n  app-filter-panel {\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .thumbnail {\n    background-size: cover;\n    background-position: center center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .thumbnail-root {\n    position: relative;\n    height: 200px;\n  }\n\n  .label {\n    padding: 10px 0;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy);\n  }\n\n  .collection-filter {\n    padding: 4px 5px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .outer-drawer-toggle {\n    position: relative;\n  }\n  .outer-drawer-toggle[spacer] {\n    height: 50px;\n    border-bottom: 1px solid var(--medium-background-color);\n    margin-left: 10px;\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    position: absolute;\n    z-index: 15;\n    top : 15px;\n    right: -24px;\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  @media(min-width: 975px) {\n    h2 {\n      display: block;\n    }\n    .outer-drawer-toggle {\n      display: none;\n    }\n    .title {\n      display: block;\n    }\n  }\n</style>\n\n<div class="title" hidden$="[[collectionMode]]" >FILTERS</div>\n\n<div class="outer-drawer-toggle" spacer$="[[!collectionMode]]" on-click="_fireToggleDrawer">\n  <button class="drawer-toggle">\n    <span><span hidden$="[[!collectionMode]]">Info / </span>Filters</span>\n    <iron-icon icon="fin-icons:close"></iron-icon>\n  </button>\n</div>\n<div class="thumbnail-root"  hidden$="[[!collectionMode]]">\n  <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnailUrl]]\')"></div>\n  \x3c!-- <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnail]]\')"></div>  --\x3e\n</div>\n\n<app-tabs \n  tabs="[[tabs]]" \n  selected="{{selectedTab}}" \n  hidden$="[[!collectionMode]]">\n</app-tabs>\n\n<iron-pages \n  selected="[[selectedTab]]"   \n  attr-for-selected="id" \n  selected-attribute="showing">\n  <div id="filters">\n\n    <div hidden$="[[!collectionMode]]" class="label">Collection</div>\n    <div hidden$="[[!collectionMode]]" class="collection-filter">\n      <app-facet-checkbox \n        type="collection" \n        value="[[selectedCollection.name]]" \n        checked="[[collectionMode]]"\n        on-click="_removeCollectionFilter">\n      </app-facet-checkbox>\n    </div>\n\n    <template is="dom-repeat" items="[[facetFilters]]">\n      <app-filter-panel filter="[[item]]"></app-filter-panel>\n    </template>\n  </div>\n  <app-collection-info-panel id="info"></app-collection-info-panel>\n</iron-pages>\n\n'},179:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    padding: 15px;\n  }\n  h3, .header {\n    color: var(--default-primary-color);\n    margin: 5px 0;\n    font-weight: bold;\n  }\n  .section {\n    margin-bottom: 20px;\n  }\n  .break {\n    border-bottom: 1px solid var(--medium-background-color);\n    margin: 5px;\n  }\n\n  select {\n    margin-right: 10px;\n    outline-offset: 1px;\n    border: none;\n    background-color: white;\n    border-radius: 0;\n    height: 38px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    -moz-border-radius: 0px;\n    -ms-border-radius: 0px;\n    -o-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 10px 6px;\n    background-repeat: no-repeat;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n    background-color: var(--medium-background-color);\n  }\n  /* for IE */\n  select::-ms-expand {\n      display: none;\n  }\n\n  .buttons {\n    display: flex;\n    margin-top: 10px;\n  }\n</style>\n\n<div class="section" hidden$="[[!title]]">\n  <h3>[[title]]</h3>\n</div>\n\n<div class="section" hidden$="[[!description]]">\n  <div class="header">Description</div>\n  <div id="description"></div>\n</div>\n\n<div class="section" hidden$="[[!coverage]]">\n  <div class="header">Coverage</div>\n  <div>[[coverage]]</div>\n</div>\n\n<div class="break"></div>\n\n<div class="header">Cite this Collection</div>\n<div>\n  <app-copy-cite id="copyCite" text="[[citation]]">\n    <select id="citeFormatInput" value$="[[citationFormat]]" on-change="_onCiteFormatChange">\n      <template is="dom-repeat" items="[[engines]]">\n        <option value="[[item.engine]]">[[item.label]]</option>\n      </template>\n    </select>\n  </app-copy-cite>\n</div>\n'},185:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    cursor: pointer;\n  }\n\n  :host(:focus) {\n    outline: var(--default-outline);\n  }\n\n  :host([disabled]) {\n    cursor: default;\n    outline: none !important;\n  }\n\n  iron-icon {\n    display: none;\n    color: var(--default-secondary-color);\n    min-width: 24px;\n    margin-right: 2px;\n  }\n\n  div {\n    user-select: none;\n    display: flex;\n    min-height: 24px;\n    display: flex;\n    align-items: center;\n  }\n\n  span {\n    display: inline-block;\n    padding-top: 3px;\n  }\n\n  div[checked] iron-icon {\n    display: inline-block;\n  }\n\n  div[checked] .value {\n    font-style: italic;\n    font-weight: bold;\n  }\n\n  div[disabled] iron-icon {\n    display: none;\n  }\n\n  div[disabled] .value {\n    font-style: italic;\n    color: var(--gray-text);\n  }\n</style>\n\n<div checked$="[[checked]]" disabled$="[[disabled]]">\n  <iron-icon icon="fin-icons:close"></iron-icon>\n  <span class="value">[[realLabel]]</span>\n</div>'},186:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block\n  }\n\n  .filter {\n    padding: 4px 5px;\n    display: flex;\n    align-items: center;\n  }\n  .filter a {\n    display: inline-block;\n    cursor: pointer;\n    color: black;\n    transition: color 250ms ease-out, transform 250ms ease-out;\n    transform: scale(1);\n  }\n  .filter a span {\n    color: var(--default-primary-color);\n  }\n  .filter a:hover {\n    transform: scale(1.5);\n    color: var(--default-primary-color);\n  }\n\n  .active-filter {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    color: white;\n    font-size: 14px;\n    background: var(--primary-text-color);\n    padding: 5px;\n    border-radius: 3px;\n    margin: 3px;\n  }\n\n  .active-filter:hover {\n    color: var(--default-primary-color);\n    background: #ccc;\n  }\n\n  .count {\n    color: var(--text-disabled);\n    flex: 1;\n    text-align: right;\n    min-width : 40px;\n    padding: 0 10px;\n  }\n\n  .overflow {\n    overflow: auto;\n    max-height: 200px;\n  }\n\n  iron-list {\n    height: 200px;\n    display: none;\n  }\n\n  app-normal-checkbox {\n    overflow: hidden;\n    padding-right: 5px;\n  }\n\n  paper-checkbox[active] .key {\n    color: var(--default-primary-color);\n    font-weight: bold;\n  }\n\n  paper-checkbox[disabled] .key {\n    color: var(--secondary-text-color);\n    font-style: italic;\n  }\n</style>\n\n\x3c!-- used for large lists --\x3e\n<iron-list id="list" items="[[bucketsIronList]]" as="item">\n  <template>\n    <div class="filter">\n\n      <app-normal-checkbox\n        type$="[[label]]"\n        index$="[[index]]"\n        value$="[[item.key]]"\n        label-map="[[valueMap]]"\n        checked$="[[item.active]]" \n        on-change="_toggleFilter"\n        disabled$="[[item.disabled]]">\n      </app-normal-checkbox>\n\n      <div class="count">[[item.doc_count]]</div>\n    </div>\n  </template>\n</iron-list>\n\n\x3c!-- used for small lists --\x3e\n<div class="overflow">\n  <div>  \n    <template is="dom-repeat" items="[[buckets]]">\n      <div class="filter">\n\n        <app-normal-checkbox\n          type$="[[label]]"\n          index$="[[index]]"\n          value$="[[item.key]]"\n          label-map="[[valueMap]]"\n          checked$="[[item.active]]" \n          on-change="_toggleFilter"\n          disabled$="[[item.disabled]]">\n        </app-normal-checkbox>\n\n        <div class="count">[[item.doc_count]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n'},187:function(e,t){e.exports=(e=>(class extends e{constructor(){super(),this._injectModel("FiltersModel")}}))},188:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .label {\n    cursor: pointer;\n    display: flex;\n    color: var(--default-primary-color);\n    padding: 10px 0;\n    font-weight: bold;\n    position: relative;\n    outline: none !important;\n  }\n\n  .highlight {\n    position: absolute;\n    left: -10px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    background-color:  var(--default-secondary-color);\n    display: none;\n  }\n\n  .label:focus > .highlight {\n    display: block;\n  }\n\n  #activeFilters > div {\n    padding: 4px 5px;\n  }\n\n  .filter {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    font-weight: bold;\n    font-style: italic;\n  }\n\n  iron-icon[closed] {\n    transform: rotate(-90deg);\n  }\n\n  iron-icon[clear] {\n    color: var(--default-secondary-color);\n    margin-right: 2px;\n  }\n\n  #filters {\n    overflow-y: auto;\n    max-height: 200px;\n  }\n</style>\n\n<div class="label" on-click="_onToggleClicked" on-keyup="_onToggleClicked" role="button" tabindex="0">\n  <div style="flex:1">[[filter.label]]</div>\n  <iron-icon icon="arrow-drop-down" closed$="[[!opened]]"></iron-icon>\n  <div class="highlight"></div>\n</div>\n\n<div id="activeFilters" hidden$="[[opened]]">\n  <div hidden$="[[!selected.length]]">\n    <template is="dom-repeat" items="[[selected]]">\n      <div class="filter" \n        on-click="_onFilterClicked"\n        on-keyup="_onFilterClicked" \n        label$="[[item.label]]"\n        tabindex="0" \n        role="button">\n        <iron-icon icon="fin-icons:close" clear></iron-icon>\n        <div>[[item.label]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n\n<div id="filters" hidden$="[[!opened]]"></div>'},189:function(e,t){e.exports='<style>\n  :host {\n    display: block;\n  }\n  \n  .labels {\n    display: flex;\n    margin: 0 23px 0 13px;\n    color: var(--gray-text);\n    font-size: var(--font-size-sm);\n  }\n\n  .inputs {\n    display: flex;\n    align-items: center;\n  }\n\n  input[type="number"] {\n    margin: 0 13px;\n    padding: 7px;\n    border: 0;\n    width: 50px;\n    font-size: var(--font-size-sm);\n  }\n\n  .unknown {\n    margin-left: 9px;\n    display: flex;\n    align-items: center;\n  }\n\n  label {\n    font-size: var(--font-size-sm);\n    font-style: italic;\n    padding-left: 5px;\n  }\n\n  app-range-slider {\n    --light-background-color: var(--medium-background-color);\n  }\n</style>\n\n<div class="inputs">\n  <input id="minValueInput" type="number" on-change="_onInputChange" >\n  <span> - </span>\n  <input id="maxValueInput" type="number" on-change="_onInputChange" >\n</div>\n\n<div style="margin-right: 10px">\n  <app-range-slider\n    id="slider"\n    on-range-value-change="_onRangeSliderChange"\n    abs-min-value="[[absMinValue]]"\n    abs-max-value="[[absMaxValue]]"\n    min-value="[[minValue]]"\n    max-value="[[maxValue]]">\n  </app-range-slider>\n</div>\n\n<div class="labels">\n  <div style="flex:1">[[absMinValue]]</div>\n  <div>[[absMaxValue]]</div>\n</div>\n\n<div class="unknown" hidden$="[[showUnknown]]">\n  <input type="checkbox" id="unknown" on-click="_onRangeNullChange" checked />\n  <label for="unknown">include unknown / unspecified</label>\n</div>'},190:function(e,t){e.exports='<style>\n  :host {\n    display: block;\n    position: relative;\n    height: 50px;\n    margin: 0 13px;\n\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently */\n  }\n\n  #numberLine {\n    position: absolute;\n    left : 0;\n    right : 0;\n    height: 3px;\n    background-color: var(--light-background-color, #888);\n  }\n\n  #fillLine {\n    position: absolute;\n    cursor: move;\n    background-color: var(--default-primary-color);\n    height: 3px;\n  }\n\n  .btn {\n    position: absolute;\n    height: 25px;\n    width: 25px;\n    cursor: move;\n  }\n\n  .btn > div {\n    margin: 5px;\n    height: 15px;\n    width: 15px;\n    border-radius: 15px;\n    background-color: var(--default-primary-color);\n    transition: all 150ms linear;\n  }\n\n  .btn[moving] > div {\n    margin: 0px;\n    height: 25px;\n    width: 25px;\n    border-radius: 25px;\n  }\n\n  .label {\n    width : 25px;\n    font-size: 12px; \n    position: absolute;\n    text-align: center;\n    transform: scale(0);\n    transition: transform 200ms linear;\n    color: var(--default-primary-color);\n  }\n\n  .label[moving] {\n    transform: scale(1);\n  }\n\n</style>\n\n<div id="numberLine"></div>\n\n<div id="fillLine" \n  prop="range" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart">\n</div>\n\n<div id="lowNumberLabel" class="label" moving$="[[isMoving]]">[[minValueLabel]]</div>\n<div id="highNumberLabel" class="label" moving$="[[isMoving]]">[[maxValueLabel]]</div>\n\n<div id="lowNumberBtn" \n  class="btn" \n  prop="min" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMin]]" >\n  <div></div>\n</div>\n\n<div id="highNumberBtn" \n  class="btn" \n  prop="max" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMax]]">\n  <div></div>\n</div>'},193:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    max-width: 1150px;\n    position: relative;\n    margin: 0 5px\n  }\n\n  .header {\n    font-size: var(--font-size-sm);\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n\n  select {\n    margin-left: 10px;\n    border: 1px solid var(--light-background-color);\n    border-radius: 0;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 16px 16px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n  }\n  /* for IE */\n  select::-ms-expand {\n    display: none;\n  }\n\n  h3 {\n    border-top: 1px solid var(--light-background-color);\n    margin: 15px 0 0 0;\n    padding: 15px 0 0 0;\n    color: var(--default-primary-color);\n  }\n\n  .masonry {\n    margin: 10px;\n    position: relative;\n  }\n\n  .masonry .item {\n    display: block;\n    position: absolute;\n    /* visibility: hidden; */\n    top : 25px;\n    left: 25px;\n    will-change: top, left;\n    transition: top 500ms ease-out, left 500ms ease-out;\n  }\n\n  .list {\n    margin: 10px;\n  }\n\n  .list .item {\n    padding: 10px;\n    margin-bottom: 15px;\n    background-color: #daaa00;\n    height: 250px;\n  }\n\n  .spacer {\n    height: 20px;\n    border-right: 1px solid var(--light-background-color);\n  }\n\n  .total {\n    font-style: italic; \n    padding-left: 10px;\n  }\n\n  .mobile-total {\n    font-style: italic; \n  }\n\n  .filler {\n    flex: 1;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n  }\n\n  .error {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n    color: red;\n  }\n\n  cork-pagination {\n    display: inline-block;\n\n    --cork-color : var(--default-primary-color);\n    --cork-background-color : var(--default-secondary-color);\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  .drawer-toggle[disabled] {\n    color: var(--light-background-color);\n  }\n\n  .header {\n    display : none;\n  }\n\n  .mobile-header {\n    padding-top: 15px;\n    margin-bottom: 10px;\n  }\n\n  .mobile-header .row2 {\n    display: flex;\n    align-items: center;\n    margin-right: 10px;\n  }\n\n  .collections {\n    text-align: center;\n  }\n\n  @media( min-width: 975px ) {\n    .header {\n      display: flex;\n    }\n    .mobile-header {\n      display: none;\n    }\n  }\n</style>\n\n<div class="header">\n  <div class="total" hidden$="[[showLoading]]">[[total]] results found</div>\n  \n  <div class="filler"></div>\n  \n  <paper-icon-button \n    noink\n    icon="fin-icons:grid" \n    disabled$="[[!isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="masonry">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  <paper-icon-button \n    noink\n    icon="fin-icons:list" \n    disabled$="[[isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="list">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  \n  <div>\n    <select id="numPerPage" on-change="_onPageSizeChange">\n      <option value="50">50</option>\n      <option value="20">20</option>\n      <option value="10" selected>10</option>\n    </select>\n  </div>\n  <div style="margin: 0 10px; font-style:italic">Items per page</div>\n</div>\n\n<div class="mobile-header">\n  <div>\n    <div style="display:inline-block">\n      <button class="drawer-toggle" on-click="_onToggleDrawer">\n        <span>Info / Filters</span>\n        <iron-icon icon="add"></iron-icon>\n      </button>\n    </div>\n  </div>\n\n  <div class="row2">\n    <div class="total" hidden$="[[showLoading]]">[[total]] results</div>\n\n    <div class="filler"></div>\n    \n    <paper-icon-button \n      noink\n      icon="fin-icons:grid" \n      disabled$="[[!isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="masonry">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    <paper-icon-button\n      noink\n      icon="fin-icons:list" \n      disabled$="[[isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="list">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    \n    <div>\n      <select id="numPerPageM" on-change="_onPageSizeChange">\n        <option>50</option>\n        <option>20</option>\n        <option>10</option>\n      </select>\n    </div>\n    <div style="margin: 0 10px; font-style:italic">per page</div>\n  </div>\n</div>\n\n<div class="collections" hidden$="[[!showCollectionResults]]">\n  <div hidden$="[[!collectionResults.length]]">\n    <h3>Collections</h3>\n    <div style="text-align:center">\n      <template is="dom-repeat" items="[[collectionResults]]">\n        <app-collection-card \n          collection="[[item]]" \n          on-keyup="_onCollectionClicked"\n          on-click="_onCollectionClicked">\n        </app-collection-card>\n      </template>\n    </div>\n    <h3 hidden$="[[!results.length]]">Items</h3>\n  </div>\n</div>\n\n<div hidden$="[[showError]]">\n  <div hidden$="[[showLoading]]">\n    <div class="masonry" id="layout" hidden$="[[isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-grid-result data="[[item]]" class="item"></app-search-grid-result>\n      </template>\n    </div>\n\n    <div class="list" hidden$="[[!isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-list-result data="[[item]]"></app-search-list-result>\n      </template>\n    </div>\n  </div>\n</div>\n\n<div class="error" hidden$="[[!showError]]">\n  <div>[[errorMsg]]</div>\n</div>\n<div class="loading" hidden$="[[!showLoading]]">\n  <paper-spinner-lite active$="[[showLoading]]"></paper-spinner-lite>\n</div>\n\n<div style="text-align:center" hidden$="[[showLoading]]">\n  <cork-pagination \n    total-results="[[paginationTotal]]" \n    items-per-page="[[numPerPage]]"\n    current-index="[[currentIndex]]"\n    on-nav="_onPaginationNav">\n  </cork-pagination>\n</div>\n\n<div hidden$="[[!totalOverMaxWindow]]" style="text-align: center">Digital Collections limits results to \n  10,000.  Use keywords and/or filters to refine search.\n</div>'},194:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: white;\n    margin: 10px;\n    border: 2px solid transparent;\n  }\n  \n  :host(:hover), :host(:focus) {\n    cursor: pointer;\n    border: 2px solid var(--default-secondary-color);\n    outline: none !important;\n  }\n\n  .img {\n    height: 250px;\n    width: var(--grid-cell-width);\n    background-size: cover;\n    background-color: white;\n    background-position: center center;\n  }\n\n  .collection-name {\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n  }\n\n  .year {\n    color: var(--gray-text);\n    flex: 1;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  .layout {\n    display: flex;\n  }\n\n  h4 {\n    margin: 10px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .flex-vertical {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .data {\n    padding: 15px; \n    flex: 1;\n    overflow: hidden;\n  }\n\n  @media(max-width: 600px) {\n    .img {\n      height: auto;\n      width: 150px;\n    }\n\n    .data {\n      padding: 8px;\n    }\n\n    :host {\n      display: block;\n      background-color: white;\n      margin: 10px 0;\n    }\n  }\n</style>\n\n<div class="layout">\n  <div style$="background-image: url(\'[[imgUrl]]\')" hidden$="[[!isImage]]" class="img" ></div>\n\n  <div class="data">\n    <div class="flex-vertical">\n      <div class="collection-name">[[collectionName]]</div>\n      \n      <h4>[[name]]</h4>\n    \n      <template is="dom-repeat" items="[[creator]]">\n        <app-search-result-creator creator="[[item]]"></app-search-result-creator>\n      </template>\n      \n      <div class="spacer"></div>\n\n      <div class="footer">\n        <div class="year">[[year]]</div>\n        <div>\n          \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},195:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    width: var(--grid-cell-width);\n    background-color: white;\n    cursor: pointer;\n  }\n\n  :host(:hover), :host(:focus) {\n    border: 2px solid var(--default-secondary-color);\n    margin: -2px 0 0 -2px;\n    outline: none !important;\n  }\n\n  @keyframes show-img {\n    from {opacity: 0}\n    to {opacity: 1}\n  }\n\n  img {\n    animation: show-img 300ms linear;\n    box-sizing: border-box;\n    display:none;\n    /* width: var(--grid-cell-width); */\n    /* background-size: cover;\n    background-color: transparent;\n    background-position: center center; */\n    /* position: absolute;\n    top: 0;\n    left: 0; */\n  }\n\n  .collection-name {\n    font-style: italic;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n  }\n\n  .year {\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  h4 {\n    margin: 5px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .image {\n    position: relative; \n    background-size: cover;\n    background-color: transparent;\n    background-position: center center;\n    width: 250px; \n  }\n\n  .card-text {\n    padding: 15px;\n    line-height: 1.3;\n  }\n\n  .video-thumbnail {\n    z-index: 1000;\n    width: 30px; \n    height: 30px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    background-image: url(\'https://via.placeholder.com/25\');\n  }\n</style>\n\n<div \n  hidden$="[[!isImage]]" \n  class="image" \n  id="imgRoot"\n  style$="background-image: url(\'[[imgThumbail]]\'); height:[[imgHeight]]px;">\n  <img id="img" src$="[[imgUrl]]" style$="height:[[imgHeight]]px; width: 100%" onload="this.style.display=\'block\';" />\n  <div hidden$="[[!isVideo]]" class="video-thumbnail"></div>\n  \x3c!--\n    <div style$="background-image: url(\'[[imgThumbail]]\');height:[[imgHeight]]px" class="img"></div>\n    <div style$="background-image: url(\'[[imgUrl]]\');height:[[imgHeight]]px" class="img"></div>\n  --\x3e\n</div>\n\n<div class="card-text">\n  <div class="collection-name">[[collectionName]]</div>\n\n  <h4>[[name]]</h4>\n\n  <template is="dom-repeat" items="[[creator]]">\n    <app-search-result-creator creator="[[item]]" grid></app-search-result-creator>\n  </template>\n\n  <div class="footer">\n    <div class="year">[[year]]</div>\n    <div>\n      \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n    </div>\n  </div>\n</div>'},196:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .text {\n    display: block;\n    color: var(--gray-text);\n    line-height: 1.3;\n    font-weight: var(--font-weight-light);\n  }\n  :host([grid]) .text {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: calc(var(--grid-cell-width) - 30px);\n  }\n</style>\n\n<a class="text" hidden="[[!link]]" href="[[textLabel]]" target="_blank" rel="noopener" on-click="_onClick">[[textLabel]]</a>\n<div class="text" hidden="[[link]]">[[textLabel]]</div>'},200:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .search-container {\n    background-color: var(--super-light-background-color);\n    min-height: 60vh;\n    display: block;\n  }\n  .search-content {\n    flex: 1;\n    padding-bottom: 35px;\n  }\n\n  app-filters-panel {\n    width: 350px;\n    transition: width 300ms linear;\n  }\n  app-filters-panel[wide] {\n    width: 475px;\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: .7;\n    }\n  }\n\n  #desktop-filter-panel {\n    display: none;\n  }\n\n  @media( max-width: 1025px ) {\n    app-filters-panel[wide] {\n      width: 415px;\n    }\n  }\n\n  @media( min-width: 975px ) {\n    #desktop-filter-panel {\n      display: block;\n    }\n    .search-container {\n      display: flex;\n    }\n  }\n</style>\n\n<div class="search-container">\n  <app-filters-panel id="desktop-filter-panel" wide$="[[wideFiltersPanel]]" on-selected-tab-changed="_onFiltersTabUpdate"></app-filters-panel>\n  <div class="search-content">\n    <app-search-results-panel \n      id="resultsPanel" \n      on-toggle-drawer="_toggleDrawer" \n      on-page-size-change="_onPageSizeChange"\n      on-page-change="_onPaginationChange">\n    </app-search-results-panel>\n  </div>\n</div>'},204:function(e,t,n){"use strict";n.r(t);var i=n(4),a=(n(156),n(200)),o=n.n(a),s=(n(199),n(137),n(51)),l=n.n(s),r=n(196),c=n.n(r);customElements.define("app-search-result-creator",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=c.a,e}static get properties(){return{creator:{type:Object,value:null,observer:"_onCreatorUpdate"},textLabel:{type:String,value:""},link:{type:Boolean,value:!1}}}_onCreatorUpdate(){this.creator&&(this.creator["@id"]?this.link=!0:this.link=!1,this.creator.name?this.textLabel=this.creator.name:this.textLabel=this.creator["@id"])}_onClick(e){e.stopPropagation()}});var d=n(32),h=n.n(d),p=n(24),u=n.n(p),g=n(128),m=n.n(g);class v extends(Mixin(i.a).with(EventInterface,u.a,h.a,m.a)){static get properties(){return{data:{type:Object,value:()=>{},observer:"_onDataUpdate"},fetchId:{type:String,value:""},isVideo:{type:Boolean,value:!1},isImage:{type:Boolean,value:!1},imgUrl:{type:String,value:""},collectionName:{type:String,value:""},name:{type:String,value:""},description:{type:String,value:""},creator:{type:Array,value:()=>[]},year:{type:String,value:""},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}constructor(){super(),this.baseUrl=window.location.protocol+"//"+window.location.host+"/fcrepo/rest"}ready(){super.ready(),this.addEventListener("click",e=>this._onClick()),this.addEventListener("keyup",e=>{13===e.which&&this._onClick()})}_onClick(){this._setWindowLocation(this.fetchId)}async _onDataUpdate(){let e=Object.assign({},this.data);if(!e["@id"])return;this.fetchId=e["@id"],this.name=this.data.name||(this.data.identifier?this.data.identifier["@id"]:""),this.data.video&&(this.isVideo=!0);let t=this.shadowRoot.querySelector("#img");t&&(t.style.display="none");let n=this.data.image;if(n){let e=n.height/n.width;this.imgHeight=Math.floor(250*e),this.imgUrl=this._getImgUrl(n.url,null,this.imgHeight),n.colorPalette?this.imgThumbail=n.colorPalette:this.imgThumbail="",this.isImage=!0}else this.imgUrl="",this.isImage=!1;if(this.description=this.data.description||"",this.description.length>200&&(this.description=this.description.substr(0,200)+"..."),this.year=l.a.getYearFromDate(e.created),Array.isArray(e.creator)?this.creator=e.creator:this.creator=[e.creator||""],this.collectionName=this.data.collectionId||"",this.collectionName){let e=await this._getCollection(this.collectionName);this.collectionName=e.name}}}var b=n(195),y=n.n(b);customElements.define("app-search-grid-result",class extends v{static get template(){let e=document.createElement("template");return e.innerHTML=y.a,e}});var f=n(194),x=n.n(f);customElements.define("app-search-list-result",class extends v{static get template(){let e=document.createElement("template");return e.innerHTML=x.a,e}});n(146);var w=n(33),k=n.n(w),_=n(193),M=n.n(_);const L="search-results-layout";let C=localStorage.getItem(L);C="list"===C;customElements.define("app-search-results-panel",class extends(Mixin(i.a).with(EventInterface,k.a,u.a,h.a,m.a)){static get properties(){return{results:{type:Array,value:()=>[]},collectionResults:{type:Array,value:()=>[]},masonryMargin:{type:Number,value:15},isListLayout:{type:Boolean,value:C},total:{type:String,value:"0"},numPerPage:{type:Number,value:1},currentIndex:{type:Number,value:0},showCollectionResults:{type:Boolean,value:!1},showError:{type:Boolean,value:!1},showLoading:{type:Boolean,value:!1},errorMsg:{type:Boolean,value:!1},paginationTotal:{type:Number,value:!1},totalOverMaxWindow:{type:Boolean,value:!1}}}static get template(){let e=document.createElement("template");return e.innerHTML=M.a,e}constructor(){super(),this.active=!0,this.resizeTimer=-1,window.addEventListener("resize",()=>this._resizeAsync()),this.EventBus().on("show-collection-search-results",e=>this._updateCollectionResultsVisibility(e))}_onAppStateUpdate(e){"search"===e.location.page&&this._resizeAsync()}render(e,t,n,i){this.results=[],this.showHeaderFooter=!0,this.showError=!1,clearTimeout(this.showLoadingTimer),this.showLoading=!1,requestAnimationFrame(()=>{this.total=this.numberWithCommas(t);let a=Math.floor((1e4-n)/n)*n;t>a?(t=a,this.totalOverMaxWindow=!0):this.totalOverMaxWindow=!1,this.results=e,this.paginationTotal=t,this.numPerPage=n,this.$.numPerPage.value=n+"",this.$.numPerPageM.value=n+"",this.currentIndex=i,requestAnimationFrame(()=>this._resize())})}numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}onLoading(){this.results=[],this.showCollectionResults=!1,this.showError=!1,this.showLoadingTimer=setTimeout(()=>{this.showLoading=!0},100)}onError(e){this.results=[],this.showCollectionResults=!1,this.showError=!0,clearTimeout(this.showLoadingTimer),this.showLoading=!1,e.showErrorMessage?this.errorMsg=e.error.message:this.errorMsg="Ooops. Something went wrong with search!"}_onLayoutToggle(e){"masonry"===e.currentTarget.getAttribute("type")?(this.isListLayout=!1,localStorage.setItem(L,"masonry")):(this.isListLayout=!0,localStorage.setItem(L,"list")),this.isListLayout||requestAnimationFrame(()=>this._resize())}_resizeAsync(){-1!==this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.resizeTimer=-1,this._resize()},50)}_resize(){if(this.isListLayout)return;let e=this.$.layout.querySelector("app-search-grid-result");if(!e)return;let t=this.offsetWidth,n=e.offsetWidth+this.masonryMargin,i=Math.max(Math.floor(t/n),1),a=Math.floor((t-i*n)/2),o=[];for(let e=0;e<i;e++)o.push(0);let s=this.$.layout.querySelectorAll("app-search-grid-result");for(let e=0;e<s.length;e++){let t=this._findMinCol(o);o[t],s[e].style.left=a+t*n+"px",s[e].style.top=o[t]+"px",o[t]+=s[e].offsetHeight+this.masonryMargin}let l=Math.max.apply(Math,o);this.$.layout.style.height=l+"px"}_findMinCol(e){let t=e[0],n=0;for(var i=1;i<e.length;i++)t>e[i]&&(t=e[i],n=i);return n}_onToggleDrawer(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}_onPageSizeChange(e){this.dispatchEvent(new CustomEvent("page-size-change",{detail:parseInt(e.currentTarget.value)}))}_onPaginationNav(e){this.dispatchEvent(new CustomEvent("page-change",{detail:e.detail}))}_updateCollectionResultsVisibility(e){this.showCollectionResults=e}_onCollectionSearchUpdate(e){"loaded"===e.state&&(this.collectionResults=e.payload.results)}_onCollectionClicked(e){if("keyup"===e.type&&13!==e.which)return;let t=e.currentTarget.collection["@id"],n=this._getEmptySearchDocument();this._setKeywordFilter(n,"isPartOf.@id",t),this.RecordModel.setSearchLocation(n)}});n(73),n(155),n(192);var $=n(190),T=n.n($);customElements.define("app-range-slider",class extends i.a{static get template(){let e=document.createElement("template");return e.innerHTML=T.a,e}static get properties(){return{absMinValue:{type:Number,value:0,observer:"_renderAsync"},absMaxValue:{type:Number,value:100,observer:"_renderAsync"},minValue:{type:Number,value:10,observer:"_renderAsync"},maxValue:{type:Number,value:90,observer:"_renderAsync"},minValueLabel:{type:String,value:""},maxValueLabel:{type:String,value:""},width:{type:Number,value:1},height:{type:Number,value:1},btnHeight:{type:Number,value:1},moving:{type:String,value:""},movingMin:{type:Boolean,value:!1},movingMax:{type:Boolean,value:!1},isMoving:{type:Boolean,value:!1}}}constructor(){super(),this._windowResizeListener=this._onResize.bind(this),this._windowMouseListener=this._onMoveStop.bind(this),this.addEventListener("mousemove",e=>this._onMove(e)),this.addEventListener("touchmove",e=>this._onMove(e))}connectedCallback(){super.connectedCallback(),requestAnimationFrame(()=>{this._onResize()}),window.addEventListener("resize",this._windowResizeListener),window.addEventListener("mouseup",this._windowMouseListener),window.addEventListener("mouseout",this._windowMouseListener),window.addEventListener("touchend",this._windowMouseListener),window.addEventListener("touchcancel",this._windowMouseListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("mouseup",this._windowMouseListener),window.removeEventListener("mouseout",this._windowMouseListener),window.removeEventListener("touchend",this._windowMouseListener),window.removeEventListener("touchcancel",this._windowMouseListener)}_onResize(){this.width=this.offsetWidth||1,this.height=this.offsetHeight,this.left=this.offsetLeft,this.btnHeight=this.$.lowNumberBtn.offsetHeight,this._render()}_valueToPx(e){e-=this.absMinValue;let t=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e/t)}_pxToValue(e){let t=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e*t)+this.absMinValue}_renderAsync(){this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(()=>{this.renderTimer=0,this._render()},0)}_render(){let e=.6*this.height;this.$.numberLine.style.top=e+"px",this.$.fillLine.style.top=e+"px";let t=this.btnHeight/2;this.$.lowNumberBtn.style.top=e-t+"px",this.$.highNumberBtn.style.top=e-t+"px",this.$.lowNumberLabel.style.top=e-t-22+"px",this.$.highNumberLabel.style.top=e-t-22+"px";let n=this._valueToPx(this.minValue),i=this._valueToPx(this.maxValue);this.$.lowNumberBtn.style.left=n-t+"px",this.$.highNumberBtn.style.left=i-t+"px",this.$.lowNumberLabel.style.left=n-t+"px",this.$.highNumberLabel.style.left=i-t+"px",this.$.fillLine.style.left=n+"px",this.$.fillLine.style.width=i-n+"px",this.minValueLabel=this.renderLabel(this.minValue),this.maxValueLabel=this.renderLabel(this.maxValue)}_onMoveStart(e){this.moving=e.currentTarget.getAttribute("prop"),"range"===this.moving&&(this.startRange={min:e.currentTarget.offsetLeft,max:e.currentTarget.offsetLeft+e.currentTarget.offsetWidth,left:e.pageX-this.left}),this.isMoving=!0,this.movingMin="max"!==this.moving,this.movingMax="min"!==this.moving}_onMove(e){if(!this.moving)return;let t;if(e.preventDefault(),"touchmove"===e.type){if(!e.changedTouches.length)return;t=e.changedTouches[0].pageX-this.left}else t=e.pageX-this.left;if("min"===this.moving)this.minValue=this._pxToValue(t);else if("max"===this.moving)this.maxValue=this._pxToValue(t);else if("max"===this.moving)this.maxValue=this._pxToValue(t);else if("range"===this.moving){let e=this.startRange.left-t;this.minValue=this._pxToValue(this.startRange.min-e),this.maxValue=this._pxToValue(this.startRange.max-e)}this.minValue<this.absMinValue&&(this.minValue=this.absMinValue),this.maxValue>this.absMaxValue&&(this.maxValue=this.absMaxValue),this.minValue>this.maxValue&&("min"===this.moving?this.minValue=this.maxValue:this.maxValue=this.minValue)}_onMoveStop(){this.moving&&(this.moving="",this.movingMin=!1,this.movingMax=!1,this.isMoving=!1,this.dispatchEvent(new CustomEvent("range-value-change",{detail:{min:this.minValue,max:this.maxValue}})))}renderLabel(e){return e}});var S=n(189),V=n.n(S);customElements.define("app-range-filter",class extends(Mixin(i.a).with(EventInterface,k.a,h.a)){static get template(){let e=document.createElement("template");return e.innerHTML=V.a,e}static get properties(){return{label:{type:String,value:""},filter:{type:String,value:""},absMinValue:{type:Number,value:-1},absMaxValue:{type:Number,value:-1},minValue:{type:Number,value:-1},maxValue:{type:Number,value:Number.MAX_VALUE},showUnknown:{type:Boolean,value:!1}}}constructor(){super(),this.active=!0,this._injectModel("AppStateModel")}connectedCallback(){super.connectedCallback(),this.resize()}resize(){this.$.slider._onResize(),setTimeout(()=>{this.$.slider._onResize()},100)}_isDefaultState(){if(!this._isFilterApplied()){let e=this._getCurrentSearchDocument();return this._removeRangeFilter(e,this.filter),this.RecordModel.setSearchLocation(e),!0}return!1}_onRangeSliderChange(e){this.minValue=e.detail.min,this.maxValue=e.detail.max,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this._onRangeNullChange()}_onRangeNullChange(){let e={gte:this.minValue,lte:this.maxValue};if(this.$.unknown.checked&&(e.includeNull=!0),this._isDefaultState())return;let t=this._getCurrentSearchDocument();this._setPaging(t,0),this._appendRangeFilter(t,this.filter,e),this.RecordModel.setSearchLocation(t)}_onInputChange(){let e=this.$.minValueInput.value,t=this.$.maxValueInput.value;e<this.absMinValue&&(this.$.minValueInput.value=this.absMinValue,e=this.absMinValue),t>this.absMaxValue&&(this.$.maxValueInput.value=this.absMaxValue,t=this.absMaxValue),e>t&&(e=t),this.minValue=e,this.maxValue=t,this._onRangeNullChange()}_onSelectedCollectionUpdate(e){this.selectedCollection=e?e["@id"]:"",this._renderFilters()}_onRecordSearchUpdate(e){"loaded"===e.state&&(this.currentFilters=e.searchDocument.filters||{},this._renderFilters())}async _renderFilters(){if(!this.currentFilters)return;let e=this.selectedCollection,t=await this._defaultRecordSearch(this.selectedCollection);if(e!==this.selectedCollection)return;this.default=t;let n=this.default.payload.aggregations.ranges[this.filter];if(!n)return this._show(!1);if(this.absMinValue=n.min,this.absMaxValue=n.max,this._show(!0),(this.minValue<this.absMinValue||!this.currentFilters[this.filter])&&(this.minValue=this.absMinValue,this.$.minValueInput.value=this.minValue),(this.maxValue>this.absMaxValue||!this.currentFilters[this.filter])&&(this.maxValue=this.absMaxValue,this.$.maxValueInput.value=this.maxValue),this.currentFilters[this.filter]){let e=this.currentFilters[this.filter].value;this.minValue=e.gte,this.maxValue=e.lte,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this.$.unknown.checked=!!e.includeNull}this._notifySelected()}_isFilterApplied(){return this.minValue!==this.absMinValue||this.maxValue!==this.absMaxValue||!0!==this.$.unknown.checked}_notifySelected(){let e=!1,t="";this.minValue===this.absMinValue&&this.maxValue===this.absMaxValue&&this.$.unknown.checked||(e=!0),e&&(t=this.minValue+" to "+this.maxValue),this.dispatchEvent(new CustomEvent("set-selected",{detail:{selected:e,label:t}}))}_show(e){this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:e}}))}reset(){this.minValue=this.absMinValue,this.maxValue=this.absMaxValue,this.$.unknown.checked=!0,this._onRangeNullChange()}onParentFilterClicked(){this.reset()}});var I=n(188),E=n.n(I),A=n(187),z=n.n(A),F=n(186),P=n.n(F),R=(n(154),n(185)),N=n.n(R);window.customElements.define("app-normal-checkbox",class extends i.a{static get properties(){return{value:{type:String,value:""},label:{type:String,value:""},labelMap:{type:Object,value:null,observer:"_onLabelMapUpdate"},labelMapType:{type:String,value:null},realLabel:{type:String,computed:"_realLabel(value, label)"},checked:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1},ariaChecked:{type:String,reflectToAttribute:!0,computed:"_computeAriaChecked(checked)"},ariaDisabled:{type:String,reflectToAttribute:!0,computed:"_computeAriaDisabled(disabled)"},role:{type:String,value:"checkbox",reflectToAttribute:!0},tabindex:{type:Number,computed:"_computeTabIndex(disabled)",reflectToAttribute:!0}}}static get template(){let e=document.createElement("template");return e.innerHTML=N.a,e}constructor(){super(),this.addEventListener("click",e=>this._onClick(e)),this.addEventListener("keyup",e=>{13===e.which&&this._onClick(e)})}_realLabel(e,t){return this._getLabel()}_computeAriaChecked(){return this.checked?"true":"false"}_computeAriaDisabled(){return this.disabled?"true":"false"}_computeTabIndex(){return this.disabled?-1:0}_getLabel(){return null===this.labelMapType&&this._onLabelMapUpdate(),this.labelMapType?"object"===this.labelMapType&&this.labelMap[this.value]?this.labelMap[this.value]:"function"===this.labelMapType?this.labelMap(this.value):this.value:this.value}_onLabelMapUpdate(){this.labelMapType="",this.labelMap&&(this.labelMapType=typeof this.labelMap)}_onClick(){this.disabled||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0})))}});window.customElements.define("app-facet-checkbox",class extends i.a{static get properties(){return{type:{type:String,value:""},value:{type:String,value:"",observer:"_onValueChange"},labelMap:{type:Object,value:()=>{}},checked:{type:Boolean,value:!1,notify:!0,observer:"_onCheckedChange"}}}ready(){super.ready(),this.ele=document.createElement("app-normal-checkbox"),this.ele.label=this._getLabel(),this._setValue(),this.checked&&this.ele.setAttribute("checked",this.checked),this.ele.addEventListener("checked-changed",e=>{this.checked=e.detail.value}),this.appendChild(this.ele)}_setValue(){this.value&&(this.ele.value=this.value,this.ele.label=this._getLabel())}_getLabel(){return this.labelMap&&this.labelMap[this.value]?this.labelMap[this.value]:this.value}_onCheckedChange(){this.ele&&this.ele.checked!==this.checked&&(this.ele.checked=this.checked)}_onValueChange(){this.ele&&this.ele.setAttribute("value",this.value)}});n(153);window.customElements.define("app-facet-filter",class extends(Mixin(i.a).with(EventInterface,z.a,k.a)){static get properties(){return{label:{type:String,value:""},filter:{type:String,value:""},ignore:{type:Array,value:()=>[]},valueMap:{type:Object,value:null},buckets:{type:Array,value:()=>[]},bucketsIronList:{type:Array,value:()=>[]},ironListActive:{type:Boolean,value:!1},notified:{type:Object,value:()=>({})}}}constructor(){super(),this.active=!0,this.updateTimer=-1}resize(){requestAnimationFrame(()=>{this.$.list.fire("iron-resize")})}static get template(){let e=document.createElement("template");return e.innerHTML=P.a,e}_onFilterBucketsUpdate(e){if(e.filter===this.filter){if(e.buckets.forEach(e=>{this.notified[e.key]&&!e.active?this._notifySelected(e.active,e.key):!this.notified[e.key]&&e.active&&this._notifySelected(e.active,e.key)}),Object.keys(e.buckets).length>50){this.$.list.style.display="block";let t=this.$.list.scrollTop;this.bucketsIronList=e.buckets,this.buckets=[],this.ironListActive=!0,this.$.list.scrollTop=t,requestAnimationFrame(()=>{this.$.list.scrollTop=t})}else this.$.list.style.display="none",this.bucketsIronList=[],this.buckets=e.buckets,this.ironListActive=!1;this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:0!==e.buckets.length}}))}}getBuckets(){return this.ironListActive?this.bucketsIronList:this.buckets}onParentFilterClicked(e){let t=this._getCurrentSearchDocument();this._setPaging(t,0),this._removeKeywordFilter(t,this.filter,e),this.RecordModel.setSearchLocation(t),this._notifySelected(!1,e)}_notifySelected(e,t){!e&&this.notified[t]?delete this.notified[t]:e&&(this.notified[t]=!0),this.dispatchEvent(new CustomEvent(`${e?"add":"remove"}-selected`,{detail:{label:t}}))}_toggleFilter(e){e.currentTarget.checked?this.appendFilter(e):this.removeFilter(e)}appendFilter(e){let t=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))];if(t.empty)return;let n=this._getCurrentSearchDocument();this._setPaging(n,0),this._appendKeywordFilter(n,this.filter,t.key),this.RecordModel.setSearchLocation(n),this._notifySelected(!0,t.key)}removeFilter(e){let t=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))],n=this._getCurrentSearchDocument();this._setPaging(n,0),this._removeKeywordFilter(n,this.filter,t.key),this.RecordModel.setSearchLocation(n),this._notifySelected(!1,t.key)}});window.customElements.define("app-filter-panel",class extends i.a{static get properties(){return{filter:{type:Object,value:null,observer:"_render"},opened:{type:Boolean,value:!1,observer:"_toggleOpened"},selected:{type:Array,value:()=>[]}}}static get template(){let e=document.createElement("template");return e.innerHTML=E.a,e}_render(){if(this.filter){this.innerHTML="";var e=document.createElement("app-"+this.filter.type+"-filter");e.label=this.filter.label,e.filter=this.filter.filter,e.ignore=this.filter.ignore,e.valueMap=this.filter.valueMap||{},e.isDollar=this.filter.isDollar,e.addEventListener("update-visibility",e=>{this.style.display=e.detail.show?"block":"none"}),e.addEventListener("add-selected",e=>{this.selected.findIndex(t=>t.label===e.detail.label)>-1||this.push("selected",e.detail)}),e.addEventListener("remove-selected",e=>{let t=this.selected.findIndex(t=>t.label===e.detail.label);-1!==t&&this.splice("selected",t,1)}),e.addEventListener("set-selected",e=>{e.detail.selected?this.selected=[e.detail]:this.selected=[]}),this.ele=e,this.$.filters.appendChild(e)}}toggle(){this.opened=!this.opened}_toggleOpened(){this.opened&&this.ele&&this.ele.resize&&this.ele.resize()}_onToggleClicked(e){"keyup"===e.type&&13!==e.which&&32!==e.which||this.toggle()}_onFilterClicked(e){"keyup"===e.type&&13!==e.which||this._notifyFilterClicked(e.currentTarget.getAttribute("label"))}_notifyFilterClicked(e){this.ele&&this.ele.onParentFilterClicked&&this.ele.onParentFilterClicked(e)}});var B=n(150),H=(n(142),n(179)),U=n.n(H),D=n(74);customElements.define("app-collection-info-panel",class extends(Mixin(i.a).with(EventInterface)){static get template(){let e=document.createElement("template");return e.innerHTML=U.a,e}static get properties(){return{showing:{type:Boolean,value:!1,observer:"_onShowingUpdate"},title:{type:String,value:""},coverage:{type:String,value:""},subject:{type:String,value:""},citation:{type:String,value:""},citationFormat:{type:String,value:"mla"},engines:{type:Array,value:[]}}}constructor(){super(),this.active=!0,this.firstShow=!0,this._injectModel("RecordModel","AppStateModel")}async ready(){super.ready(),this._onSelectedCollectionUpdate(this.AppStateModel.getSelectedCollection())}async _onSelectedCollectionUpdate(e){if(!e)return this.title="",this.$.description.innerHTML="",this.subject="",this.coverage="",void(this.citation="");if(this.collection=e,this.title=e.name||"",this.$.description.innerHTML=B.markdown.toHTML(e.description||""),e.subject?this.subject=e.subject.join(", "):this.subject="",e.coverage)this.coverage=e.coverage.join(", ");else{this.selectedCollectionId=e["@id"];let t=await this.RecordModel.defaultSearch(e["@id"]);if(t.id!==this.selectedCollectionId)return;if(t.payload&&t.payload.aggregations&&t.payload.aggregations.ranges&&t.payload.aggregations.ranges.yearPublished){let e=t.payload.aggregations.ranges.yearPublished;this.coverage=e.min+" - "+e.max}else this.coverage=""}this.firstShow||this._onCiteFormatChange()}async _onShowingUpdate(){this.showing&&this.firstShow&&(this.firstShow=!1,this.engines=D.default.engineList.map((e,t)=>({engine:e,label:D.default.engineListLabels[t]})),await D.default._loadEngines(),await this._onCiteFormatChange())}async _onCiteFormatChange(){this.citation=await D.default.renderEsRecord(this.collection,this.$.citeFormatInput.value)}});n(140);var j=n(178),O=n.n(j),W=n(20),Z=n.n(W);const q=[];for(var G in Z.a.elasticSearch.facets)q.push({label:Z.a.elasticSearch.facets[G].label,type:Z.a.elasticSearch.facets[G].type,ignore:Z.a.elasticSearch.facets[G].ignore,valueMap:Z.a.elasticSearch.facets[G].valueMap,isDollar:Z.a.elasticSearch.facets[G].isDollar,filter:G});customElements.define("app-filters-panel",class extends(Mixin(i.a).with(EventInterface,k.a)){static get template(){let e=document.createElement("template");return e.innerHTML=O.a,e}static get properties(){return{facetFilters:{type:Array,value:function(){return q}},selectedTab:{type:String,value:"",notify:!0},selectedCollection:{type:Object,value:()=>{}},collectionMode:{type:Boolean,value:!1},tabs:{type:Array,value:()=>[{label:"Information",value:"info"},{label:"Filters",value:"filters"}]}}}constructor(){super(),this.active=!0,this._injectModel("AppStateModel")}ready(){super.ready(),this._onSelectedCollectionUpdate()}_onSelectedCollectionUpdate(e){if(!e)return this.selectedTab="filters",void(this.collectionMode=!1);this.collectionMode=!0,this.selectedCollection=e,this.selectedTab||(this.selectedTab="info")}_fireToggleDrawer(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}_removeCollectionFilter(){let e=this._getCurrentSearchDocument();this._removeKeywordFilter(e,"isPartOf.@id"),this._setPaging(e,0),this.RecordModel.setSearchLocation(e)}}),n.d(t,"AppSearch",function(){return K});class K extends(Mixin(i.a).with(EventInterface,k.a,h.a,u.a)){static get template(){let e=document.createElement("template");return e.innerHTML=o.a,e}static get properties(){return{visible:{type:Boolean,value:!1},results:{type:Array,value:()=>[]},drawerOpen:{type:Boolean,value:!1},firstLoad:{type:Boolean,value:!0},appState:{type:Object,value:()=>({})},wideFiltersPanel:{type:Boolean,value:!1}}}constructor(){super(),this.active=!0}_onAppStateUpdate(e){this.drawerOpen=!!e.filtersDrawerOpen,this.appState=e,"search"!==e.location.path[0]&&"collection"!==e.location.path[0]||this._searchFromAppState()}_searchFromAppState(){this.firstLoad=!1;let e,t=this.appState.location.path;if("collection"===t[0]){if(e=this._urlToSearchDocument(["",encodeURIComponent(JSON.stringify([["isPartOf.@id","or",`/collection/${t[1]}`]])),"","10"]),this.lastQuery===e)return;return this.lastQuery=e,void this._searchRecords(e,!1)}e="search"===t[0]&&t.length>1?this._urlToSearchDocument(t.slice(1,t.length)):this.RecordModel.emptySearchDocument(),this.lastQuery!==e&&(this.lastQuery=e,this._searchRecords(e))}_onRecordSearchUpdate(e){if("error"===e.state)return this.$.resultsPanel.onError(e);if("loading"===e.state)return this.$.resultsPanel.onLoading();if("loaded"!==e.state)return;let t=e.searchDocument.offset,n=e.payload,i=n.total;this.results=n.results,this.$.resultsPanel.render(this.results,i,e.searchDocument.limit,t)}_onPageSizeChange(e){let t=this._getCurrentSearchDocument();this._setPaging(t,t.offset,e.detail),this.RecordModel.setSearchLocation(t)}_onPaginationChange(e){let t=this._getCurrentSearchDocument();this._setPaging(t,e.detail.startIndex),this.RecordModel.setSearchLocation(t)}_toggleDrawer(){this.AppStateModel.set({filtersDrawerOpen:!this.drawerOpen})}_onFiltersTabUpdate(e){this.wideFiltersPanel="info"===e.detail.value,setTimeout(()=>{requestAnimationFrame(()=>{this.$.resultsPanel._resizeAsync()})},300)}}customElements.define("app-search",K)}}]);