(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{168:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=t(201),l=h(t(263)),s=h(t(75)),c=h(t(70)),d=h(t(37));t(264),t(266),t(279),t(186),t(282);var u=h(t(38)),p=h(t(176));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var v=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e._injectModel("AppStateModel"),e._injectModel("RecordModel"),e}var t,r;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{currentRecordId:{type:String,value:""},name:{type:String,value:""},collectionName:{type:String,value:""},date:{type:String,value:""},size:{type:String,value:""},rights:{type:Object,value:function(){}},metadata:{type:Array,value:function(){return[]}},isBagOfFiles:{type:Boolean,value:!1}}}}]),o(n,[{key:"ready",value:(r=f(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),e.next=3,this.AppStateModel.getSelectedRecord();case 3:if(!(t=e.sent)){e.next=11;break}return e.next=7,this._onSelectedRecordUpdate(t);case 7:return e.next=9,this.AppStateModel.getSelectedRecordMedia();case 9:(o=e.sent)&&this._onSelectedRecordMediaUpdate(o);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_onRecordUpdate",value:function(e){"loading"===e.state&&(this.renderedRecordId=null,this.record=null,this.$.description.classList.add("hidden"),this.description="",this.alternativeHeadline="",this.$.link.value="",this.date="",this.collectionName="",this.rights=null,this.$.collectionValue.innerHTML="",this.$.mla.text="",this.$.apa.text="",this.$.chicago.text="",this.$.identifier.classList.add("hidden"),this.$.creator.classList.add("hidden"),this.$.subject.classList.add("hidden"),this.$.publisher.classList.add("hidden"),this.$.fedoraValue.innerHTML="",this.metadata=[],this.isBagOfFiles=!1)}},{key:"_onSelectedRecordUpdate",value:(t=f(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!n["@id"]||n["@id"]!==this.renderedRecordId){e.next=4;break}return e.abrupt("return");case 4:if(this.renderedRecordId=n["@id"],this.record=n,this.record.description?(this.$.description.classList.remove("hidden"),this.$.descriptionValue.innerHTML=a.markdown.toHTML(this.record.description)):this.$.description.classList.add("hidden"),this.description=this.record.description||"",this.alternativeHeadline=this.record.alternativeHeadline||"",this.$.link.value=window.location.href,this.date=d.default.getYearFromDate(this.record.datePublished),this.record.license&&this.record.license["@id"]&&s.default[this.record.license["@id"]]?(t=s.default[this.record.license["@id"]],this.rights={link:this.record.license["@id"],label:t.text,icon:"/images/rights-icons/"+t.icon+".svg"}):this.rights=null,this.collectionName=this.record.collectionId||"",!this.collectionName){e.next=19;break}return e.next=16,this._getCollection(this.collectionName);case 16:i=e.sent,this.collectionName=i.name,this.record.collectionName=i.name;case 19:return this._renderIdentifier(n),this._renderCreators(n),this._renderSubjects(n),this._renderPublisher(n),this.$.collectionValue.innerHTML='<a href="'+n.collectionId+'">'+this.collectionName+"</a>",this._renderFcLink(n),this._updateMetadataRows(),e.next=28,c.default.renderEsRecord(this.record,"mla");case 28:return this.$.mla.text=e.sent,e.next=31,c.default.renderEsRecord(this.record,"apa");case 31:return this.$.apa.text=e.sent,e.next=34,c.default.renderEsRecord(this.record,"chicago");case 34:this.$.chicago.text=e.sent,this.isBagOfFiles=this.record["@type"].includes("http://digital.ucdavis.edu/schema#bagOfFiles");case 36:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_renderFcLink",value:function(e,n){var t=e["@type"].find((function(e){return e.match(/binary/i)}))?"/fcr:metadata":"",i=this._getHost()+"fcrepo/rest"+e["@id"]+t,o='<a href="'+i+'">'+e["@id"]+"</a>";n&&e["@id"]!==n["@id"]&&(t=n["@type"].find((function(e){return e.match(/binary/i)}))?"/fcr:metadata":"",o+='<div class="fc-break"></div><div><a href="'+(i=this._getHost()+"fcrepo/rest"+n["@id"]+t)+'">'+n["@id"]+"</a></div>"),this.$.fedoraValue.innerHTML=o}},{key:"_renderSelectedMedia",value:function(){var e=this._getImageMediaList(this.record);if(this.record.associatedMedia)if(e.length){var n=e[0],t=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;l["@id"]===window.location.pathname&&(n=l)}}catch(e){i=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw o}}this._setSelectedRecordMedia(n)}else this._setSelectedRecordMedia(this.record);else this._setSelectedRecordMedia(this.record)}},{key:"_renderCreators",value:function(e){var n=this,t=d.default.asArray(e,"creators");if(0===t.length)return this.$.creator.classList.add("hidden");this.$.creatorValue.innerHTML=t.map((function(t){var i=n.RecordModel.emptySearchDocument();return n.RecordModel.appendKeywordFilter(i,"creators",t),n.RecordModel.appendKeywordFilter(i,"isPartOf.@id",e.collectionId),'<a href="'+(n._getHost()+"search/"+n.RecordModel.searchDocumentToUrl(i))+'">'+t+"</a>"})).join(", "),this.$.creator.classList.remove("hidden")}},{key:"_renderSubjects",value:function(e){var n=this,t=d.default.asArray(e,"abouts");if(0===t.length)return this.$.subject.classList.add("hidden");this.$.subjectValue.innerHTML=t.map((function(t){var i=n.RecordModel.emptySearchDocument();return n.RecordModel.appendKeywordFilter(i,"abouts.raw",t),n.RecordModel.appendKeywordFilter(i,"isPartOf.@id",e.collectionId),'<a href="'+(n._getHost()+"search/"+n.RecordModel.searchDocumentToUrl(i))+'">'+t+"</a>"})).join(", "),this.$.subject.classList.remove("hidden")}},{key:"_renderPublisher",value:function(e){var n=d.default.asArray(e,"publisher").filter((function(e){return!!e.name}));if(0===n.length)return this.$.publisher.classList.add("hidden");this.$.publisherValue.innerHTML=n.map((function(e){return e.name})).join(", "),this.$.publisher.classList.remove("hidden")}},{key:"_renderIdentifier",value:function(e,n){var t=this;if(!e.identifier)return this.$.identifier.classList.add("hidden");var i=Array.isArray(e.identifier)?e.identifier:[e.identifier];if((i=i.filter((function(e){return!!e.match(/^(ark|doi)/)}))).length){if(n&&n.identifier){var o=Array.isArray(n.identifier)?n.identifier:[n.identifier];o=o.filter((function(e){return!!e.match(/^(ark|doi)/)}));var r=!0,a=!1,l=void 0;try{for(var s,c=o[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var d=s.value;-1===i.indexOf(d)&&i.push(d)}}catch(e){a=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw l}}}this.$.identifier.classList.remove("hidden"),this.$.identifierValue.innerHTML=i.map((function(e){return'<div><a href="'+t._getHost()+e+'">'+e+"</a></div>"})).join("")}else this.$.identifier.classList.add("hidden")}},{key:"_getHost",value:function(){return window.location.protocol+"//"+window.location.host+"/"}},{key:"_onSelectedRecordMediaUpdate",value:function(e){this.name=this.record.name||"",this._renderIdentifier(this.record,e),this._renderFcLink(this.record,e)}},{key:"_updateMetadataRows",value:function(){var e=[];this._addMetadataRow(e,"name","Item Name"),this._addMetadataRow(e,"collectionName","Collection"),this._addMetadataRow(e,"date","Date"),this._addMetadataRow(e,"resourceType","Resource Type"),this.metadata=e}},{key:"_addMetadataRow",value:function(e,n,t){this[n]&&e.push({attr:t||n,value:this[n]})}},{key:"_copyLink",value:function(){var e=this;this.$.link.focus(),this.$.link.setSelectionRange(0,9999),document.execCommand("Copy"),this.$.copyIcon.icon="check",this.$.copyButton.setAttribute("active","active"),setTimeout((function(){e.$.copyIcon.icon="content-copy",e.$.copyButton.removeAttribute("active","active")}),3e3)}}]),n}(Mixin(r.PolymerElement).with(EventInterface,u.default,p.default));n.default=v,customElements.define("app-record",v)},176:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();e.exports=function(e){return function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._injectModel("MediaModel"),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,[{key:"_getImgPath",value:function(e){return this.MediaModel.getImgPath(e)}},{key:"_getImgUrl",value:function(e,n,t){return this.MediaModel.getImgUrl(e,n,t)}},{key:"_getImageMediaList",value:function(e){return this.MediaModel.getImageMediaList(e)}}]),n}(e)}},186:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(4),r=l(t(187)),a=l(t(202));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,[{key:"_onTextUpdate",value:function(){this.$.citeText.innerHTML=this.text||"",this.$.copyArea.value=(0,a.default)(this.text).trim()}},{key:"_onCopyClicked",value:function(){var e=this;this.$.copyArea.style.height=this.$.citeText.offsetHeight-10+"px",this.$.copyArea.style.width=this.$.citeText.offsetWidth-10+"px",this.copying=!0,this.$.copyArea.focus(),this.$.copyArea.setSelectionRange(0,9999),document.execCommand("Copy"),this.$.icon.icon="check",setTimeout((function(){e.$.icon.icon="content-copy",e.copying=!1}),3e3)}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}},{key:"properties",get:function(){return{text:{type:String,value:"",observer:"_onTextUpdate"},copying:{type:Boolean,value:!1}}}}]),n}(o.PolymerElement);n.default=s,customElements.define("app-copy-cite",s)},187:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n  }\n  [hidden] {\n    display:none !important;\n  }\n  textarea {\n    width: 100%;\n    font-size: var(--font-size);\n  }\n\n  .copyButton {\n    white-space: nowrap;\n    height: 38px;\n    /* width: 85px; */\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    border-radius: 0;\n    border: none;\n    cursor: pointer;\n  }\n\n  .copyButton[active] {\n    text-align: center;\n    background-color: var(--default-primary-color);\n    color: var(--default-secondary-color);\n  }\n  \n  .copyButton[active] span {\n    display: none;\n  }\n\n  #citeText {\n    padding-bottom: 10px;\n    overflow: auto;\n    word-break: break-word;\n  }\n\n  .buttons {\n    display: flex;\n  }\n</style>\n\n<div hidden$="[[copying]]" id="citeText"></div>\n<textarea hidden$="[[!copying]]" id="copyArea"></textarea>\n\n<div class="buttons">\n  <div>\n    <slot></slot>\n  </div>\n  <button active$="[[copying]]" on-click="_onCopyClicked" class="copyButton">\n    <iron-icon icon="content-copy" id="icon"></iron-icon>\n    <span>Copy</span>\n  </button>\n</div>\n'},188:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=t(189),l=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,[{key:"_renderTabs",value:function(){var e=this;this.tabs&&(this.selected||!this.tabs.length?this.tabs.forEach((function(n,t){var i=n.value===e.selected;e.set("tabs."+t+".selected",i),e.set("tabs."+t+".ariaSelected",i+""),n.label||e.set("tabs."+t+".label",n.value)})):this.selected=this.tabs[0])}},{key:"_onTabClicked",value:function(e){"keyup"===e.type&&13!==e.which||(this.selected=e.currentTarget.getAttribute("value"))}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{role:{type:String,value:"tablist",reflectToAttribute:!0},selected:{type:String,value:"",notify:!0,observer:"_renderTabs"},tabs:{type:Array,value:function(){return[]},observer:"_renderTabs"}}}}]),n}(r.PolymerElement);n.default=s,customElements.define("app-tabs",s)},189:function(e,n){e.exports='<style>\n  :host {\n    display : block;\n  }\n  .layout {\n    display: flex;\n  }\n  .tab {\n    flex: 1;\n    cursor: pointer;\n    text-transform: uppercase;\n    padding: 12px 0 9px 0;\n    text-align: center;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-weight: normal;\n    color: var(--gray-text);\n    border-bottom: 2px solid var(--gray-text);\n  }\n  .tab:focus {\n    border-bottom-color: var(--default-secondary-color);\n    outline: none;\n  }\n  .tab[selected] {\n    cursor: default;\n    font-weight: bold;\n    color: var(--default-primary-color);\n    border-bottom: 4px solid var(--default-primary-color);\n    padding: 12px 0 7px 0;\n  }\n</style>\n\n<div class="layout">\n  <template is="dom-repeat" items="[[tabs]]">\n    <div class="tab" \n      role="tab" \n      tabindex="0" \n      aria-selected$="[[item.ariaSelected]]"\n      selected$="[[item.selected]]"\n      on-click="_onTabClicked" \n      on-keyup="_onTabClicked"\n      value$="[[item.value]]">\n      [[item.label]]\n    </div>\n  </template>\n</div>'},208:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function o(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n;return i(e,[{key:"load",value:(n=o(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loaded){e.next=2;break}return e.abrupt("return",this.loaded);case 2:if(!this.loading){e.next=6;break}return e.next=5,this.loading;case 5:return e.abrupt("return",this.loaded);case 6:return this.loading=new Promise(function(){var e=o(regeneratorRuntime.mark((function e(i,o){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(11).then(t.t.bind(null,307,7));case 2:return r=e.sent.default,e.next=5,t.e(11).then(t.t.bind(null,308,7));case 5:return a=e.sent,e.next=8,a.polyfill.installAll();case 8:n.loaded={plyr:r,shaka:a},i(n.loaded);case 10:case"end":return e.stop()}}),e,n)})));return function(n,t){return e.apply(this,arguments)}}()),e.abrupt("return",this.loading);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),e}();n.default=new r},263:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: var(--super-light-background-color);\n  }\n\n  /*\n  app-media-viewer {\n    position: relative;\n  }\n  */\n\n  .container.top {\n    padding: 20px 0;\n    background-color: var(--light-background-color);\n  }\n\n  input {\n    padding: 0 0 0 5px;\n    display: block;\n    border: none;\n    height: 38px;\n  }\n\n  .copyButton {\n    white-space: nowrap;\n    height: 38px;\n    width: 85px;\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    border-radius: 0;\n    border: none;\n    cursor: pointer;\n  }\n  .copyButton[active] {\n    text-align: center;\n    background-color: var(--default-primary-color);\n    color: var(--default-secondary-color);\n  }\n  .copyButton[active] span {\n    display: none;\n  }\n\n  h3 {\n    margin: 0 0 10px 0;\n    color: var(--default-primary-color);\n  }\n\n  .label {\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n  }\n\n  .section {\n    margin-bottom: 15px;\n  }\n  .section.bordered {\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px dashed var(--medium-background-color);\n  }\n\n  .overview {\n    display: flex; \n    width: 100%;\n  }\n\n  .overview > div {\n    flex : 1;\n    padding : 0 10px;\n  }\n\n  .type-date-collection {\n    display: flex;\n    /* align-items: center; */\n  }\n\n  .resource-type {\n    text-transform: capitalize;\n  }\n  .resource-type iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  paper-toast {\n    --paper-toast-background-color: var(--default-secondary-color);\n    --paper-toast-color: var(--default-primary-color);\n  }\n\n  #descriptionValue p,\n  #descriptionValue h1,\n  #descriptionValue h2,\n  #descriptionValue h3 {\n    margin-top: 0;\n  }\n\n  #link {\n    width: 100%;\n    box-sizing: border-box;\n  }\n\n  .metadata-row {\n    display: flex;\n    margin: 30px 20px;\n  }\n  .metadata-row .attr {\n    flex: 0.25;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy); \n  }\n  .metadata-row .value {\n    flex: 0.75;\n    word-break: break-word;\n  }\n\n  .cite-container {\n    padding: 15px 0;\n    margin: 0 15px;\n    border-bottom: 1px dashed var(--medium-background-color);\n    display: flex;\n  }\n  .cite-container .label {\n    padding-right: 10px;\n    flex: 0.25;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy); \n  }\n  .cite-container .text {\n    flex: 0.75;\n  }\n\n  .hidden {\n    display: none !important;\n  }\n\n  .fc-break {\n    height: 10px;\n  }\n\n  img[rights] {\n    height: 22px;\n    width: 22px;\n    vertical-align: sub;\n  }\n\n  @media( max-width: 550px ) {\n    .metadata-row {\n      display: block;\n    }\n  }\n\n  @media( max-width: 768px ) {\n    .overview {\n      display: block;\n    }\n    .cite-container {\n      display: block;\n      padding: 15px 0 15px 15px;\n      margin: 0;\n    }\n    .type-date-collection {\n      display: block;\n    }\n    .type-date-collection > div {\n      margin: 15px 5px;\n    }\n  }\n</style>\n\n<app-media-viewer></app-media-viewer>\n\n<div class="container top">\n  <div class="overview">\n    <div>\n      <h3>[[name]]</h3>\n      \n      <div hidden$="[[!alternativeHeadline]]" class="section">\n        <div style="font-weight: bold;">[[alternativeHeadline]]</div>\n      </div>\n\n      <div class="section type-date-collection">\n        \x3c!-- \n          /** \n            TODO: add back in when we figure out consolidated resource type \n          **/\n          \n          <div style="flex:.75">\n            <div class="label">Resource Type</div>\n            <div class="resource-type">\n              <iron-icon icon="fin-icons:[[resourceType]]"></iron-icon>\n              <div id="resourceType"></div>\n            </div>\n          </div>\n        --\x3e\n\n         <div style="flex:.5;padding-right:30px" hidden$="[[!date]]">\n           <div class="label">Date</div>\n           <div>[[date]]</div>\n         </div>\n         <div >\n           <div class="label">Collection</div>\n           <div>[[collectionName]]</div>\n         </div>\n       </div>\n    </div>\n    <div>\n      <div style="display: flex; align-items: center" class="section bordered">\n        <span class="label" style="padding-right: 10px; display:inline-block">Permalink</span>\n        <div style="flex:1">\n          <input id="link" type="text" />\n        </div>\n        <button on-click="_copyLink" id="copyButton" class="copyButton">\n          <iron-icon icon="content-copy" id="copyIcon"></iron-icon>\n          <span>Copy</span>\n        </button>\n      </div>\n\n      <div class="section bordered">\n        <div class="label">Download Options</div>\n        <app-media-download id="download" hidden$="[[isBagOfFiles]]"></app-media-download>\n        <app-fs-media-download id="download" hidden$="[[!isBagOfFiles]]"></app-fs-media-download>\n      </div>\n\n      \x3c!--\n        <div class="section bordered">\n          <div class="label">Download Image Bundle</div>\n\n          <form action$="/api/tar/[[tarName]]" method="POST" target="_blank">\n            <input type="text" hidden name="paths" id="tarPaths" style="display:none">\n            <input type="submit" value="Download Tar">\n          </form>\n        </div>\n      --\x3e\n\n      <div hidden$="[[!rights]]">\n        <a href$="[[rights.link]]" target="_block">\n          <img src$="[[rights.icon]]" rights />\n          <span>[[rights.label]]</span>\n        </a>\n      </div>\n\n    </div>\n  </div>\x3c!-- end overview --\x3e\n</div>\n\n<div class="container" style="padding-bottom: 50px">\n  <app-record-metadata-layout>\n    <div slot="left">\n      <div class="metadata-row">\n          <div class="attr">Collection</div>\n          <div class="value" id="collectionValue"></div>\n        </div>\n\n      <div class="metadata-row" id="description">\n        <div class="attr">Description</div>\n        <div class="value" id="descriptionValue"></div>\n      </div>\n\n      <div class="metadata-row" id="identifier">\n        <div class="attr">ARK / DOI</div>\n        <div class="value" id="identifierValue"></div>\n      </div>\n\n      <div class="metadata-row" id="creator">\n        <div class="attr">Creator</div>\n        <div class="value" id="creatorValue"></div>\n      </div>\n\n      <div class="metadata-row" id="publisher">\n        <div class="attr">Publisher</div>\n        <div class="value" id="publisherValue"></div>\n      </div>\n\n      <div class="metadata-row" id="subject">\n        <div class="attr">Subject</div>\n        <div class="value" id="subjectValue"></div>\n      </div>\n\n      <div class="metadata-row">\n        <div class="attr">Fedora Link</div>\n        <div class="value" id="fedoraValue"></div>\n      </div>\n    </div>\n    \n    <div slot="right">\n      <div class="cite-container">\n        <div class="label">MLA</div>\n        <div class="text">\n          <app-copy-cite id="mla"></app-copy-cite>\n        </div>\n      </div>\n\n      <div class="cite-container">\n        <div class="label">APA</div>\n        <div class="text">\n          <app-copy-cite id="apa"></app-copy-cite>\n        </div>\n      </div>\n\n      <div class="cite-container">\n        <div class="label">Chicago</div>\n        <div class="text">\n          <app-copy-cite id="chicago"></app-copy-cite>\n        </div>\n      </div>\n      \n    </div>\n  </app-record-metadata-layout>\n</div>'},264:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=p(t(265)),l=p(t(38)),s=p(t(176)),c=p(t(10)),d=p(t(37)),u=p(t(203));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e._injectModel("AppStateModel","MediaModel"),e}var t,r;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}},{key:"properties",get:function(){return{defaultImage:{type:Boolean,value:!0},formats:{type:Array,value:function(){return[]}},href:{type:String,value:""},imageSizes:{type:Array,value:function(){return[]}},hasMultipleDownloadMedia:{type:Boolean,value:!1},selectedMediaHasSources:{type:Boolean,value:!1},fullSetCount:{type:Boolean,value:0},fullSetSelected:{type:Boolean,value:!1},downloadOptions:{type:Array,value:function(){return[]}},showImageFormats:{type:Boolean,value:!1}}}}]),o(n,[{key:"ready",value:(t=regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),e.next=3,this.AppStateModel.getSelectedRecord();case 3:if(!(t=e.sent)){e.next=10;break}return this._onSelectedRecordUpdate(t),e.next=8,this.AppStateModel.getSelectedRecordMedia();case 8:(o=e.sent)&&this._onSelectedRecordMediaUpdate(o);case 10:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function i(o,r){try{var a=e[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));n(l)}("next")}))},function(){return r.apply(this,arguments)})},{key:"_onSelectedRecordUpdate",value:function(e){if(this.rootRecord=e,e){var n=0;for(var t in e.media){var i=!0,o=!1,r=void 0;try{for(var a,l=e.media[t][Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;if("imageList"===t?e.media.imageList.forEach((function(e){n+=e.hasPart.length})):n+=this._getDownloadSources(s,!0).length,n>1)break}}catch(e){o=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}if(n>1)break}this.hasMultipleDownloadMedia=n>1,this.hasMultipleDownloadMedia&&(this.$.single.checked=!0,this.$.fullset.checked=!1),this.fullSetSelected=!1}}},{key:"_onSelectedRecordMediaUpdate",value:function(e){this.showImageFormats=!1,this.fullSetSelected=!1;var n=this._getDownloadSources(e);0!==n.length?(this.selectedMediaHasSources=!0,this.fullSetCount=this._getAllNativeDownloadSources().length,this.allSources=n,this.downloadOptions=n,this.$.downloadOptions.innerHTML=n.map((function(e,n){return'<option value="'+n+'" '+(0===n?"selected":"")+">"+e.label+"</option>"})).join(),this.$.downloadOptions.value="0",this._setDownloadHref(n[0])):this.selectedMediaHasSources=!1}},{key:"_getDownloadSources",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return e?(e.clientMediaDownload&&(Array.isArray(e.clientMediaDownload)?e.clientMediaDownload.length&&(e=e.clientMediaDownload[0]):e=e.clientMediaDownload),"VideoObject"===d.default.getMediaType(e)?i=i.concat(this._getVideoSources(e)):"AudioObject"===d.default.getMediaType(e)?i=i.concat(this._getAudioSources(e)):"ImageObject"===d.default.getMediaType(e)?(this.showImageFormats=!0,i=i.concat(this._getImageSources(e,t)),this._renderImgFormats(e,null,"FR")):"ImageList"===d.default.getMediaType(e)&&(e.hasPart||[]).forEach((function(e){i=i.concat(n._getImageSources(e,t))})),i):i}},{key:"_setDownloadHref",value:function(e){var n=e.src;if("image"===e.type){var t=this.$.format.value;e.originalFormat===t&&"FR"===e.imageType||(n+=e.service+t)}this.sourceType=e.type,this.href=n}},{key:"_getImageSources",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this._getImageFormat(e);if(n)return[{record:e,type:"image",src:c.default.fcrepoBasePath+e["@id"],originalFormat:t,filename:e.filename||e.name,label:e.filename||e.name}];var i=[],o=!0,r=!1,a=void 0;try{for(var l,s=c.default.imageDownload.sizes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var d=l.value,u=Math.floor(e.image.width*d.ratio),p=Math.floor(e.image.height*d.ratio),h=u+","+p;i.push({record:e,type:"image",src:c.default.fcrepoBasePath+e["@id"],service:"/svc:iiif/full/"+h+"/0/default.",originalFormat:t,imageType:d.imageType,filename:e.filename||e["@id"].split("/").pop(),label:d.label+" "+u+" x "+p+" px",width:u,height:p})}}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return i}},{key:"_getAudioSources",value:function(e){return[{record:e,src:c.default.fcrepoBasePath+e["@id"],type:"audio",filename:e.filename||e["@id"].split("/").pop(),label:this._getTypeLabel(e)+(e.fileSize?" ("+(0,u.default)(e.fileSize)+") ":"")}]}},{key:"_getVideoSources",value:function(e){var n=this,t=[{record:e,type:"video",src:c.default.fcrepoBasePath+e["@id"],filename:e.filename||e["@id"].split("/").pop(),label:this._getTypeLabel(e)+(e.fileSize?" ("+(0,u.default)(e.fileSize)+") ":"")}],i=e.transcript||[];return Array.isArray(i)||(i=[i]),i.filter((function(e){return!0!==e.error})).forEach((function(e){t.push({record:e,src:c.default.fcrepoBasePath+e["@id"],type:"transcript",filename:e.filename||e["@id"].split("/").pop(),label:n._getTypeLabel(e)+" (video transcript only)"})})),t}},{key:"_getTypeLabel",value:function(e){var n=e.encodingFormat||e.fileFormat;return n?n.split("/").pop():e["@id"].split("/").pop().split(".").pop()}},{key:"_onChangeDownloadOptions",value:function(e){var n=this.downloadOptions[parseInt(e.currentTarget.value)];"image"===n.type&&this._renderImgFormats(n.record,this.$.format.value,n.imageType),this._setDownloadHref(n)}},{key:"_renderImgFormats",value:function(e,n,t){var i=this,o=this._getImageFormat(e);n||(n=o);var r=c.default.imageDownload.formats.slice(0);-1===r.indexOf(o)&&"FR"===t&&r.push(o),this.formats=r,this.$.format.innerHTML="",this.formats.forEach((function(e){var r=document.createElement("option");r.innerHTML=e+(e===o&&"FR"===t?" (native)":""),r.value=e,e===n&&r.setAttribute("selected","selected"),i.$.format.appendChild(r)}))}},{key:"_getImageFormat",value:function(e){var n=(e.fileFormat||e["@id"].split(".").pop()||"").replace(/.*\//,"").toLowerCase();return"jpeg"===n&&(n="jpg"),n}},{key:"_onFormatSelected",value:function(){var e=this.$.format.value.replace(/ .*/,""),n=this.downloadOptions[parseInt(this.$.downloadOptions.value)];this._renderImgFormats(n.record,e,n.imageType),this._setDownloadHref(n)}},{key:"_toggleMultipleDownload",value:function(){this.fullSetSelected=!!this.$.fullset.checked,this._setZipPaths()}},{key:"_setZipPaths",value:function(){var e={};this.zipName=this.rootRecord.name.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase();var n=this._getAllNativeDownloadSources(),t=!0,i=!1,o=void 0;try{for(var r,a=n[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;e[l.filename]=l.src}}catch(e){i=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw o}}this.$.zipPaths.value=JSON.stringify(e)}},{key:"_getAllNativeDownloadSources",value:function(){var e=[];for(var n in this.rootRecord.media){var t=!0,i=!1,o=void 0;try{for(var r,a=this.rootRecord.media[n][Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;e=e.concat(this._getDownloadSources(l,!0))}}catch(e){i=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw o}}}return e}},{key:"_onDownloadFullSetClicked",value:function(){this.$.downloadZip.submit();var e=this.rootRecord["@id"].replace(c.default.fcrepoBasePath,"");gtag("event","download",{event_category:"fullset",event_label:e,value:1})}},{key:"_onDownloadClicked",value:function(){var e=this.href.replace(c.default.fcrepoBasePath,"");gtag("event","download",{event_category:this.sourceType,event_label:e,value:1})}}]),n}(Mixin(r.PolymerElement).with(EventInterface,l.default,s.default));n.default=h,customElements.define("app-media-download",h)},265:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .info {\n    margin: 10px 0;\n    font-size: var(--font-size-sm);\n  }\n  \n  a {\n    display: block;\n    padding: 8px;\n    color : var(--default-primary-color);\n    background-color : var(--default-secondary-color);\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    text-decoration: none;\n    white-space: nowrap;\n    height: 24px;\n  }\n  \n  select {\n    margin-right: 15px;\n    padding: 5px 40px 5px 10px;\n    height: 40px;\n    border: none;\n    border-radius: 0;\n   \n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n\n    background-position: right 10px center;\n    background-size: 10px 6px;\n    background-repeat: no-repeat;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2IiB3aWR0aD0iMTBweCIgaGVpZ2h0PSI2cHgiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojMDAyNjU1O308L3N0eWxlPjwvZGVmcz48Zz48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMCAwIDEwIDAgNSA2IDAgMCIvPjwvZz48L3N2Zz4=\');\n    /* TODO: Seems to cause problem w/width of select box being too small\n    @apply --fin-search-box-select-inverse;\n    */\n    background-color: var(--medium-background-color); \n    color: var(--default-primary-color);\n  }\n\n  select.plainText {\n    padding: 0;\n    border: 0;\n    background: transparent;\n    color: black;\n  }\n\n  button {\n    white-space: nowrap;\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    border-radius: 0;\n    border: none;\n    cursor: pointer;\n    padding: 8px;\n    line-height: calc(var(--font-size) * 1.625);\n  }\n  \n  /* for IE */\n  select::-ms-expand {\n    display: none;\n  }\n  select option {\n    text-transform: uppercase;\n  }\n\n  .layout {\n    display:flex; \n    align-items: center;\n  }\n\n  .layout.btns > * {\n    width: 33%\n  }\n\n  .radio {\n    margin-bottom: 10px;\n  }\n</style>\n\n\n<div id="wrapper">\n  <div class="layout" hidden$="[[!hasMultipleDownloadMedia]]">\n    <div class="radio" style="margin-right: 40px">\n      <input id="single" type="radio" name="set-size" checked on-click="_toggleMultipleDownload" /> \n      <label for="single">Single</label>\n    </div>\n    <div class="radio">\n      <input id="fullset" type="radio" name="set-size" on-click="_toggleMultipleDownload"/> \n      <label for="fullset">Full Set ([[fullSetCount]] files)</label>\n    </div>\n  </div>\n</div>\n\n<div hidden$="[[fullSetSelected]]">\n  <div class="layout btns" style="margin-bottom: 5px;" hidden$="[[!selectedMediaHasSources]]">\n    <select id="downloadOptions" on-change="_onChangeDownloadOptions" ></select>\n    <select id="format" on-change="_onFormatSelected" hidden$="[[!showImageFormats]]"></select>\n    <a id="downloadBtn" href="[[href]]" \n      on-click="_onDownloadClicked" \n      download \n      target="_blank" \n      rel="noopener" \n      style="white-space: nowrap; text-align: center;">\n        <span>\n          Download\n        </span>\n    </a>\n  </div>\n</div>\n\n<div hidden$="[[fullSetSelected]]">\n  <div hidden$="[[selectedMediaHasSources]]" >\n    <em>No downloadable items available</em>\n  </div>\n</div>\n\n\n<form id="downloadZip" \naction$="/api/zip/[[zipName]]" \nmethod="POST" \ntarget="_blank" \nhidden$="[[!fullSetSelected]]">    \n  <input type="text" hidden name="paths" id="zipPaths" style="display: none;">\n  <button on-click="_onDownloadFullSetClicked">\n    <iron-icon icon="file-download"></iron-icon>&nbsp;<span>Download Archive</span>\n  </button>\n</form>'},266:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=u(["<iron-icon icon='file-download'></iron-icon> Browse for file"],["<iron-icon icon='file-download'></iron-icon> Browse for file"]),l=u(["<iron-icon icon='file-download'></iron-icon> Download Archive"],["<iron-icon icon='file-download'></iron-icon> Download Archive"]),s=t(175),c=t(273),d=(i=c)&&i.__esModule?i:{default:i};function u(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}t(274);var p=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.render=d.default.bind(e),e.mode="single",e._injectModel("AppStateModel"),e}var t,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),r(n,null,[{key:"properties",get:function(){return{mode:{type:String}}}}]),r(n,[{key:"firstUpdated",value:(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsViewer=this.shadowRoot.querySelector("app-fs-viewer"),e.t0=this,e.next=4,this.AppStateModel.get();case 4:e.t1=e.sent,e.t0._onAppStateUpdate.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e,this)})),i=function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function i(o,r){try{var a=e[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));n(l)}("next")}))},function(){return i.apply(this,arguments)})},{key:"_onAppStateUpdate",value:function(e){this.selectedRecord=e.selectedRecord,this.selectedRecordMedia=e.selectedRecordMedia}},{key:"_toggleMultipleDownload",value:function(e){this.mode=e.currentTarget.id}},{key:"_onDownloadClicked",value:function(e){if("keyup"!==e.type||13===e.which)if("single"===this.mode)this.fsViewer.show();else if(this.selectedRecordMedia.clientMediaDownload){var n=this.selectedRecordMedia.clientMediaDownload;Array.isArray(n)&&(n=n[0]),"object"===(void 0===n?"undefined":o(n))&&(n=n["@id"]),n="/fcrepo/rest/"+n,console.log("downloading archive using: "+n),open(n,"_blank")}else{var t="/api/zip/bag-of-files"+this.selectedRecordMedia["@id"];open(t,"_blank"),console.log("downloading archive using: "+t)}}},{key:"_renderDownloadBtn",value:function(e){return"single"===this.mode?(0,s.html)(a):(0,s.html)(l)}}]),n}(Mixin(s.LitElement).with(LitCorkUtils));n.default=p,customElements.define("app-fs-media-download",p)},273:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=(i=['\n\n<style>\n  :host {\n    display: block;\n  }\n\n  .layout {\n    display:flex; \n    align-items: center;\n  }\n\n  .layout.btns > * {\n    width: 33%\n  }\n\n  .radio {\n    margin-bottom: 10px;\n  }\n\n  a {\n    cursor: pointer;\n    display: inline-block;\n    padding: 8px 12px 8px 8px;\n    color : var(--default-primary-color);\n    background-color : var(--default-secondary-color);\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    text-decoration: none;\n    white-space: nowrap;\n    height: 24px;\n  }\n  a iron-icon {\n    vertical-align: middle;\n  }\n</style> \n\n<div id="wrapper">\n  <div class="layout">\n    <div class="radio" style="margin-right: 40px">\n      <input id="single" type="radio" name="set-fs-dl-type" checked @click="','" /> \n      <label for="single">Single</label>\n    </div>\n    <div class="radio">\n      <input id="archive" type="radio" name="set-fs-dl-type" @click="','"/> \n      <label for="archive">Archive</label>\n    </div>\n  </div>\n</div>\n\n<a id="downloadBtn" @click="','" @keyup="','" tabindex="0">\n  ',"\n</a>\n\n<app-fs-viewer></app-fs-viewer>\n\n"],o=['\n\n<style>\n  :host {\n    display: block;\n  }\n\n  .layout {\n    display:flex; \n    align-items: center;\n  }\n\n  .layout.btns > * {\n    width: 33%\n  }\n\n  .radio {\n    margin-bottom: 10px;\n  }\n\n  a {\n    cursor: pointer;\n    display: inline-block;\n    padding: 8px 12px 8px 8px;\n    color : var(--default-primary-color);\n    background-color : var(--default-secondary-color);\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    text-decoration: none;\n    white-space: nowrap;\n    height: 24px;\n  }\n  a iron-icon {\n    vertical-align: middle;\n  }\n</style> \n\n<div id="wrapper">\n  <div class="layout">\n    <div class="radio" style="margin-right: 40px">\n      <input id="single" type="radio" name="set-fs-dl-type" checked @click="','" /> \n      <label for="single">Single</label>\n    </div>\n    <div class="radio">\n      <input id="archive" type="radio" name="set-fs-dl-type" @click="','"/> \n      <label for="archive">Archive</label>\n    </div>\n  </div>\n</div>\n\n<a id="downloadBtn" @click="','" @keyup="','" tabindex="0">\n  ',"\n</a>\n\n<app-fs-viewer></app-fs-viewer>\n\n"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));n.default=function(){return(0,a.html)(r,this._toggleMultipleDownload,this._toggleMultipleDownload,this._onDownloadClicked,this._onDownloadClicked,this._renderDownloadBtn(this.mode))};var a=t(175)},274:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=p(['<iron-icon icon="chevron-right"></iron-icon>\n      <span class="breadcrumb">Search Results</span>'],['<iron-icon icon="chevron-right"></iron-icon>\n      <span class="breadcrumb">Search Results</span>']),r=p([""],[""]),a=p(['<iron-icon icon="chevron-right"></iron-icon>\n        <a class="breadcrumb" @click="','" dir="','">',"</a>"],['<iron-icon icon="chevron-right"></iron-icon>\n        <a class="breadcrumb" @click="','" dir="','">',"</a>"]),l=p(['\n      <div class="row" style="height: ','px" ?directory="','" ?selected="','" index="','" @click="','" .context="','">\n        <div>\n          <div class="icon">\n            <iron-icon icon="','"></iron-icon>\n          </div>\n          <div class="file" style="width: ','">\n            <div class="filename">','</div>\n            <div class="directory" ?hidden="','">','</div>\n          </div>\n          <div class="filesize">','</div>\n          <div class="selected-file">\n            <iron-icon icon="check" ?hidden="','"></iron-icon>\n          </div>\n        </div>\n      </div>\n    '],['\n      <div class="row" style="height: ','px" ?directory="','" ?selected="','" index="','" @click="','" .context="','">\n        <div>\n          <div class="icon">\n            <iron-icon icon="','"></iron-icon>\n          </div>\n          <div class="file" style="width: ','">\n            <div class="filename">','</div>\n            <div class="directory" ?hidden="','">','</div>\n          </div>\n          <div class="filesize">','</div>\n          <div class="selected-file">\n            <iron-icon icon="check" ?hidden="','"></iron-icon>\n          </div>\n        </div>\n      </div>\n    ']),s=t(175),c=u(t(275));t(276),t(278),t(74);var d=u(t(203));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function h(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var f={folder:["folder"],"fin-icons:image-solid":["tif","tiff","gif","jpg","jp2","jpeg","webp","bmp","png"],"fin-icons:video-solid":["avi","mp4","flv","wmv","mov"],"fin-icons:sound-solid":["wav","mp3","mid","aif"],"fin-icons:text-solid":["doc","docx","txt","rtf",".odt"],"fin-icons:spreadsheet-solid":["ods","csv","tsv","xsl","xslx"],"fin-icons:pdf-solid":["pdf"],"fin-icons:compressed-solid":["zip","rar","arj","gz","tgz"]},v=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));for(var t in e.render=c.default.bind(e),e.reset(),e._injectModel("AppStateModel","RecordModel"),e.iconMap={},f){var i=!0,o=!1,r=void 0;try{for(var a,l=f[t][Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;e.iconMap[s]=t}}catch(e){o=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}}return window.addEventListener("resize",(function(){return e._onResize()})),e}var t,u,p;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,null,[{key:"properties",get:function(){return{title:{type:String},loadingFiles:{type:Boolean},loadingSearch:{type:Boolean},currentDir:{type:String},files:{type:Array},selectedFile:{type:String},mode:{type:String},thumbnail:{type:String},lineHeight:{type:Number}}}}]),i(n,[{key:"firstUpdated",value:function(){this.contentBody=this.shadowRoot.querySelector(".content-body"),this.scrollPanel=this.shadowRoot.querySelector("app-virtual-scroller"),this.scrollPanel.setItemRenderer(this.renderRow,this),this.parentNode.removeChild(this),document.body.appendChild(this),this.filenameWidth="30px"}},{key:"updated",value:function(e){if(e.has("selectedFile")){var n=!0,t=!1,i=void 0;try{for(var o,r=this.files[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var a=o.value;a.selected=a.fullUrl===this.selectedFile}}catch(e){t=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(t)throw i}}this.scrollPanel.requestUpdate()}}},{key:"_onResize",value:function(){if(this.contentBody){window.innerWidth>700?this.scrollPanel.style.height=window.innerHeight-335-100+"px":this.scrollPanel.style.height=window.innerHeight-335+"px",this.filenameWidth=this.scrollPanel.offsetWidth-155+"px",this.scrollPanel.requestUpdate()}}},{key:"_onAppStateUpdate",value:function(e){if(this.selectedRecord!==e.selectedRecord){if(!e.selectedRecord)return this.reset();this.reset(),this.selectedRecord=e.selectedRecord,this.selectedRecordMedia=e.selectedRecordMedia,this.selectedRecord&&this.selectedRecord["@type"].includes("http://digital.ucdavis.edu/schema#bagOfFiles")&&(this._browseDirectory(),this.title=this.selectedRecord.name||this.selectedRecord.title,this.thumbnail=this.selectedRecord.thumbnailUrl||"")}}},{key:"show",value:(p=h(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.style.display="block",document.body.style.overflow="hidden",window.scrollTo(0,0),this._onResize(),e.t0=this,e.next=7,this.AppStateModel.get();case 7:e.t1=e.sent,e.t0._onAppStateUpdate.call(e.t0,e.t1),setTimeout((function(){n._onResize(),n.scrollPanel._onResize()}),50);case 10:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"hide",value:function(){this.style.display="none",document.body.style.overflow="auto"}},{key:"reset",value:function(){this.selectedRecord=null,this.loadingFiles=!1,this.loadingSearch=!1,this.currentDir="/",this.files=[],this.lineHeight=41,this.selectedFile=""}},{key:"_renderBreadcrumbs",value:function(){var e=this;if("search"===this.mode)return(0,s.html)(o);var n=[];return this.currentDir.replace(/^\//,"").split("/").map((function(t){return n.push(t),""===t?(0,s.html)(r):(0,s.html)(a,e._onBreadcrumbClicked,"/"+n.join("/"),t)}))}},{key:"renderRow",value:function(e){var n=this.files[e],t=this._getIcon(n);return(0,s.html)(l,this.lineHeight-1,n.isDirectory,n.selected,e,this._onItemClicked,this,t,this.filenameWidth,n.filename,"browse"===this.mode,n.directory||"/",void 0!==n.fileSize?(0,d.default)(n.fileSize):"-",!n.selected)}},{key:"_getIcon",value:function(e){var n=e.isDirectory?"folder":(e.filename||"").split(".").pop(),t=this.iconMap[n];return t||"fin-icons:file-solid"}},{key:"_onItemClicked",value:function(e){var n=parseInt(e.currentTarget.getAttribute("index")),t=e.currentTarget.context,i=t.files[n];i.isDirectory?t._browseDirectory(i["@id"].replace(t.selectedRecord["@id"],"")):t.selectedFile=i.fullUrl}},{key:"_onInputKeyup",value:function(e){var n=this,t=e.currentTarget.value;this._autocompleteTimer&&clearTimeout(this._autocompleteTimer),this._autocompleteTimer=setTimeout((function(){n._autocompleteTimer=null,n._typeaheadSearch(t)}),300)}},{key:"_typeaheadSearch",value:(u=h(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.typeaheadSearchText=n,""!==n){e.next=5;break}return this.files=[],this._browseDirectory(),e.abrupt("return");case 5:return this.mode="search",this.lineHeight=52,this.selectedFile="",t={text:n,filters:{collectionId:{type:"keyword",value:[this.selectedRecord.collectionId],op:"or"},"@id":{type:"prefix",value:this.selectedRecord["@id"]}},sort:null,limit:9999,offset:0,facets:{},textFields:["filename"]},e.next=11,this.RecordModel.typeaheadSearch(t,{allRecords:!0});case 11:if(i=e.sent,this.typeaheadSearchText===n){e.next=14;break}return e.abrupt("return");case 14:this.setFiles(i.payload.results,!1);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"_browseDirectory",value:(t=h(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("browse"!==this.mode||this.currentDir!==n){e.next=2;break}return e.abrupt("return");case 2:return this.mode="browse",this.lineHeight=45,this.shadowRoot.querySelector("#searchInput").value="",this.selectedFile="",n||(n=this.currentDir?this.currentDir:"/"),this.currentDir=n,t={filters:{directParent:{type:"keyword",value:[this.selectedRecord["@id"]+this.currentDir.replace(/\/$/,"")],op:"or"}},sort:null,limit:9999,offset:0,facets:{},textFields:[]},e.next=11,this.RecordModel.typeaheadSearch(t,{debug:!0,allRecords:!0});case 11:i=e.sent,this.setFiles(i.payload.results);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setFiles",value:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e.map((function(e){return e.directory=e.directParent.replace(n.selectedRecord["@id"],""),e["@type"].includes("http://fedora.info/definitions/v4/repository#Binary")?e.isFile=!0:(e.isDirectory=!0,e.filename=e["@id"].split("/").pop()),e.fullUrl=n._getFullFileUrl(e),e.selected=e.fullUrl===n.selectedFile,e})),t&&e.sort((function(e,n){return e.filename.toLowerCase()>n.filename.toLowerCase()?1:-1})),this.files=e}},{key:"_getFullFileUrl",value:function(e){return window.location.protocol+"//"+window.location.host+"/fcrepo/rest"+e["@id"]}},{key:"_onClearSearchClicked",value:function(){this._browseDirectory(this.currentDir)}},{key:"_onBreadcrumbClicked",value:function(e){this._browseDirectory(e.currentTarget.getAttribute("dir"))}}]),n}(Mixin(s.LitElement).with(LitCorkUtils));n.default=v,customElements.define("app-fs-viewer",v)},275:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=(i=['\n\n<style>\n  :host {\n    display: none;\n    position: absolute;\n    z-index: 10000;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    /* animation: 300ms linear fs-viewer-animate-in; */\n  }\n\n  @keyframes fs-viewer-animate-in {\n    0% {\n      transform: scale(1.2);\n      opacity: 0.5\n    }\n    100% {\n      transform: scale(1);\n      opacity: 1\n    }\n  }\n\n  .layout {\n    background-color: rgba(0, 0, 0, 0.8);\n    display: flex;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    justify-content: center;\n  }\n\n  .content {\n    margin: 50px 0;\n    height: calc(100vh - 100px);\n    width: 700px;\n    background-color: var(--super-light-background-color);\n    display: flex;\n    flex-direction: column;\n  }\n\n  h2 {\n    margin: 0;\n  }\n\n  .content-body {\n    flex: 1;\n    padding: 20px;\n  }\n\n  .header-layout {\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    padding: 20px;\n    display: flex;\n  }\n\n  .header-image {\n    margin-right: 20px;\n  }\n\n  .header-image .img, .header-image iron-icon[icon="fin-icons:various-outline-stacked"] {\n    height: 100px;\n    width: 100px;\n  }\n\n  #searchInput {\n    font-size: 16px;\n    flex: 1;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0 5px;\n    background: white;\n    border: none;\n    height: 45px;\n    outline: none;\n    background-color: white;\n    border-radius: 0;\n  }\n\n  .row {\n    /* height: 100%; */\n  }\n\n  .vs-row[hover] {\n    background-color: var(--color-light-yellow);\n  }\n\n  .row {\n    cursor: pointer;\n    /* background-color: var(--color-light-yellow); */\n  }\n\n  .row > div {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    margin: 0 8px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .row[selected] {\n    background-color: var(--color-light-yellow);\n  }\n\n  .row .directory {\n    font-size: 11px; \n    line-height: 12px; \n    color: #888;\n    margin-bottom: 6px;\n  }\n\n  .row .icon {\n    width: 30px;\n  }\n\n  .row .filesize {\n    width: 75px;\n  }\n\n  .row .icon, .row .filesize {\n    padding: 6px 0;\n  }\n\n  /* .row .file {\n    flex: 1;\n  } */\n\n  .row .directory, .row .filename {\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .row .selected-file {\n    width: 25px;\n  }\n\n  button.search {\n    background-color: white;\n    color: var(--default-secondary-color);\n    border: none;\n    margin: 0;\n    padding: 5px;\n    height: 45px;\n  }\n\n  iron-icon[icon="home"] {\n    cursor: pointer;\n    color: var(--default-secondary-color);\n  }\n\n  iron-icon[icon="chevron-right"] {\n    color: var(--medium-background-color);\n  }\n\n  iron-icon[icon="folder"] {\n    color: var(--color-aggie-blue);\n  }\n  iron-icon[icon="fin-icons:image-solid"] {\n    color: var(--color-aggie-gold);\n  }\n  iron-icon[icon="fin-icons:video-solid"] {\n    color: var(--color-pinot);\n  }\n  iron-icon[icon="fin-icons:sound-solid"] {\n    color: var(--color-redbud);\n  }\n  iron-icon[icon="fin-icons:text-solid"] {\n    color: var(--color-putah-creek);\n  }\n  iron-icon[icon="fin-icons:spreadsheet-solid"] {\n    color: var(--color-quad);\n  }\n  iron-icon[icon="fin-icons:pdf-solid"] {\n    color: var(--double-decker);\n  }\n  iron-icon[icon="fin-icons:compressed-solid"] {\n    color: var(--color-poppy);\n  }\n  iron-icon[icon="fin-icons:file-solid"] {\n    color: var(--color-grey);\n  }\n  iron-icon[icon="check"] {\n    color: var(--default-secondary-color);\n  }\n\n  .table-header {\n    display: flex;\n    font-size: var(--font-size);\n    color: var(--color-grey);\n    font-style: italic;\n    padding: 10px 0;\n  }\n\n  .table-header > div {\n    padding-left: 5px;\n  }\n\n  .breadcrumbs {\n    color: var(--default-primary-color);\n  }\n\n  .breadcrumbs .breadcrumb {\n    cursor: pointer;\n  }\n\n  app-virtual-scroller {\n    flex: 1;\n    background-color: white;\n  }\n\n  .break {\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px dashed var(--medium-background-color);\n  }\n\n  .footer {\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n  }\n\n  .cancel-btn {\n    border: 1px solid var(--default-secondary-color);\n    color: var(--default-primary-color);\n    padding: 6px 10px;\n    margin: 0 15px 0 0;\n    background-color: transparent;\n    border-radius: 0;\n    font-size: 16px;\n    text-transform: uppercase;\n    font-weight: bold;\n    line-height: 20px;\n    cursor: pointer;\n  }\n\n  .download-btn {\n    border: 1px solid var(--default-secondary-color);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    padding: 6px 10px;\n    text-decoration: none;\n    text-transform: uppercase;\n    font-weight: bold;\n  }\n  .download-button:visited {\n    color: var(--default-primary-color);\n  }\n\n  a[disabled] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  @media (max-width: 700px) {\n    .content {\n      margin: 0;\n      flex: 1;\n      width: 100%;\n      height: calc(100vh);\n    }\n  }\n</style>\n\n<div class="layout">\n<div class="content">\n\n  \n    <div class="header-layout">\n      <div class="header-image">\n        <iron-icon icon="fin-icons:various-outline-stacked" ?hidden="','"></iron-icon>\n        <div class="img" style="background-image: url(','); background-size: cover; background-position: center center;" ?hidden="','" ></div>\n      </div>\n      <div style="flex:1">\n        <h2>',"</h2>\n        <div>",' files</div>\n        <div style="display: flex">\n          <input id="searchInput" type="text" placeholder="Search Files" @keyup="','" />\n          <button class="search">\n            <iron-icon icon="','" @click="','"></iron-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class="content-body">\n      <div class="breadcrumbs">\n        <iron-icon icon="home" @click="','" dir="/"></iron-icon>\n        ','\n      </div>\n\n      <div class="break"></div>\n\n      <div class="table-header">\n        <div style="flex:1">Name</div> \n        <div style="width: 115px">Size</div>\n      </div>\n      <app-virtual-scroller item-height="','" .items="','"></app-virtual-scroller>\n\n      <div class="footer">\n        <div style="flex: 1"></div>\n        <div>\n          <button class="cancel-btn" @click="','">Cancel</button>\n        </div>\n        <div>\n          <a class="download-btn" ?disabled="','" href="','" target="_blank">Download</a>\n        </div>\n      </div> \x3c!-- footer --\x3e\n    </div>\n\n\n</div> \x3c!-- content --\x3e\n</div> \x3c!-- layout --\x3e\n\n'],o=['\n\n<style>\n  :host {\n    display: none;\n    position: absolute;\n    z-index: 10000;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    /* animation: 300ms linear fs-viewer-animate-in; */\n  }\n\n  @keyframes fs-viewer-animate-in {\n    0% {\n      transform: scale(1.2);\n      opacity: 0.5\n    }\n    100% {\n      transform: scale(1);\n      opacity: 1\n    }\n  }\n\n  .layout {\n    background-color: rgba(0, 0, 0, 0.8);\n    display: flex;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    justify-content: center;\n  }\n\n  .content {\n    margin: 50px 0;\n    height: calc(100vh - 100px);\n    width: 700px;\n    background-color: var(--super-light-background-color);\n    display: flex;\n    flex-direction: column;\n  }\n\n  h2 {\n    margin: 0;\n  }\n\n  .content-body {\n    flex: 1;\n    padding: 20px;\n  }\n\n  .header-layout {\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    padding: 20px;\n    display: flex;\n  }\n\n  .header-image {\n    margin-right: 20px;\n  }\n\n  .header-image .img, .header-image iron-icon[icon="fin-icons:various-outline-stacked"] {\n    height: 100px;\n    width: 100px;\n  }\n\n  #searchInput {\n    font-size: 16px;\n    flex: 1;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0 5px;\n    background: white;\n    border: none;\n    height: 45px;\n    outline: none;\n    background-color: white;\n    border-radius: 0;\n  }\n\n  .row {\n    /* height: 100%; */\n  }\n\n  .vs-row[hover] {\n    background-color: var(--color-light-yellow);\n  }\n\n  .row {\n    cursor: pointer;\n    /* background-color: var(--color-light-yellow); */\n  }\n\n  .row > div {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    margin: 0 8px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .row[selected] {\n    background-color: var(--color-light-yellow);\n  }\n\n  .row .directory {\n    font-size: 11px; \n    line-height: 12px; \n    color: #888;\n    margin-bottom: 6px;\n  }\n\n  .row .icon {\n    width: 30px;\n  }\n\n  .row .filesize {\n    width: 75px;\n  }\n\n  .row .icon, .row .filesize {\n    padding: 6px 0;\n  }\n\n  /* .row .file {\n    flex: 1;\n  } */\n\n  .row .directory, .row .filename {\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .row .selected-file {\n    width: 25px;\n  }\n\n  button.search {\n    background-color: white;\n    color: var(--default-secondary-color);\n    border: none;\n    margin: 0;\n    padding: 5px;\n    height: 45px;\n  }\n\n  iron-icon[icon="home"] {\n    cursor: pointer;\n    color: var(--default-secondary-color);\n  }\n\n  iron-icon[icon="chevron-right"] {\n    color: var(--medium-background-color);\n  }\n\n  iron-icon[icon="folder"] {\n    color: var(--color-aggie-blue);\n  }\n  iron-icon[icon="fin-icons:image-solid"] {\n    color: var(--color-aggie-gold);\n  }\n  iron-icon[icon="fin-icons:video-solid"] {\n    color: var(--color-pinot);\n  }\n  iron-icon[icon="fin-icons:sound-solid"] {\n    color: var(--color-redbud);\n  }\n  iron-icon[icon="fin-icons:text-solid"] {\n    color: var(--color-putah-creek);\n  }\n  iron-icon[icon="fin-icons:spreadsheet-solid"] {\n    color: var(--color-quad);\n  }\n  iron-icon[icon="fin-icons:pdf-solid"] {\n    color: var(--double-decker);\n  }\n  iron-icon[icon="fin-icons:compressed-solid"] {\n    color: var(--color-poppy);\n  }\n  iron-icon[icon="fin-icons:file-solid"] {\n    color: var(--color-grey);\n  }\n  iron-icon[icon="check"] {\n    color: var(--default-secondary-color);\n  }\n\n  .table-header {\n    display: flex;\n    font-size: var(--font-size);\n    color: var(--color-grey);\n    font-style: italic;\n    padding: 10px 0;\n  }\n\n  .table-header > div {\n    padding-left: 5px;\n  }\n\n  .breadcrumbs {\n    color: var(--default-primary-color);\n  }\n\n  .breadcrumbs .breadcrumb {\n    cursor: pointer;\n  }\n\n  app-virtual-scroller {\n    flex: 1;\n    background-color: white;\n  }\n\n  .break {\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px dashed var(--medium-background-color);\n  }\n\n  .footer {\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n  }\n\n  .cancel-btn {\n    border: 1px solid var(--default-secondary-color);\n    color: var(--default-primary-color);\n    padding: 6px 10px;\n    margin: 0 15px 0 0;\n    background-color: transparent;\n    border-radius: 0;\n    font-size: 16px;\n    text-transform: uppercase;\n    font-weight: bold;\n    line-height: 20px;\n    cursor: pointer;\n  }\n\n  .download-btn {\n    border: 1px solid var(--default-secondary-color);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    padding: 6px 10px;\n    text-decoration: none;\n    text-transform: uppercase;\n    font-weight: bold;\n  }\n  .download-button:visited {\n    color: var(--default-primary-color);\n  }\n\n  a[disabled] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  @media (max-width: 700px) {\n    .content {\n      margin: 0;\n      flex: 1;\n      width: 100%;\n      height: calc(100vh);\n    }\n  }\n</style>\n\n<div class="layout">\n<div class="content">\n\n  \n    <div class="header-layout">\n      <div class="header-image">\n        <iron-icon icon="fin-icons:various-outline-stacked" ?hidden="','"></iron-icon>\n        <div class="img" style="background-image: url(','); background-size: cover; background-position: center center;" ?hidden="','" ></div>\n      </div>\n      <div style="flex:1">\n        <h2>',"</h2>\n        <div>",' files</div>\n        <div style="display: flex">\n          <input id="searchInput" type="text" placeholder="Search Files" @keyup="','" />\n          <button class="search">\n            <iron-icon icon="','" @click="','"></iron-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class="content-body">\n      <div class="breadcrumbs">\n        <iron-icon icon="home" @click="','" dir="/"></iron-icon>\n        ','\n      </div>\n\n      <div class="break"></div>\n\n      <div class="table-header">\n        <div style="flex:1">Name</div> \n        <div style="width: 115px">Size</div>\n      </div>\n      <app-virtual-scroller item-height="','" .items="','"></app-virtual-scroller>\n\n      <div class="footer">\n        <div style="flex: 1"></div>\n        <div>\n          <button class="cancel-btn" @click="','">Cancel</button>\n        </div>\n        <div>\n          <a class="download-btn" ?disabled="','" href="','" target="_blank">Download</a>\n        </div>\n      </div> \x3c!-- footer --\x3e\n    </div>\n\n\n</div> \x3c!-- content --\x3e\n</div> \x3c!-- layout --\x3e\n\n'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));n.default=function(){return(0,a.html)(r,this.thumbnail,this.thumbnail,!this.thumbnail,this.title,this.files.length,this._onInputKeyup,"search"===this.mode?"close":"fin-icons:search",this._onClearSearchClicked,this._onBreadcrumbClicked,this._renderBreadcrumbs(),this.lineHeight,this.files,this.hide,!this.selectedFile,this.selectedFile)};var a=t(175)},276:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=u([""],[""]),l=u(['\n        <div\n          class="vs-row"\n          @mouseover="','"\n          @mouseout="','" \n          style="position: absolute; left: 0; right: 0; top: ',"px; height: ",'px">\n          ',"\n        </div>"],['\n        <div\n          class="vs-row"\n          @mouseover="','"\n          @mouseout="','" \n          style="position: absolute; left: 0; right: 0; top: ',"px; height: ",'px">\n          ',"\n        </div>"]),s=t(175),c=t(277),d=(i=c)&&i.__esModule?i:{default:i};function u(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var p=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.render=d.default.bind(e),e.itemHeight=20,e.renderedItems=[],e.items=[],e.height=-1,e._onResize=e._onResize.bind(e),e.addEventListener("scroll",(function(){return e._onViewportUpdate()})),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),r(n,null,[{key:"properties",get:function(){return{itemHeight:{type:Number,attribute:"item-height"},items:{type:Array},renderedItems:{type:Array}}}}]),r(n,[{key:"firstUpdated",value:function(){this.positionEle=this.querySelector(".app-virtual-scroller-scroll-panel")}},{key:"connectedCallback",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._onResize),this._cacheHeight()}},{key:"disconnectedCallback",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._onResize)}},{key:"createRenderRoot",value:function(){return this}},{key:"_onResize",value:function(e){this._cacheHeight(!0)}},{key:"_cacheHeight",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.height=this.offsetHeight,!0===e&&this._onViewportUpdate()}},{key:"setItemRenderer",value:function(e,n){this.renderItem=e,this.renderItemScope=n||this}},{key:"updated",value:function(e){e.has("items")&&(this.scrollTop=0,this.totalScrollHeight=this.itemHeight*this.items.length,this.positionEle.style.height=this.itemHeight*this.items.length+"px"),(e.has("itemHeight")||e.has("items"))&&this._onViewportUpdate(!0)}},{key:"_onViewportUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.height<=0&&this._cacheHeight(!1);var n=Math.floor(this.scrollTop/this.itemHeight)-1;n<0&&(n=0);var t=n+Math.ceil(this.height/this.itemHeight)+2;if(t>=this.items.length&&(t=this.items.length),!(this.firstItem===n&&this.lastItem===t&&!1===e||this.itemHeight*(t-1)>this.height&&this.scrollTop+this.height+5>this.totalScrollHeight)){this.firstItem=n,this.lastItem=t;for(var i=[],o=n;o<t;o++)i.push({index:o,top:this.itemHeight*o});this.renderedItems=i,Array.from(this.querySelectorAll(".vs-row")).forEach((function(e){return e.removeAttribute("hover")}))}}},{key:"renderItems",value:function(){var e=this;return this.renderedItems.length>this.items.length?(0,s.html)(a):this.renderedItems.map((function(n){return n.index>=e.items.length?(0,s.html)(a):(0,s.html)(l,e._onRowMouseOver,e._onRowMouseOut,n.top,e.itemHeight,e.renderItem.apply(e.renderItemScope,[n.index]))}))}},{key:"_onRowMouseOver",value:function(e){e.currentTarget.setAttribute("hover","true")}},{key:"_onRowMouseOut",value:function(e){e.currentTarget.removeAttribute("hover")}},{key:"renderItem",value:function(e){throw new Error("You must override this method")}}]),n}(s.LitElement);n.default=p,customElements.define("app-virtual-scroller",p)},277:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=(i=['\n\n<style>\n  app-virtual-scroller {\n    display: block;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  app-virtual-scroller .app-virtual-scroller-scroll-panel {\n    position: relative;\n    /* border: 2px solid red; */\n  }\n</style>  \n\n<div class="app-virtual-scroller-scroll-panel">\n  ',"\n</div>\n\n"],o=['\n\n<style>\n  app-virtual-scroller {\n    display: block;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  app-virtual-scroller .app-virtual-scroller-scroll-panel {\n    position: relative;\n    /* border: 2px solid red; */\n  }\n</style>  \n\n<div class="app-virtual-scroller-scroll-panel">\n  ',"\n</div>\n\n"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));n.default=function(){return(0,a.html)(r,this.renderItems())};var a=t(175)},279:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=t(280),l=(i=a)&&i.__esModule?i:{default:i};t(188),t(64),t(281);var s=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,[{key:"_updateVisiblePanels",value:function(){this.showRight=!0,this.showLeft=!0,this.mobile&&("data"===this.selectedTab?this.showRight=!1:this.showLeft=!1)}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{mobile:{type:Boolean,value:!1,observer:"_updateVisiblePanels"},selectedTab:{type:Number,value:"data",observer:"_updateVisiblePanels"},showRight:{type:Boolean,value:!0},showLeft:{type:Boolean,value:!0},tabs:{type:Array,value:function(){return[{label:"Item Data",value:"data"},{label:"Cite Item",value:"cite"}]}}}}}]),n}(r.PolymerElement);n.default=s,customElements.define("app-record-metadata-layout",s)},280:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .layout {\n    display: flex;\n  }\n  .layout > * {\n    flex : 1;\n  }\n\n  h2 {\n    border-bottom: 1px solid var(--medium-background-color);\n    color: var(--default-primary-color);\n    padding-bottom: 10px;\n    padding-left: 5px;\n  }\n</style>\n\n<iron-media-query query="(max-width: 900px)" query-matches="{{mobile}}"></iron-media-query>\n\n<app-tabs \n  tabs="[[tabs]]" \n  selected="{{selectedTab}}" \n  hidden$="[[!mobile]]">\n</app-tabs>\n\n<div class="layout">\n  <div hidden$="[[!showLeft]]">\n    <h2>Item Data</h2>\n    <slot name="left"></slot>\n  </div>\n  <div hidden$="[[!showRight]]" style="max-width: 100vw;">\n    <h2>Cite this Item</h2>\n    <slot name="right"></slot>\n  </div>\n</div>'},282:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(175),r=l(t(283));t(64),t(284),t(286),t(291),t(293),t(297),t(2);var a=l(t(37));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.render=r.default.bind(e),e._injectModel("AppStateModel","RecordModel"),e.mediaType="image",e.bagOfFilesImage="",e}var t,o;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,null,[{key:"properties",get:function(){return{mediaType:{type:String},tallControls:{type:Boolean},bagOfFilesImage:{type:String}}}}]),i(n,[{key:"firstUpdated",value:(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$.lightbox=this.shadowRoot.getElementById("lightbox"),this.$.lightbox||(this.$.lightbox=document.getElementById("lightbox")),e.t0=this,e.next=5,this.AppStateModel.get();case 5:e.t1=e.sent,e.t0._onAppStateUpdate.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e,this)})),o=function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function i(o,r){try{var a=e[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));n(l)}("next")}))},function(){return o.apply(this,arguments)})},{key:"_onRecordUpdate",value:function(e){}},{key:"_onAppStateUpdate",value:function(e){if(!e.selectedRecordMedia)return this.selectedRecordMediaId="",this.mediaType="";if(e.selectedRecordMedia["@id"]!==this.selectedRecordMediaId){this.selectedRecordMediaId=e.selectedRecordMedia["@id"];var n=a.default.getMediaType(e.selectedRecordMedia).toLowerCase().replace(/object/i,"");"imagelist"===n?n="image":"streamingvideo"===n&&(n="video"),"bagoffiles"===n&&e.selectedRecordMedia.thumbnailUrl?this.bagOfFilesImage=e.selectedRecordMedia.thumbnailUrl:this.bagOfFilesImage="",this.mediaType=n}}},{key:"_onZoomIn",value:function(e){this.AppStateModel.set({showLightbox:!0}),this.$.lightbox.show()}}]),n}(Mixin(o.LitElement).with(LitCorkUtils));n.default=s,customElements.define("app-media-viewer",s)},283:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=(i=['\n\n<style>\n  :host {\n    display: block;\n    position: relative;\n    box-sizing: border-box;\n    background: black;\n  }\n\n  .wrapper {\n    /* display: flex; */\n    /* flex-direction: column; */\n    /* min-height:250px; */\n  }\n\n  #bagoffiles {\n    text-align: center;\n  }\n\n  #bagoffiles iron-icon {\n    width: 100%;\n    height: 100%;\n    max-width: 150px;\n    max-height: 150px;\n    color: var(--color-grey);\n  }\n\n  iron-pages {\n    /* flex: 1; */\n    min-height: 250px;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n  }\n\n  img {\n    max-width: 100%;\n  }\n</style>\n\n<div class="wrapper">\n  <app-image-viewer-lightbox id="lightbox"></app-image-viewer-lightbox>\n\n  <iron-pages selected="','" attr-for-selected="id" selected-attribute="visible">\n    \x3c!-- <app-360-image-viewer id="360"></app-360-image-viewer> --\x3e\n    <div id="bagoffiles">\n      <iron-icon icon="fin-icons:various-outline-stacked" ?hidden="','"></iron-icon>\n      <img src="','" ?hidden="','" />\n    </div>\n    <app-image-viewer id="image"></app-image-viewer>\n    <app-video-viewer id="video"></app-video-viewer>\n    <app-audio-viewer id="audio"></app-audio-viewer>\n  </iron-pages>\n\n  <app-media-viewer-nav @zoom-in="','"></app-media-viewer-nav>\n</div>\n\n'],o=['\n\n<style>\n  :host {\n    display: block;\n    position: relative;\n    box-sizing: border-box;\n    background: black;\n  }\n\n  .wrapper {\n    /* display: flex; */\n    /* flex-direction: column; */\n    /* min-height:250px; */\n  }\n\n  #bagoffiles {\n    text-align: center;\n  }\n\n  #bagoffiles iron-icon {\n    width: 100%;\n    height: 100%;\n    max-width: 150px;\n    max-height: 150px;\n    color: var(--color-grey);\n  }\n\n  iron-pages {\n    /* flex: 1; */\n    min-height: 250px;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n  }\n\n  img {\n    max-width: 100%;\n  }\n</style>\n\n<div class="wrapper">\n  <app-image-viewer-lightbox id="lightbox"></app-image-viewer-lightbox>\n\n  <iron-pages selected="','" attr-for-selected="id" selected-attribute="visible">\n    \x3c!-- <app-360-image-viewer id="360"></app-360-image-viewer> --\x3e\n    <div id="bagoffiles">\n      <iron-icon icon="fin-icons:various-outline-stacked" ?hidden="','"></iron-icon>\n      <img src="','" ?hidden="','" />\n    </div>\n    <app-image-viewer id="image"></app-image-viewer>\n    <app-video-viewer id="video"></app-video-viewer>\n    <app-audio-viewer id="audio"></app-audio-viewer>\n  </iron-pages>\n\n  <app-media-viewer-nav @zoom-in="','"></app-media-viewer-nav>\n</div>\n\n'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));n.default=function(){return(0,a.html)(r,this.mediaType,this.bagOfFilesImage,this.bagOfFilesImage,!this.bagOfFilesImage,this._onZoomIn)};var a=t(175)},284:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4);t(185);var a=d(t(285)),l=d(t(37)),s=d(t(19)),c=d(t(176));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e}var t,r;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}},{key:"properties",get:function(){return{record:{type:Object,value:function(){}},media:{type:Object,value:function(){}},loading:{type:Boolean,value:!1},height:{type:Number,value:600},hasMultipleImages:{type:Boolean,value:!1}}}}]),o(n,[{key:"ready",value:(t=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),e.next=3,this.AppStateModel.getSelectedRecordMedia();case 3:(t=e.sent)&&this._onSelectedRecordMediaUpdate(t);case 5:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function i(o,r){try{var a=e[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));n(l)}("next")}))},function(){return r.apply(this,arguments)})},{key:"_onSelectedRecordMediaUpdate",value:function(e){if(e){var n=l.default.getMediaType(e);"ImageList"!==n&&"ImageObject"!==n||(this.media=e,this._renderImg())}}},{key:"_renderImg",value:function(){var e=this;this.media.hasPart&&this.media.hasPart.length>0&&(this.media.image=this.media.hasPart[0].image),this.media.image.width<this.height&&(this.height=this.media.image.width);var n=this._getImgUrl(this.media.image.url,"",this.height),t=600/this.media.image.height,i=this.media.image.width*t,o=this.offsetWidth-20;o<1&&(o=1);var r=Math.ceil(o>i?this.height:o/i*this.height),a=new Image;this.loading=!0,this.$.loading.style.height=r+"px",a.onload=function(){e.loading=!1,e.$.img.style.height="auto"},a.src=n,this.$.img.style.maxWidth=i+"px",this.$.img.src=n}}]),n}(Mixin(r.PolymerElement).with(EventInterface,s.default,c.default));n.default=u,customElements.define("app-image-viewer",u)},285:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n    background: black;\n    padding: 20px 0;\n    /* position: relative; */\n    box-sizing: border-box;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n\n  #loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  img {\n    width: 100%;\n  }\n\n  .layout {\n    text-align: center;\n  }\n\n  [hidden] {\n    display: none !important;\n  }\n</style>\n\n<div id="loading" hidden$="[[!loading]]">\n  <paper-spinner-lite active$="[[loading]]"></paper-spinner-lite>\n</div>\n\n<div class="layout" hidden$="[[loading]]" style="line-height: 0">\n  <img id="img" />\n</div>'},286:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(175),r=p(t(287));t(2);var a=p(t(10)),l=p(t(37)),s=p(t(208)),c=p(t(194)),d=p(t(209)),u=p(t(210));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var v=c.default+d.default,y=u.default,m=function(){function e(n){f(this,e)}return i(e,[{key:"remove",value:function(){return!0}},{key:"destroy",value:function(){}},{key:"append",value:function(e){}},{key:"setTextVisibility",value:function(e){}},{key:"isTextVisible",value:function(){return!1}}]),e}(),b=function(e){function n(){f(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.render=r.default.bind(e),e._injectModel("AppStateModel","MediaModel"),e.tracks=[],e.player={},e.libsLoaded=!1,e}var t,o,c;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,null,[{key:"properties",get:function(){return{player:{type:Object},tracks:{type:Array},libsLoaded:{type:Boolean}}}}]),i(n,[{key:"_onAppStateUpdate",value:function(e){this.fullPath!==e.location.fullpath&&this._stop(),this.fullPath=e.location.fullpath}},{key:"firstUpdated",value:(c=h(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.AppStateModel.getSelectedRecordMedia();case 2:return(t=e.sent)&&this._onSelectedRecordMediaUpdate(t),e.next=6,this.AppStateModel.get();case 6:this.fullPath=e.sent.location.fullpath,y.indexOf("data:image/svg+xml;base64")>-1&&(y=atob(y.replace("data:image/svg+xml;base64,",""))),this.shadowRoot.querySelector("#sprite-plyr").innerHTML=y,(i=document.createElement("style")).innerHTML=v,window.ShadyDOM&&window.ShadyDOM.inUse?(document.head.appendChild(i),this.hideControls=!1):(this.shadowRoot.appendChild(i),this.hideControls=!0);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_onSelectedRecordMediaUpdate",value:(o=h(regeneratorRuntime.mark((function e(n){var t,i,o,r,a,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if("VideoObject"===(t=l.default.getMediaType(n))||"StreamingVideo"===t){e.next=5;break}return e.abrupt("return");case 5:if(this.media=n,this.tracks=l.default.asArray(n,"caption").filter((function(e){return void 0!==e["@id"]})).map((function(e){var n=e.language,t="en"===n;return{kind:"captions",label:l.default.getLanguage(n),srclang:n,src:e["@id"],default:t}})),!this.libsLoaded){e.next=10;break}return this._loadVideo(),e.abrupt("return");case 10:return e.next=12,s.default.load();case 12:if(i=e.sent,o=i.plyr,r=i.shaka,a=o.supported("video","html5",!0),c=r.Player.isBrowserSupported(),a&&c){e.next=19;break}return e.abrupt("return",alert("Your browser does not support video playback"));case 19:return d=this.shadowRoot.getElementById("video"),this.plyr=new o(d,{hideControls:this.hideControls,fullscreen:{enabled:!1},captions:{update:!1},controls:["play-large","play","progress","current-time","mute","volume"]}),this.shaka=new r.Player(d),this.shaka.configure({textDisplayFactory:m}),this.shaka.addEventListener("error",(function(e){return console.error("shaka error",e)})),this.libsLoaded=!0,e.next=27,this._loadVideo();case 27:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_loadVideo",value:(t=h(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.media){e.next=2;break}return e.abrupt("return");case 2:return n=l.default.getMediaType(this.media),t=a.default.fcrepoBasePath+this.media["@id"],"StreamingVideo"===n&&(t+="/playlist.m3u8"),e.prev=5,e.next=8,this.shaka.load(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error code: ",e.t0.code,"object",e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return t.apply(this,arguments)})},{key:"_stop",value:function(){this.shadowRoot.querySelector("#video").pause(),void 0!==this.plyr&&null!==this.plyr&&0!=Object.entries(this.plyr).length&&this.plyr.stop()}}]),n}(Mixin(o.LitElement).with(LitCorkUtils));n.default=b,customElements.define("app-video-viewer",b)},287:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=l(['\n    <style>\n        :host {\n            display: block;\n            /* padding-bottom: 8px; */\n            background: black;\n            box-sizing: border-box;\n        }\n\n        /*\n        .plyr__controls {\n            margin: 0 auto;\n            width: calc(100vw / 1.8);\n        }\n        */\n\n        .container {\n            padding: 10px;\n        }\n\n        video {\n            max-width: 100%;\n            height: auto;\n            max-height: 600px;\n        }\n\n        .plyr__video-wrapper {\n            text-align: center;\n        }\n\n        .plyr--full-ui input[type=range] {\n            color: #daaa00 !important;\n        }\n\n        button.plyr__control.plyr__control--overlaid,\n        button.plyr__control.plyr__control:hover {\n            background: rgba(218,170,0,1.0) !important;\n        }\n\n        .plyr__control:focus {\n            background: rgba(218,170,0,1.0) !important;\n        }\n        .plyr--full-ui input[type=range] {\n            padding: 2px !important;\n            border: 1px solid transparent !important;\n        }\n        .plyr--full-ui input[type=range]:focus {\n            border: 1px dashed rgba(218,170,0,1.0) !important;\n        }\n        .plyr__tab-focus {\n            outline: 0 !important;\n            background: transparent !important;\n        }\n\n        paper-spinner-lite {\n            --paper-spinner-color: var(--default-secondary-color);\n        }\n\n        #loading {\n            text-align: center;\n        }\n    </style>\n    \n    <div class="container">\n        <div id="sprite-plyr" style="display: none;"></div> \n        <video ?hidden="','" id="video" playsinline controls crossorigin>\n            ','\n        </video>\n        <div id="loading" ?hidden="','">\n            <paper-spinner-lite ?active="','"></paper-spinner-lite>\n        </div>\n    </div>\n'],['\n    <style>\n        :host {\n            display: block;\n            /* padding-bottom: 8px; */\n            background: black;\n            box-sizing: border-box;\n        }\n\n        /*\n        .plyr__controls {\n            margin: 0 auto;\n            width: calc(100vw / 1.8);\n        }\n        */\n\n        .container {\n            padding: 10px;\n        }\n\n        video {\n            max-width: 100%;\n            height: auto;\n            max-height: 600px;\n        }\n\n        .plyr__video-wrapper {\n            text-align: center;\n        }\n\n        .plyr--full-ui input[type=range] {\n            color: #daaa00 !important;\n        }\n\n        button.plyr__control.plyr__control--overlaid,\n        button.plyr__control.plyr__control:hover {\n            background: rgba(218,170,0,1.0) !important;\n        }\n\n        .plyr__control:focus {\n            background: rgba(218,170,0,1.0) !important;\n        }\n        .plyr--full-ui input[type=range] {\n            padding: 2px !important;\n            border: 1px solid transparent !important;\n        }\n        .plyr--full-ui input[type=range]:focus {\n            border: 1px dashed rgba(218,170,0,1.0) !important;\n        }\n        .plyr__tab-focus {\n            outline: 0 !important;\n            background: transparent !important;\n        }\n\n        paper-spinner-lite {\n            --paper-spinner-color: var(--default-secondary-color);\n        }\n\n        #loading {\n            text-align: center;\n        }\n    </style>\n    \n    <div class="container">\n        <div id="sprite-plyr" style="display: none;"></div> \n        <video ?hidden="','" id="video" playsinline controls crossorigin>\n            ','\n        </video>\n        <div id="loading" ?hidden="','">\n            <paper-spinner-lite ?active="','"></paper-spinner-lite>\n        </div>\n    </div>\n']),o=l(['<track kind="','" label="','" src="','" srclang="','" default="','" />'],['<track kind="','" label="','" src="','" srclang="','" default="','" />']);n.default=function(){return(0,r.html)(i,!this.libsLoaded,(0,a.repeat)(this.tracks,(function(e){return(0,r.html)(o,e.kind,e.label,e.src,e.srclang,e.default)})),this.libsLoaded,!this.libsLoaded)};var r=t(175),a=t(288);function l(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}},291:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(175),r=p(t(292));t(2);var a=p(t(10)),l=p(t(37)),s=p(t(208)),c=p(t(194)),d=p(t(209)),u=p(t(210));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var f=c.default+d.default,v=u.default,y=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.render=r.default.bind(e),e._injectModel("AppStateModel","MediaModel"),e.libsLoaded=!1,e}var t,o;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,null,[{key:"properties",get:function(){return{}}}]),i(n,[{key:"_onAppStateUpdate",value:function(e){this.fullPath!==e.location.fullpath&&this._stop(),this.fullPath=e.location.fullpath}},{key:"firstUpdated",value:(o=h(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$.audio=this.shadowRoot.getElementById("audio_player"),this.$.poster=this.shadowRoot.getElementById("audio_poster"),e.next=4,this.AppStateModel.getSelectedRecordMedia();case 4:return(t=e.sent)&&this._onSelectedRecordMediaUpdate(t),e.next=8,this.AppStateModel.get();case 8:this.fullPath=e.sent.location.fullpath,v.indexOf("data:image/svg+xml;base64")>-1&&(v=atob(v.replace("data:image/svg+xml;base64,",""))),this.shadowRoot.querySelector("#sprite-plyr").innerHTML=v,(i=document.createElement("style")).innerHTML=f,window.ShadyDOM&&window.ShadyDOM.inUse?(document.head.appendChild(i),this.hideControls=!1):(this.shadowRoot.appendChild(i),this.hideControls=!0);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_onSelectedRecordMediaUpdate",value:(t=h(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if("AudioObject"===l.default.getMediaType(n)){e.next=4;break}return e.abrupt("return");case 4:if(this.media=n,!this.libsLoaded){e.next=8;break}return this._loadAudio(),e.abrupt("return");case 8:return e.next=10,s.default.load();case 10:t=e.sent,i=t.plyr,this.audioPlayer=new i(this.$.audio,{fullscreen:{enabled:!1},captions:{update:!1},controls:["play-large","play","progress","current-time","mute","volume"]}),this.style.display="block",this.libsLoaded=!0,this._loadAudio();case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_loadAudio",value:function(){var e=this.shadowRoot.querySelector("#audio_player source");e.src=a.default.fcrepoBasePath+this.media["@id"],e.type=this.media.fileFormat||this.media.hasMimeType||this.media.encodingFormat||"";try{this.audioPlayer.stop();var n=this.shadowRoot.querySelector('input[type="range"][data-plyr="seek"]');n&&(n.value=0)}catch(e){}this.shadowRoot.querySelector("#audio_player").load();var t=this.media.thumbnailUrl?this.media.thumbnailUrl+"/svc:iiif/full/,400/0/default.jpg":"";t?(this.$.poster.style.display="block",this.$.poster.style.backgroundImage="url("+t+")"):this.$.poster.style.display="none"}},{key:"_stop",value:function(){this.audioPlayer&&this.audioPlayer.stop()}}]),n}(Mixin(o.LitElement).with(LitCorkUtils));n.default=y,customElements.define("app-audio-viewer",y)},292:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,r=(i=["\n<style>\n  :host {\n    display: none;\n    padding: 20px;\n    background: black;\n    box-sizing: border-box;\n  }\n\n  .container {\n    display: block;\n    width: 100%;\n  }\n\n  #audio_poster {\n    display: none;\n    margin: 0 auto;\n    margin-bottom: 10px;\n    max-width: 400px;\n    height: 400px;\n    border: 1px solid black;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n  }\n\n  .layout {\n    display: flex;\n    justify-content: center;\n  }\n\n  .plyr--audio {\n    max-width: 500px !important;\n    width: 100%;\n    border-radius: 5px;\n  }\n\n  .plyr--full-ui input[type=range] {\n    color: #daaa00 !important;\n  }\n\n  button.plyr__control.plyr__control--overlaid,\n  button.plyr__control.plyr__control:hover {\n    background: rgba(218,170,0,1.0);\n  }\n\n  @media(max-width: 768px) {\n\n  }\n\n  ",'\n</style>\n<div class="container">\n  <div id="sprite-plyr" style="display: none;"></div>\n  <div id="audio_poster"></div>\n\n  <div class="layout">\n    <audio id="audio_player" controls>\n      <source>\n    </audio>\n  </div>\n\n</div>\n'],o=["\n<style>\n  :host {\n    display: none;\n    padding: 20px;\n    background: black;\n    box-sizing: border-box;\n  }\n\n  .container {\n    display: block;\n    width: 100%;\n  }\n\n  #audio_poster {\n    display: none;\n    margin: 0 auto;\n    margin-bottom: 10px;\n    max-width: 400px;\n    height: 400px;\n    border: 1px solid black;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n  }\n\n  .layout {\n    display: flex;\n    justify-content: center;\n  }\n\n  .plyr--audio {\n    max-width: 500px !important;\n    width: 100%;\n    border-radius: 5px;\n  }\n\n  .plyr--full-ui input[type=range] {\n    color: #daaa00 !important;\n  }\n\n  button.plyr__control.plyr__control--overlaid,\n  button.plyr__control.plyr__control:hover {\n    background: rgba(218,170,0,1.0);\n  }\n\n  @media(max-width: 768px) {\n\n  }\n\n  ",'\n</style>\n<div class="container">\n  <div id="sprite-plyr" style="display: none;"></div>\n  <div id="audio_poster"></div>\n\n  <div class="layout">\n    <audio id="audio_player" controls>\n      <source>\n    </audio>\n  </div>\n\n</div>\n'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));n.default=function(){return(0,l.html)(r,c.default)};var a,l=t(175),s=t(194),c=(a=s)&&a.__esModule?a:{default:a}},293:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=d(t(294)),l=d(t(19)),s=d(t(176));t(183),t(295);var c=d(t(37));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,window.addEventListener("resize",(function(){return e._resize()})),window.addEventListener("touchend",(function(n){return e._onTouchEnd(n)})),window.addEventListener("touchcancel",(function(n){return e._onTouchEnd(n)})),window.addEventListener("touchmove",(function(n){return e._onTouchMove(n)})),e.addEventListener("touchstart",(function(n){return e._onTouchStart(n)})),e}var t,r;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}},{key:"properties",get:function(){return{totalThumbnailWidth:{type:Number,value:64},icon:{type:String,value:""},iconWidth:{type:Number,value:40},thumbnails:{type:Array,value:function(){return[]}},thumbnailsPerFrame:{type:Number,value:10},leftMostThumbnail:{type:Number,value:0},breakControls:{type:Boolean,value:!1,reflect:!0,notify:!0},showNavLeft:{type:Boolean,value:!1},showNavRight:{type:Boolean,value:!1},isLightbox:{type:Boolean,value:!1},singleImage:{type:Boolean,value:!1,reflectToAttribute:!0},mediaList:{type:Array,value:function(){return[]}},showOpenLightbox:{type:Boolean,value:!1}}}}]),o(n,[{key:"connectedCallback",value:function(){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"connectedCallback",this).call(this),this._resize()}},{key:"ready",value:(t=regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),e.next=3,this.AppStateModel.getSelectedRecord();case 3:if(!(t=e.sent)){e.next=10;break}return this._onSelectedRecordUpdate(t),e.next=8,this.AppStateModel.getSelectedRecordMedia();case 8:(o=e.sent)&&this._onSelectedRecordMediaUpdate(o);case 10:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function i(o,r){try{var a=e[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));n(l)}("next")}))},function(){return r.apply(this,arguments)})},{key:"_onAppStateUpdate",value:function(e){void 0!==e.mediaViewerNavLeftMostThumbnail&&e.mediaViewerNavLeftMostThumbnail!==this.leftMostThumbnail&&(this.leftMostThumbnail=e.mediaViewerNavLeftMostThumbnail,this._resize())}},{key:"_onTouchEnd",value:function(e){if(this.touchAction){this.touchAction=!1;var n=this.touchStartX-this.touchCurrentX;Math.abs(n)>this.totalThumbnailWidth/2&&(n<0?this._pageLeft():this._pageRight())}}},{key:"_onTouchMove",value:function(e){this.touchAction&&(this.touchCurrentX=e.touches[0].clientX)}},{key:"_onTouchStart",value:function(e){this.touchAction=!0,this.touchStartX=e.touches[0].clientX,this.touchCurrentX=e.touches[0].clientX}},{key:"_resize",value:function(){var e=window.innerWidth;if(0!==e){e-=16,this._setNavBreak(e);var n=void 0;this.breakControls?n=2*this.iconWidth:(n=4*this.iconWidth,this.isLightbox&&(n+=2*this.iconWidth));var t=Math.min(e-n,512);this.thumbnailsPerFrame=Math.max(Math.floor(t/this.totalThumbnailWidth),1),this.$.thumbnails.style.width=this.thumbnailsPerFrame*this.totalThumbnailWidth+"px",this.showNavLeft=0!==this.leftMostThumbnail,this.showNavRight=!this._showingLastThumbFrame(),this._updateThumbnailContainerPos()}}},{key:"_getTotalIconWidth",value:function(){var e=4*this.iconWidth;return this.isLightbox&&(e+=2*this.iconWidth),e}},{key:"_setNavBreak",value:function(e){var n=4*this.iconWidth;this.isLightbox&&(n+=2*this.iconWidth),n+4*this.totalThumbnailWidth>e?this.breakControls=!0:this.breakControls=!1}},{key:"_pageLeft",value:function(){this.leftMostThumbnail=this.leftMostThumbnail-this.thumbnailsPerFrame,this.leftMostThumbnail<0&&(this.leftMostThumbnail=0),this._resize(),this.AppStateModel.set({mediaViewerNavLeftMostThumbnail:this.leftMostThumbnail})}},{key:"_pageRight",value:function(){this._showingLastThumbFrame()||(this.leftMostThumbnail=this.leftMostThumbnail+this.thumbnailsPerFrame,this._resize(),this.AppStateModel.set({mediaViewerNavLeftMostThumbnail:this.leftMostThumbnail}))}},{key:"_showingLastThumbFrame",value:function(){return this.leftMostThumbnail+this.thumbnailsPerFrame>this.thumbnails.length-1}},{key:"_updateThumbnailContainerPos",value:function(){var e=this;this.$.thumbnailInnerContainer.style.marginLeft=-1*this.leftMostThumbnail*(this.totalThumbnailWidth+1)+"px";var n=this.leftMostThumbnail+this.thumbnailsPerFrame;this.thumbnails.forEach((function(t,i){e.set("thumbnails."+i+".disabled",i<e.leftMostThumbnail||i>=n)}))}},{key:"_onSelectedRecordUpdate",value:function(e){var n=this;this.leftMostThumbnail=0,e&&1!==c.default.countMediaItems(e.media)?(this.mediaList=c.default.flattenMediaList(e.media),this.mediaList=c.default.organizeMediaList(this.mediaList),this.thumbnails=this.mediaList.map((function(e){var t=n._getFileAndIconType(e),i=t.fileType,o=t.iconType;if(n.isLightbox&&"image"!==i)return null;var r=e.thumbnailUrl;return r&&!r.match(/\/svc:iiif\//)&&(r+="/svc:iiif/full/,50/0/default.jpg"),{id:e["@id"],icon:o,position:e.position,selected:!1,disabled:!1,src:r}})).filter((function(e){return!!e})).filter((function(e){return"blank-round"!==e.icon})),this.singleImage=!(0!==this.thumbnails.length&&this.thumbnails.length>1),this._resize(),this.AppStateModel.set({mediaViewerNavLeftMostThumbnail:0})):this.singleImage=!0}},{key:"_onSelectedRecordMediaUpdate",value:function(e){var n=this;if(this.media=e,e){this.thumbnails.forEach((function(e,t){n.set("thumbnails."+t+".selected",n.media["@id"]===e.id)}));var t=this._getFileAndIconType(e),i=t.fileType;t.iconType;this.showOpenLightbox="image"===i}}},{key:"_getFileAndIconType",value:function(e){var n="",t=n,i=n,o="";(e.fileFormat||e.encodingFormat)&&(t=(n=e.fileFormat?e.fileFormat:e.encodingFormat).split("/").shift(),i=n.split("/").pop());var r=c.default.getMediaType(e);return"AudioObject"===r||"audio"===t?o="sound-round":"VideoObject"===r||"StreamingVideo"===r||"video"===t?o="video-round":"pdf"===i?o="blank-round":"360"===t&&(o="360-round"),{fileType:t,iconType:o}}},{key:"_onThumbnailClicked",value:function(e){var n=e.currentTarget.getAttribute("media-id");this.AppStateModel.setLocation(n)}},{key:"_onZoomInClicked",value:function(e){this.dispatchEvent(new CustomEvent("zoom-in"))}},{key:"_onZoomOutClicked",value:function(e){this.dispatchEvent(new CustomEvent("zoom-out"))}},{key:"_onCloseClicked",value:function(e){this.dispatchEvent(new CustomEvent("close"))}},{key:"setFocus",value:function(){if(this.singleImage)this.breakControls?this.$.zoomOut2.focus():this.$.zoomOut1.focus();else{var e=this.shadowRoot.querySelector("button");e&&e.focus()}window.scrollTo(0,0)}}]),n}(Mixin(r.PolymerElement).with(EventInterface,l.default,s.default));n.default=u,customElements.define("app-media-viewer-nav",u)},294:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: var(--default-primary-color);\n  }\n\n  :host([single-image]) {\n    background-color: transparent;\n    padding: 0 8px 8px 8px;\n  }\n\n  :host([single-image]) paper-icon-button,\n  :host([single-image]) app-share-btn,\n  :host app-share-btn,\n  :host paper-icon-button {\n    background-color: var(--default-primary-color);\n  }\n\n\n  .layout {\n    display: flex;\n    align-items: center;\n  }\n\n  #thumbnailInnerContainer {\n    padding-top: 7px;\n  }\n\n \n  #thumbnails {\n    /* (50px width + 10px margin + 4px border) * 8 thumbnails */\n    max-width: 512px;\n  }\n\n\n  #thumbnails {\n    overflow: hidden;\n  }\n\n  #thumbnails > div {\n    white-space: nowrap;\n    margin-left: 0;\n    will-change: margin-left;\n    transition: margin-left 250ms ease-out;\n  }\n\n  .thumbnail {\n    margin: 0 5px 5px 6px;\n    display: inline-block;\n    width: 50px;\n    height: 50px;\n    cursor: pointer;\n    color: white;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-color: black;    \n    border: 2px solid transparent;\n  }\n\n  .thumbnail:active {\n    border: 1px solid var(--default-secondary-color);\n  }\n\n  .thumbnail:focus {\n    outline: var(--default-outline);\n  }\n  \n  .thumbnail[selected] {\n    border: 2px solid var(--default-secondary-color);\n  }\n\n  iron-icon {\n    shape-rendering: geometricPrecision !important;\n    width: 28px !important;\n    height: 28px !important;\n  }\n\n  paper-icon-button {\n    color: var(--default-secondary-color);\n    min-width: 40px;\n  }\n\n  paper-icon-button:focus {\n    border-radius: 0 !important;\n  }\n\n  paper-icon-button[disabled] {\n    color: var(--gray-text);\n    min-width: 40px;\n  }\n\n  paper-icon-button[invisible] {\n    visibility: hidden;\n  }\n\n  .zoom-btns[pad] {\n    margin-right: 30px;\n  }\n</style>\n\n\n<div class="layout">\n\n  <div id="navLeft" hidden$="[[singleImage]]">\n    <paper-icon-button noink \n      tabindex="0" \n      icon="chevron-left" \n      alt="Page thumbnails left"\n      disabled$="[[!showNavLeft]]"\n      invisible$="[[!showNavLeft]]"\n      on-click="_pageLeft">\n    </paper-icon-button>\n  </div>\n\n  <div id="thumbnails" hidden$="[[singleImage]]">\n    <div id="thumbnailInnerContainer">\n      <template is="dom-repeat" items="[[thumbnails]]">\n        <button \n          class="thumbnail"\n          alt$="Page #[[item.position]]"\n          title$="[[item.id]]"\n          media-id$="[[item.id]]"\n          disabled$="[[item.disabled]]"\n          selected$="[[item.selected]]" \n          style$="background-image:url([[item.src]])"\n          on-click="_onThumbnailClicked">\n            <iron-icon icon="fin-icons:[[item.icon]]"></iron-icon>\n        </button>\n      </template>\n    </div>\n  </div>\n\n  <div id="navRight" hidden$="[[singleImage]]">\n    <paper-icon-button noink \n      tabindex="0" \n      icon="chevron-right" \n      alt="Page thumbnails right"\n      disabled$="[[!showNavRight]]"\n      invisible$="[[!showNavRight]]"\n      on-click="_pageRight">\n    </paper-icon-button>\n  </div>\n\n  <div style="flex:1"></div>\n  \n  <div id="buttonWrapper" hidden$="[[breakControls]]" style="white-space: nowrap">\n    <paper-icon-button id="zoomOut1" noink tabindex="0" icon="zoom-out" hidden$="[[!isLightbox]]" on-click="_onZoomOutClicked"></paper-icon-button>\n    <paper-icon-button noink icon="zoom-in" tabindex="0" hidden$="[[!isLightbox]]" on-click="_onZoomInClicked"></paper-icon-button>\n    \n    <app-share-btn id="shareBtn" role="button"></app-share-btn>\n\n    <span hidden$="[[!showOpenLightbox]]" class="zoom-btns" pad$="[[!showOpenLightbox]]">\n      <paper-icon-button noink icon="zoom-in" tabindex="0" hidden$="[[isLightbox]]" on-click="_onZoomInClicked"></paper-icon-button>\n      <paper-icon-button noink icon="fin-icons:close" tabindex="0" hidden$="[[!isLightbox]]" on-click="_onCloseClicked"></paper-icon-button>\n    </span>\n  </div>\n</div>\n\n<div hidden$="[[!breakControls]]" style="text-align: right">\n  <paper-icon-button id="zoomOut2" noink tabindex="0" icon="zoom-out" hidden$="[[!isLightbox]]" on-click="_onZoomOutClicked"></paper-icon-button>\n  <paper-icon-button noink icon="zoom-in" tabindex="0" hidden$="[[!isLightbox]]" on-click="_onZoomInClicked"></paper-icon-button>\n  \n  <app-share-btn></app-share-btn>\n  \n  <span hidden$="[[!showOpenLightbox]]" class="zoom-btns">\n    <paper-icon-button noink icon="zoom-in" tabindex="0" hidden$="[[isLightbox]]" on-click="_onZoomInClicked"></paper-icon-button>\n    <paper-icon-button noink icon="fin-icons:close" tabindex="0" hidden$="[[!isLightbox]]" on-click="_onCloseClicked"></paper-icon-button>\n  </span>\n</div>\n'},295:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(4),r=s(t(296)),a=s(t(19)),l=s(t(176));function s(e){return e&&e.__esModule?e:{default:e}}var c={facebook:"https://www.facebook.com/sharer/sharer.php",twitter:"https://twitter.com/intent/tweet",pinterest:"https://pinterest.com/pin/create/button/"},d=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}},{key:"properties",get:function(){return{visible:{type:Boolean,value:!1}}}}]),i(n,[{key:"ready",value:function(){var e=this;(function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),window.addEventListener("click",(function(){e.visible&&e.hide()})),this.addEventListener("keyup",(function(n){e.visible&&27===n.which&&(e.hide(),n.preventDefault(),n.stopPropagation())})),this.$.popup.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()}))}},{key:"_onAppStateUpdate",value:function(){var e=this;setTimeout((function(){e.$.link.value=window.location.href}),100)}},{key:"hide",value:function(){this.visible=!1,this.$.popup.style.display="none"}},{key:"_onBtnClicked",value:function(e){var n=this;this.visible=!this.visible,this.$.popup.style.display=this.visible?"block":"none",setTimeout((function(){return n.$.facebook.focus()}),100),e.preventDefault(),e.stopPropagation()}},{key:"_onSocialIconClick",value:function(e){var n=this.AppStateModel.getSelectedRecord(),t=this.AppStateModel.getSelectedRecordMedia();if("keyup"!==e.type||13===e.which){var i=e.currentTarget.id,o=c[i],r={},a=t.name||t.title||n.name||n.title;if("pinterest"===i){var l=this._getImgPath(t);l&&(r.media=window.location.protocol+"//"+window.location.host+this._getImgUrl(l)),r.description=a,r.url=window.location.href}else if("facebook"===i)r.u=window.location.href;else{if("twitter"!==i)throw new Error("Unknown social media type: "+i);var s=a+" - "+window.location.href+" #UCDavisLibrary #DigitalCollections";if(s.length>280){var d=s.length+3-280;s=(a=a.substr(0,a.length-d)+"...")+" - "+window.location.href+" #UCDavisLibrary #DigitalCollections"}r.text=s}o+=this._createQs(r),window.open(o,"_blank","height=400,width=500")}}},{key:"_createQs",value:function(e){var n=[];for(var t in e)n.push(t+"="+encodeURIComponent(e[t]));return"?"+n.join("&")}},{key:"_copyLink",value:function(){var e=this;this.$.link.focus(),this.$.link.setSelectionRange(0,9999),document.execCommand("Copy"),this.$.copyIcon.icon="check",this.$.copyButton.setAttribute("active","active"),setTimeout((function(){e.$.copyIcon.icon="content-copy",e.$.copyButton.removeAttribute("active","active")}),3e3)}}]),n}(Mixin(o.PolymerElement).with(EventInterface,a.default,l.default));n.default=d,customElements.define("app-share-btn",d)},296:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: inline-block;\n    position: relative;\n  }\n\n  #popup {\n    display: none;\n    z-index: 5;\n    background: white;\n    padding: 10px;\n    position: absolute;\n    bottom: 70px;\n    right: -20px;\n    min-width: 200px;\n  }\n\n  .layout {\n    display: flex;\n    margin-bottom: 5px;\n    justify-content: center;\n  }\n\n  input {\n    font-size: var(--font-size);\n    padding: 0 0 0 5px;\n    display: block;\n    border: none;\n    height: 38px;\n    outline: none;\n  }\n\n  #link {\n    width: 100%;\n    border-top: 1px solid var(--medium-background-color);\n    border-left: 1px solid var(--medium-background-color);\n    border-bottom: 1px solid var(--medium-background-color);\n    box-sizing: border-box;\n  }\n\n  .social {\n    margin: 8px;\n    display: inline-block;\n    cursor: pointer;\n    height: 40px;\n    width: 40px;\n    border: 2px solid transparent;\n    outline: none;\n  }\n  .social:focus {\n    border: var(--default-outline);\n    border-radius: 20px;\n  }\n\n  .copyButton {\n    white-space: nowrap;\n    height: 38px;\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    font-weight: var(--font-weight-heavy);\n    background-color: var(--default-secondary-color);\n    color: var(--default-primary-color);\n    border-radius: 0;\n    border: none;\n    cursor: pointer;\n    padding: 0 5px;\n  }\n  .copyButton[active] {\n    text-align: center;\n    background-color: var(--default-primary-color);\n    color: var(--default-secondary-color);\n  }\n  .copyButton[active] span {\n    display: none;\n  }\n\n  #main {\n    color: var(--default-secondary-color);\n  }\n\n  .arrow-down {\n    position: absolute;\n    width: 0; \n    height: 0; \n    border-left: 20px solid transparent;\n    border-right: 20px solid transparent;\n    border-top: 20px solid white;\n    bottom: -20px;\n    right: 20px;\n  }\n\n  paper-icon-button:focus {\n    border-radius: 0 !important;\n  }\n</style>\n\n<div id="popup">\n  <div class="layout">\n    <img id="facebook" \n      role="button" \n      tabindex="0" \n      src="/images/social-icons/icon-facebook.svg" \n      class="social" \n      on-click="_onSocialIconClick"\n      on-keyup="_onSocialIconClick" />\n    <img id="twitter" \n      role="button" \n      tabindex="0" \n      src="/images/social-icons/icon-twitter.svg" \n      class="social" \n      on-click="_onSocialIconClick"\n      on-keyup="_onSocialIconClick" />\n    <img id="pinterest" \n      role="button" \n      tabindex="0" \n      src="/images/social-icons/icon-pinterest.svg" \n      class="social" \n      on-click="_onSocialIconClick"\n      on-keyup="_onSocialIconClick" />\n  </div>\n  <div>\n    <div style="display: flex; align-items: center" class="section bordered">\n      <div style="flex:1">\n        <input id="link" type="text" />\n      </div>\n      <button on-click="_copyLink" id="copyButton" class="copyButton">\n        <iron-icon icon="content-copy" id="copyIcon"></iron-icon>\n      </button>\n    </div>\n  </div>\n  <div class="arrow-down"></div>\n</div>\n\n<paper-icon-button \n  id="main" \n  noink \n  icon="social:share" \n\n  on-click="_onBtnClicked">\n</paper-icon-button>\n\n'},297:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(4),a=d(t(298));t(185),t(299);var l=d(t(300)),s=d(t(19)),c=d(t(176));d(t(10));function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(l)}("next")}))}}var p=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,window.addEventListener("keyup",(function(n){e.visible&&27===n.which&&e.hide()})),e}var t,r,s,c;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),o(n,[{key:"properties",value:function(){return{bounds:{type:Array,value:null},maxImageSize:{type:Number,value:2048},media:{type:Object,value:function(){}},visible:{type:Boolean,value:!1},loading:{type:Boolean,value:!1}}}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML="<style>"+l.default+"</style>"+a.default,e}}]),o(n,[{key:"ready",value:(c=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this.parentElement.removeChild(this),document.body.appendChild(this),this.shadowRoot.removeChild(this.$.safeCover),document.body.appendChild(this.$.safeCover),e.next=7,this.AppStateModel.getSelectedRecordMedia();case 7:(t=e.sent)&&this._onSelectedRecordMediaUpdate(t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"_onAppStateUpdate",value:function(e){e.showLightbox&&!this.visible?this.show():!e.showLightbox&&this.visible&&this.hide()}},{key:"_onSelectedRecordMediaUpdate",value:function(e){this.media=e,this.visible&&this.render()}},{key:"show",value:(s=u(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.visible=!0,this.style.display="block",this.$.safeCover.style.display="block",document.querySelector("fin-app").style.display="none",document.body.style.overflow="hidden",window.scrollTo(0,0),this.render(),setTimeout((function(){n.$.nav._resize(),n.$.nav.setFocus()}),25);case 8:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"hide",value:(r=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.visible=!1,this.style.display="none",this.$.safeCover.style.display="none",document.body.style.overflow="auto",document.querySelector("fin-app").style.display="block";case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_loadImage",value:function(e){var n=this;return new Promise((function(t,i){var o=new Image;o.onload=function(){var e=[o.naturalHeight,o.naturalWidth];n.bounds=[[0,0],e],t()},o.src=e}))}},{key:"render",value:(t=u(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.renderedMedia!==this.media){e.next=2;break}return e.abrupt("return");case 2:return this.renderedMedia=this.media,n=this.renderedMedia["@id"],this.renderedMedia.associatedMedia&&this.renderedMedia.media.imageList&&(n=this.renderedMedia.image.url),t=this._getImgUrl(n,"",""),this.loadingUrl=t,this.loading=!0,this.imageOverlay&&(this.renderedUrl="",this.viewer.removeLayer(this.imageOverlay),this.imageOverlay=null),e.next=11,this._loadImage(t);case 11:if(t===this.loadingUrl){e.next=13;break}return e.abrupt("return");case 13:if(t!==this.renderedUrl){e.next=15;break}return e.abrupt("return");case 15:this.renderedUrl=t,this.loading=!1,this.viewer||(this.viewer=L.map(this.$.viewer,{crs:L.CRS.Simple,minZoom:-4,zoomControl:!1})),this.imageOverlay=L.imageOverlay(t,this.bounds).addTo(this.viewer),this.viewer.fitBounds(this.bounds),this.shadowRoot.querySelector(".leaflet-control-attribution").style.display="none";case 21:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_onCloseClicked",value:function(){this.AppStateModel.set({showLightbox:!1})}},{key:"_onZoomInClicked",value:function(){this.viewer.zoomIn()}},{key:"_onZoomOutClicked",value:function(){this.viewer.zoomOut()}}]),n}(Mixin(r.PolymerElement).with(EventInterface,s.default,c.default));n.default=p,customElements.define("app-image-viewer-lightbox",p)},298:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: none;\n    position: absolute;\n    z-index: 1000;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    left: 0;\n    background-color: black;    \n    animation: show 350ms ease-out;\n  }\n\n  :host #nav.single {\n    padding: 10px;\n    background-color: transparent;\n  }\n\n  @keyframes show {\n    from {\n      /* top: -100vh; */\n      opacity: 0.5;\n      transform: scale(1.3);\n    }\n    to {\n      /* top: 0; */\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n\n  #viewer { \n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: black;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n  \n  .spinner-layout {\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  #nav {\n    z-index: 2000;\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n</style>\n\n\x3c!-- make sure background is blacked out... iOS hack --\x3e\n<div id="safeCover" style="display:none;position:absolute;z-index:999;top:0;left:0;width:100vw;height:100vh;background-color:black;"></div>\n\n<div id="viewer" hidden$="[[loading]]"></div>\n<div class="spinner-layout" hidden$="[[!loading]]">\n  <paper-spinner-lite active$="[[loading]]"></paper-spinner-lite>\n</div>\n\n<app-media-viewer-nav \n  id="nav"\n  is-lightbox\n  on-zoom-in="_onZoomInClicked"\n  on-zoom-out="_onZoomOutClicked"\n  on-close="_onCloseClicked">\n</app-media-viewer-nav>'}}]);