(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{157:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppSearch=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(298);var r=c(t(290));t(171),t(196),t(288),t(276);var a=c(t(35)),l=c(t(61)),s=c(t(60));function c(e){return e&&e.__esModule?e:{default:e}}var u=n.AppSearch=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,l.default,s.default,a.default)),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}},{key:"properties",get:function(){return{visible:{type:Boolean,value:!1},results:{type:Array,value:function(){return[]}},drawerOpen:{type:Boolean,value:!1},firstLoad:{type:Boolean,value:!0},appState:{type:Object,value:function(){return{}}},wideFiltersPanel:{type:Boolean,value:!1}}}}]),i(n,[{key:"_onAppStateUpdate",value:function(e){this.appState=e,"search"!==e.location.path[0]&&"collection"!==e.location.path[0]||this._searchFromAppState()}},{key:"_searchFromAppState",value:function(){this.firstLoad=!1;var e=this.appState.location.path,n=void 0;if("collection"===e[0])return n=this._urlToSearchDocument(["",encodeURIComponent(JSON.stringify([["isPartOf.@id","or","/collection/"+e[1]]])),"","10"]),void this._searchRecords(n,!1);n="search"===e[0]&&e.length>1?this._urlToSearchDocument(e.slice(1,e.length)):this.RecordModel.emptySearchDocument(),this._searchRecords(n)}},{key:"_onRecordSearchUpdate",value:function(e){if("error"===e.state)return this.$.resultsPanel.onError(e);if("loading"===e.state)return this.$.resultsPanel.onLoading();if("loaded"===e.state){var n=e.searchDocument.offset,t=e.payload,i=t.total;this.results=t.results,this.$.resultsPanel.render(this.results,i,e.searchDocument.limit,n)}}},{key:"_onPageSizeChange",value:function(e){var n=this._getCurrentSearchDocument();this._setPaging(n,n.offset,e.detail),this.RecordModel.setSearchLocation(n)}},{key:"_onPaginationChange",value:function(e){var n=this._getCurrentSearchDocument();this._setPaging(n,e.detail.startIndex),this.RecordModel.setSearchLocation(n)}},{key:"_toggleDrawer",value:function(){this.drawerOpen=!this.drawerOpen}},{key:"_onFiltersTabUpdate",value:function(e){var n=this;this.wideFiltersPanel="info"===e.detail.value,setTimeout(function(){requestAnimationFrame(function(){n.$.resultsPanel._resizeAsync()})},300)}}]),n}();customElements.define("app-search",u)},181:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n    margin: 15px;\n    outline : 0;\n    height: 320px;\n    width: 320px;\n  }\n\n  :host(:hover), :host(:focus)  {\n    cursor: pointer;\n    margin: 13px;\n    border: 2px solid var(--default-secondary-color);\n  }\n\n  .img.defaultImage {\n    background-size: 65%;\n  }\n\n  .img {\n    height: 320px;\n    width: 320px;\n    position: relative;\n    background-image: url(\'/images/logos/logo-white-512.png\'); /* fallback */\n    background-color: var(--light-background-color);\n    background-size: cover; /* needs to be 65% */\n    background-repeat: no-repeat;\n    background-position: center center;    \n  }\n\n  .img > div  {\n    padding: 15px;\n    position: absolute;\n    left: 0;\n    right: 25px;\n    bottom: 25px;\n    \n    color: var(--default-secondary-color);\n    font-weight: var(--font-weight-heavy);\n\n    background-color: rgba(0, 38, 85, .8);      \n  }\n</style>\n\n<div \n  class="img" \n  style$="background-image:url(\'[[collection.thumbnailUrl]]\');"\n  role="img" \n  aria-label="[[collection.name]]">\n  <div>[[collection.name]]</div>\n</div>\n'},182:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(9),l=t(181),s=(i=l)&&i.__esModule?i:{default:i};var c=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.PolymerElement),r(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}},{key:"properties",get:function(){return{collection:{type:Object,value:function(){return{}}},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}}]),r(n,[{key:"ready",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this)}},{key:"connectedCallback",value:function(){(o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"connectedCallback",this).call(this),"/images/logos/logo-white-512.png"===this.collection.thumbnailUrl)&&(this.shadowRoot.querySelectorAll(".img")[0].className+=" defaultImage")}}]),n}();n.default=c,customElements.define("app-collection-card",c)},194:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9),r=c(t(36));t(282);var a=c(t(60)),l=c(t(35)),s=c(t(164));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.baseUrl=window.location.protocol+"//"+window.location.host+"/fcrepo/rest",e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,l.default,a.default,s.default)),i(n,null,[{key:"properties",get:function(){return{data:{type:Object,value:function(){},observer:"_onDataUpdate"},fetchId:{type:String,value:""},isVideo:{type:Boolean,value:!1},isImage:{type:Boolean,value:!1},imgUrl:{type:String,value:""},collectionName:{type:String,value:""},name:{type:String,value:""},description:{type:String,value:""},creator:{type:Array,value:function(){return[]}},year:{type:String,value:""},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}}]),i(n,[{key:"ready",value:function(){var e=this;(function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this.addEventListener("click",function(n){return e._onClick()}),this.addEventListener("keyup",function(n){13===n.which&&e._onClick()})}},{key:"_onClick",value:function(){this._setWindowLocation(this.fetchId)}},{key:"_onDataUpdate",value:function(){var e,n=(e=regeneratorRuntime.mark(function e(){var n,t,i,o,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object.assign({},this.data))["@id"]){e.next=3;break}return e.abrupt("return");case 3:if(this.fetchId=n["@id"],this.name=this.data.name||(this.data.identifier?this.data.identifier["@id"]:""),this.data.video&&(this.isVideo=!0),(t=this.shadowRoot.querySelector("#img"))&&(t.style.display="none"),i=250,(o=this.data.image)?(a=o.height/o.width,this.imgHeight=Math.floor(i*a),this.imgUrl=this._getImgUrl(o.url,null,this.imgHeight),o.colorPalette?this.imgThumbail=o.colorPalette:this.imgThumbail="",this.isImage=!0):(this.imgUrl="",this.isImage=!1),this.description=this.data.description||"",this.description.length>200&&(this.description=this.description.substr(0,200)+"..."),this.year=r.default.getYearFromDate(n.created),Array.isArray(n.creator)?this.creator=n.creator:this.creator=[n.creator||""],this.collectionName=this.data.collectionId||"",!this.collectionName){e.next=22;break}return e.next=20,this._getCollection(this.collectionName);case 20:l=e.sent,this.collectionName=l.name;case 22:case"end":return e.stop()}},e,this)}),function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})});return function(){return n.apply(this,arguments)}}()}]),n}();n.default=u},241:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    background-color: var(--light-background-color);\n    position: relative;\n  }\n\n  #filters {\n    margin-left: 10px;\n  }\n\n  .title {\n    color: var(--default-primary-color);\n    font-weight: bold;\n    padding: 15px 0;\n    margin-left: 10px;\n    border-bottom: 1px solid var(--medium-background-color);\n    display: none;\n  }\n\n  app-filter-panel {\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .thumbnail {\n    background-size: cover;\n    background-position: center center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .thumbnail-root {\n    position: relative;\n    height: 200px;\n  }\n\n  .label {\n    padding: 10px 0;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy);\n  }\n\n  .collection-filter {\n    padding: 4px 5px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .outer-drawer-toggle {\n    position: relative;\n  }\n  .outer-drawer-toggle[spacer] {\n    height: 50px;\n    border-bottom: 1px solid var(--medium-background-color);\n    margin-left: 10px;\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    position: absolute;\n    z-index: 15;\n    top : 15px;\n    right: -24px;\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  @media(min-width: 975px) {\n    h2 {\n      display: block;\n    }\n    .outer-drawer-toggle {\n      display: none;\n    }\n    .title {\n      display: block;\n    }\n  }\n</style>\n\n<div class="title" hidden$="[[collectionMode]]" >FILTERS</div>\n\n<div class="outer-drawer-toggle" spacer$="[[!collectionMode]]" on-click="_fireToggleDrawer">\n  <button class="drawer-toggle">\n    <span><span hidden$="[[!collectionMode]]">Info / </span>Filters</span>\n    <iron-icon icon="fin-icons:close"></iron-icon>\n  </button>\n</div>\n<div class="thumbnail-root"  hidden$="[[!collectionMode]]">\n  <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnailUrl]]\')"></div>\n  \x3c!-- <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnail]]\')"></div>  --\x3e\n</div>\n\n<app-tabs \n  tabs="[[tabs]]" \n  selected="{{selectedTab}}" \n  hidden$="[[!collectionMode]]">\n</app-tabs>\n\n<iron-pages \n  selected="[[selectedTab]]"   \n  attr-for-selected="id" \n  selected-attribute="showing">\n  <div id="filters">\n\n    <div hidden$="[[!collectionMode]]" class="label">Collection</div>\n    <div hidden$="[[!collectionMode]]" class="collection-filter">\n      <app-facet-checkbox \n        type="collection" \n        value="[[selectedCollection.name]]" \n        checked="[[collectionMode]]"\n        on-click="_removeCollectionFilter">\n      </app-facet-checkbox>\n    </div>\n\n    <template is="dom-repeat" items="[[facetFilters]]">\n      <app-filter-panel filter="[[item]]"></app-filter-panel>\n    </template>\n  </div>\n  <app-collection-info-panel id="info"></app-collection-info-panel>\n</iron-pages>\n\n'},243:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    padding: 15px;\n  }\n  h3, .header {\n    color: var(--default-primary-color);\n    margin: 5px 0;\n    font-weight: bold;\n  }\n  .section {\n    margin-bottom: 20px;\n  }\n  .break {\n    border-bottom: 1px solid var(--medium-background-color);\n    margin: 5px;\n  }\n\n  select {\n    margin-right: 10px;\n    outline-offset: 1px;\n    border: none;\n    background-color: white;\n    border-radius: 0;\n    height: 38px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    -moz-border-radius: 0px;\n    -ms-border-radius: 0px;\n    -o-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 10px 6px;\n    background-repeat: no-repeat;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n    background-color: var(--medium-background-color);\n  }\n  /* for IE */\n  select::-ms-expand {\n      display: none;\n  }\n\n  .buttons {\n    display: flex;\n    margin-top: 10px;\n  }\n</style>\n\n<div class="section" hidden$="[[!title]]">\n  <h3>[[title]]</h3>\n</div>\n\n<div class="section" hidden$="[[!description]]">\n  <div class="header">Description</div>\n  <div id="description"></div>\n</div>\n\n<div class="section" hidden$="[[!coverage]]">\n  <div class="header">Coverage</div>\n  <div>[[coverage]]</div>\n</div>\n\n<div class="break"></div>\n\n<div class="header">Cite this Collection</div>\n<div>\n  <app-copy-cite id="copyCite" text="[[citation]]">\n    <select id="citeFormatInput" value$="[[citationFormat]]" on-change="_onCiteFormatChange">\n      <template is="dom-repeat" items="[[engines]]">\n        <option value="[[item]]">[[item]]</option>\n      </template>\n    </select>\n  </app-copy-cite>\n</div>\n'},251:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9),r=t(192);t(191);var a=s(t(243)),l=s(t(67));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})}}var u=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e.firstShow=!0,e._injectModel("RecordModel"),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface)),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}},{key:"properties",get:function(){return{showing:{type:Boolean,value:!1,observer:"_onShowingUpdate"},title:{type:String,value:""},coverage:{type:String,value:""},subject:{type:String,value:""},citation:{type:String,value:""},citationFormat:{type:String,value:"mla"},engines:{type:Array,value:[]}}}}]),i(n,[{key:"_onSelectedCollectionUpdate",value:function(){var e=c(regeneratorRuntime.mark(function e(n){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=7;break}return this.title="",this.$.description.innerHTML="",this.subject="",this.coverage="",this.citation="",e.abrupt("return");case 7:if(this.collection=n,this.title=n.name||"",this.$.description.innerHTML=r.markdown.toHTML(n.description||""),n.subject?this.subject=n.subject.join(", "):this.subject="",!n.coverage){e.next=15;break}this.coverage=n.coverage.join(", "),e.next=22;break;case 15:return this.selectedCollectionId=n["@id"],e.next=18,this.RecordModel.defaultSearch(n["@id"]);case 18:if((t=e.sent).id===this.selectedCollectionId){e.next=21;break}return e.abrupt("return");case 21:t.payload&&t.payload.aggregations&&t.payload.aggregations.ranges&&t.payload.aggregations.ranges.yearPublished?(i=t.payload.aggregations.ranges.yearPublished,this.coverage=i.min+" - "+i.max):this.coverage="";case 22:this.firstShow||this._onCiteFormatChange();case 23:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()},{key:"_onShowingUpdate",value:function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showing){e.next=2;break}return e.abrupt("return");case 2:if(this.firstShow){e.next=4;break}return e.abrupt("return");case 4:return this.firstShow=!1,this.engines=l.default.engineList,e.next=8,l.default._loadEngines();case 8:return e.next=10,this._onCiteFormatChange();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onCiteFormatChange",value:function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.renderEsRecord(this.collection,this.$.citeFormatInput.value);case 2:this.citation=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}();customElements.define("app-collection-info-panel",u)},254:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    cursor: pointer;\n  }\n\n  :host(:focus) {\n    outline: var(--default-outline);\n  }\n\n  :host([disabled]) {\n    cursor: default;\n    outline: none !important;\n  }\n\n  iron-icon {\n    display: none;\n    color: var(--default-secondary-color);\n    min-width: 24px;\n    margin-right: 2px;\n  }\n\n  div {\n    user-select: none;\n    display: flex;\n    min-height: 24px;\n    display: flex;\n    align-items: center;\n  }\n\n  span {\n    display: inline-block;\n    padding-top: 3px;\n  }\n\n  div[checked] iron-icon {\n    display: inline-block;\n  }\n\n  div[checked] .value {\n    font-style: italic;\n    font-weight: bold;\n  }\n\n  div[disabled] iron-icon {\n    display: none;\n  }\n\n  div[disabled] .value {\n    font-style: italic;\n    color: var(--gray-text);\n  }\n</style>\n\n<div checked$="[[checked]]" disabled$="[[disabled]]">\n  <iron-icon icon="fin-icons:close"></iron-icon>\n  <span class="value">[[realLabel]]</span>\n</div>'},258:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppNormalCheckbox=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(9);t(257);var a,l=t(254),s=(a=l)&&a.__esModule?a:{default:a};var c=n.AppNormalCheckbox=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addEventListener("click",function(n){return e._onClick(n)}),e.addEventListener("keyup",function(n){13===n.which&&e._onClick(n)}),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r.PolymerElement),o(n,null,[{key:"properties",get:function(){return{value:{type:String,value:""},label:{type:String,value:""},labelMap:{type:Object,value:null,observer:"_onLabelMapUpdate"},labelMapType:{type:String,value:null},realLabel:{type:String,computed:"_realLabel(value, label)"},checked:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1},ariaChecked:{type:String,reflectToAttribute:!0,computed:"_computeAriaChecked(checked)"},ariaDisabled:{type:String,reflectToAttribute:!0,computed:"_computeAriaDisabled(disabled)"},role:{type:String,value:"checkbox",reflectToAttribute:!0},tabindex:{type:Number,computed:"_computeTabIndex(disabled)",reflectToAttribute:!0}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}}]),o(n,[{key:"_realLabel",value:function(e,n){return this._getLabel()}},{key:"_computeAriaChecked",value:function(){return this.checked?"true":"false"}},{key:"_computeAriaDisabled",value:function(){return this.disabled?"true":"false"}},{key:"_computeTabIndex",value:function(){return this.disabled?-1:0}},{key:"_getLabel",value:function(){return null===this.labelMapType&&this._onLabelMapUpdate(),this.labelMapType?"object"===this.labelMapType&&this.labelMap[this.value]?this.labelMap[this.value]:"function"===this.labelMapType?this.labelMap(this.value):this.value:this.value}},{key:"_onLabelMapUpdate",value:function(){this.labelMapType="",this.labelMap&&(this.labelMapType=i(this.labelMap))}},{key:"_onClick",value:function(){this.disabled||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0})))}}]),n}();window.customElements.define("app-normal-checkbox",c)},259:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(258);var r=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.PolymerElement),i(n,[{key:"ready",value:function(){var e=this;(function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this.ele=document.createElement("app-normal-checkbox"),this.ele.label=this._getLabel(),this._setValue(),this.checked&&this.ele.setAttribute("checked",this.checked),this.ele.addEventListener("checked-changed",function(n){e.checked=n.detail.value}),this.appendChild(this.ele)}},{key:"_setValue",value:function(){this.value&&(this.ele.value=this.value,this.ele.label=this._getLabel())}},{key:"_getLabel",value:function(){return this.labelMap&&this.labelMap[this.value]?this.labelMap[this.value]:this.value}},{key:"_onCheckedChange",value:function(){this.ele&&this.ele.checked!==this.checked&&(this.ele.checked=this.checked)}},{key:"_onValueChange",value:function(){this.ele&&this.ele.setAttribute("value",this.value)}}],[{key:"properties",get:function(){return{type:{type:String,value:""},value:{type:String,value:"",observer:"_onValueChange"},labelMap:{type:Object,value:function(){}},checked:{type:Boolean,value:!1,notify:!0,observer:"_onCheckedChange"}}}}]),n}();window.customElements.define("app-facet-checkbox",r)},260:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block\n  }\n\n  .filter {\n    padding: 4px 5px;\n    display: flex;\n    align-items: center;\n  }\n  .filter a {\n    display: inline-block;\n    cursor: pointer;\n    color: black;\n    transition: color 250ms ease-out, transform 250ms ease-out;\n    transform: scale(1);\n  }\n  .filter a span {\n    color: var(--default-primary-color);\n  }\n  .filter a:hover {\n    transform: scale(1.5);\n    color: var(--default-primary-color);\n  }\n\n  .active-filter {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    color: white;\n    font-size: 14px;\n    background: var(--primary-text-color);\n    padding: 5px;\n    border-radius: 3px;\n    margin: 3px;\n  }\n\n  .active-filter:hover {\n    color: var(--default-primary-color);\n    background: #ccc;\n  }\n\n  .count {\n    color: var(--text-disabled);\n    flex: 1;\n    text-align: right;\n    min-width : 40px;\n    padding: 0 10px;\n  }\n\n  .overflow {\n    overflow: auto;\n    max-height: 200px;\n  }\n\n  iron-list {\n    height: 200px;\n    display: none;\n  }\n\n  app-normal-checkbox {\n    overflow: hidden;\n    padding-right: 5px;\n  }\n\n  paper-checkbox[active] .key {\n    color: var(--default-primary-color);\n    font-weight: bold;\n  }\n\n  paper-checkbox[disabled] .key {\n    color: var(--secondary-text-color);\n    font-style: italic;\n  }\n</style>\n\n\x3c!-- used for large lists --\x3e\n<iron-list id="list" items="[[bucketsIronList]]" as="item">\n  <template>\n    <div class="filter">\n\n      <app-normal-checkbox\n        type$="[[label]]"\n        index$="[[index]]"\n        value$="[[item.key]]"\n        label-map="[[valueMap]]"\n        checked$="[[item.active]]" \n        on-change="_toggleFilter"\n        disabled$="[[item.disabled]]">\n      </app-normal-checkbox>\n\n      <div class="count">[[item.doc_count]]</div>\n    </div>\n  </template>\n</iron-list>\n\n\x3c!-- used for small lists --\x3e\n<div class="overflow">\n  <div>  \n    <template is="dom-repeat" items="[[buckets]]">\n      <div class="filter">\n\n        <app-normal-checkbox\n          type$="[[label]]"\n          index$="[[index]]"\n          value$="[[item.key]]"\n          label-map="[[valueMap]]"\n          checked$="[[item.active]]" \n          on-change="_toggleFilter"\n          disabled$="[[item.disabled]]">\n        </app-normal-checkbox>\n\n        <div class="count">[[item.doc_count]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n'},261:function(e,n,t){"use strict";e.exports=function(e){return function(n){function t(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._injectModel("FiltersModel"),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,e),t}()}},262:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9),r=s(t(261)),a=s(t(61)),l=s(t(260));function s(e){return e&&e.__esModule?e:{default:e}}t(259),t(253);var c=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e.updateTimer=-1,e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default)),i(n,null,[{key:"properties",get:function(){return{label:{type:String,value:""},filter:{type:String,value:""},ignore:{type:Array,value:function(){return[]}},valueMap:{type:Object,value:null},buckets:{type:Array,value:function(){return[]}},bucketsIronList:{type:Array,value:function(){return[]}},ironListActive:{type:Boolean,value:!1},notified:{type:Object,value:function(){return{}}}}}}]),i(n,[{key:"resize",value:function(){var e=this;requestAnimationFrame(function(){e.$.list.fire("iron-resize")})}},{key:"_onFilterBucketsUpdate",value:function(e){var n=this;if(e.filter===this.filter){if(e.buckets.forEach(function(e){n.notified[e.key]&&!e.active?n._notifySelected(e.active,e.key):!n.notified[e.key]&&e.active&&n._notifySelected(e.active,e.key)}),Object.keys(e.buckets).length>50){this.$.list.style.display="block";var t=this.$.list.scrollTop;this.bucketsIronList=e.buckets,this.buckets=[],this.ironListActive=!0,this.$.list.scrollTop=t,requestAnimationFrame(function(){n.$.list.scrollTop=t})}else this.$.list.style.display="none",this.bucketsIronList=[],this.buckets=e.buckets,this.ironListActive=!1;this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:0!==e.buckets.length}}))}}},{key:"getBuckets",value:function(){return this.ironListActive?this.bucketsIronList:this.buckets}},{key:"onParentFilterClicked",value:function(e){var n=this._getCurrentSearchDocument();this._setPaging(n,0),this._removeKeywordFilter(n,this.filter,e),this.RecordModel.setSearchLocation(n),this._notifySelected(!1,e)}},{key:"_notifySelected",value:function(e,n){!e&&this.notified[n]?delete this.notified[n]:e&&(this.notified[n]=!0),this.dispatchEvent(new CustomEvent((e?"add":"remove")+"-selected",{detail:{label:n}}))}},{key:"_toggleFilter",value:function(e){e.currentTarget.checked?this.appendFilter(e):this.removeFilter(e)}},{key:"appendFilter",value:function(e){var n=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))];if(!n.empty){var t=this._getCurrentSearchDocument();this._setPaging(t,0),this._appendKeywordFilter(t,this.filter,n.key),this.RecordModel.setSearchLocation(t),this._notifySelected(!0,n.key)}}},{key:"removeFilter",value:function(e){var n=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))],t=this._getCurrentSearchDocument();this._setPaging(t,0),this._removeKeywordFilter(t,this.filter,n.key),this.RecordModel.setSearchLocation(t),this._notifySelected(!1,n.key)}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}}]),n}();window.customElements.define("app-facet-filter",c)},263:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .label {\n    cursor: pointer;\n    display: flex;\n    color: var(--default-primary-color);\n    padding: 10px 0;\n    font-weight: bold;\n    position: relative;\n    outline: none !important;\n  }\n\n  .highlight {\n    position: absolute;\n    left: -10px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    background-color:  var(--default-secondary-color);\n    display: none;\n  }\n\n  .label:focus > .highlight {\n    display: block;\n  }\n\n  #activeFilters > div {\n    padding: 4px 5px;\n  }\n\n  .filter {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    font-weight: bold;\n    font-style: italic;\n  }\n\n  iron-icon[closed] {\n    transform: rotate(-90deg);\n  }\n\n  iron-icon[clear] {\n    color: var(--default-secondary-color);\n    margin-right: 2px;\n  }\n\n  #filters {\n    overflow-y: auto;\n    max-height: 200px;\n  }\n</style>\n\n<div class="label" on-click="_onToggleClicked" on-keyup="_onToggleClicked" role="button" tabindex="0">\n  <div style="flex:1">[[filter.label]]</div>\n  <iron-icon icon="arrow-drop-down" closed$="[[!opened]]"></iron-icon>\n  <div class="highlight"></div>\n</div>\n\n<div id="activeFilters" hidden$="[[opened]]">\n  <div hidden$="[[!selected.length]]">\n    <template is="dom-repeat" items="[[selected]]">\n      <div class="filter" \n        on-click="_onFilterClicked"\n        on-keyup="_onFilterClicked" \n        label$="[[item.label]]"\n        tabindex="0" \n        role="button">\n        <iron-icon icon="fin-icons:close" clear></iron-icon>\n        <div>[[item.label]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n\n<div id="filters" hidden$="[[!opened]]"></div>'},264:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n  }\n  \n  .labels {\n    display: flex;\n    margin: 0 23px 0 13px;\n    color: var(--gray-text);\n    font-size: var(--font-size-sm);\n  }\n\n  .inputs {\n    display: flex;\n    align-items: center;\n  }\n\n  input[type="number"] {\n    margin: 0 13px;\n    padding: 7px;\n    border: 0;\n    width: 50px;\n    font-size: var(--font-size-sm);\n  }\n\n  .unknown {\n    margin-left: 9px;\n    display: flex;\n    align-items: center;\n  }\n\n  label {\n    font-size: var(--font-size-sm);\n    font-style: italic;\n    padding-left: 5px;\n  }\n\n  app-range-slider {\n    --light-background-color: var(--medium-background-color);\n  }\n</style>\n\n<div class="inputs">\n  <input id="minValueInput" type="number" on-change="_onInputChange" >\n  <span> - </span>\n  <input id="maxValueInput" type="number" on-change="_onInputChange" >\n</div>\n\n<div style="margin-right: 10px">\n  <app-range-slider\n    id="slider"\n    on-range-value-change="_onRangeSliderChange"\n    abs-min-value="[[absMinValue]]"\n    abs-max-value="[[absMaxValue]]"\n    min-value="[[minValue]]"\n    max-value="[[maxValue]]">\n  </app-range-slider>\n</div>\n\n<div class="labels">\n  <div style="flex:1">[[absMinValue]]</div>\n  <div>[[absMaxValue]]</div>\n</div>\n\n<div class="unknown" hidden$="[[showUnknown]]">\n  <input type="checkbox" id="unknown" on-click="_onRangeNullChange" checked />\n  <label for="unknown">include unknown / unspecified</label>\n</div>'},265:function(e,n){e.exports='<style>\n  :host {\n    display: block;\n    position: relative;\n    height: 50px;\n    margin: 0 13px;\n\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently */\n  }\n\n  #numberLine {\n    position: absolute;\n    left : 0;\n    right : 0;\n    height: 3px;\n    background-color: var(--light-background-color, #888);\n  }\n\n  #fillLine {\n    position: absolute;\n    cursor: move;\n    background-color: var(--default-primary-color);\n    height: 3px;\n  }\n\n  .btn {\n    position: absolute;\n    height: 25px;\n    width: 25px;\n    cursor: move;\n  }\n\n  .btn > div {\n    margin: 5px;\n    height: 15px;\n    width: 15px;\n    border-radius: 15px;\n    background-color: var(--default-primary-color);\n    transition: all 150ms linear;\n  }\n\n  .btn[moving] > div {\n    margin: 0px;\n    height: 25px;\n    width: 25px;\n    border-radius: 25px;\n  }\n\n  .label {\n    width : 25px;\n    font-size: 12px; \n    position: absolute;\n    text-align: center;\n    transform: scale(0);\n    transition: transform 200ms linear;\n    color: var(--default-primary-color);\n  }\n\n  .label[moving] {\n    transform: scale(1);\n  }\n\n</style>\n\n<div id="numberLine"></div>\n\n<div id="fillLine" \n  prop="range" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart">\n</div>\n\n<div id="lowNumberLabel" class="label" moving$="[[isMoving]]">[[minValueLabel]]</div>\n<div id="highNumberLabel" class="label" moving$="[[isMoving]]">[[maxValueLabel]]</div>\n\n<div id="lowNumberBtn" \n  class="btn" \n  prop="min" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMin]]" >\n  <div></div>\n</div>\n\n<div id="highNumberBtn" \n  class="btn" \n  prop="max" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMax]]">\n  <div></div>\n</div>'},266:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(9),l=t(265),s=(i=l)&&i.__esModule?i:{default:i};var c=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._windowResizeListener=e._onResize.bind(e),e._windowMouseListener=e._onMoveStop.bind(e),e.addEventListener("mousemove",function(n){return e._onMove(n)}),e.addEventListener("touchmove",function(n){return e._onMove(n)}),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.PolymerElement),r(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}},{key:"properties",get:function(){return{absMinValue:{type:Number,value:0,observer:"_renderAsync"},absMaxValue:{type:Number,value:100,observer:"_renderAsync"},minValue:{type:Number,value:10,observer:"_renderAsync"},maxValue:{type:Number,value:90,observer:"_renderAsync"},minValueLabel:{type:String,value:""},maxValueLabel:{type:String,value:""},width:{type:Number,value:1},height:{type:Number,value:1},btnHeight:{type:Number,value:1},moving:{type:String,value:""},movingMin:{type:Boolean,value:!1},movingMax:{type:Boolean,value:!1},isMoving:{type:Boolean,value:!1}}}}]),r(n,[{key:"connectedCallback",value:function(){var e=this;o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"connectedCallback",this).call(this),requestAnimationFrame(function(){e._onResize()}),window.addEventListener("resize",this._windowResizeListener),window.addEventListener("mouseup",this._windowMouseListener),window.addEventListener("mouseout",this._windowMouseListener),window.addEventListener("touchend",this._windowMouseListener),window.addEventListener("touchcancel",this._windowMouseListener)}},{key:"disconnectedCallback",value:function(){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("mouseup",this._windowMouseListener),window.removeEventListener("mouseout",this._windowMouseListener),window.removeEventListener("touchend",this._windowMouseListener),window.removeEventListener("touchcancel",this._windowMouseListener)}},{key:"_onResize",value:function(){this.width=this.offsetWidth||1,this.height=this.offsetHeight,this.left=this.offsetLeft,this.btnHeight=this.$.lowNumberBtn.offsetHeight,this._render()}},{key:"_valueToPx",value:function(e){e-=this.absMinValue;var n=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e/n)}},{key:"_pxToValue",value:function(e){var n=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e*n)+this.absMinValue}},{key:"_renderAsync",value:function(){var e=this;this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(function(){e.renderTimer=0,e._render()},0)}},{key:"_render",value:function(){var e=.6*this.height;this.$.numberLine.style.top=e+"px",this.$.fillLine.style.top=e+"px";var n=this.btnHeight/2;this.$.lowNumberBtn.style.top=e-n+"px",this.$.highNumberBtn.style.top=e-n+"px",this.$.lowNumberLabel.style.top=e-n-22+"px",this.$.highNumberLabel.style.top=e-n-22+"px";var t=this._valueToPx(this.minValue),i=this._valueToPx(this.maxValue);this.$.lowNumberBtn.style.left=t-n+"px",this.$.highNumberBtn.style.left=i-n+"px",this.$.lowNumberLabel.style.left=t-n+"px",this.$.highNumberLabel.style.left=i-n+"px",this.$.fillLine.style.left=t+"px",this.$.fillLine.style.width=i-t+"px",this.minValueLabel=this.renderLabel(this.minValue),this.maxValueLabel=this.renderLabel(this.maxValue)}},{key:"_onMoveStart",value:function(e){this.moving=e.currentTarget.getAttribute("prop"),"range"===this.moving&&(this.startRange={min:e.currentTarget.offsetLeft,max:e.currentTarget.offsetLeft+e.currentTarget.offsetWidth,left:e.pageX-this.left}),this.isMoving=!0,this.movingMin="max"!==this.moving,this.movingMax="min"!==this.moving}},{key:"_onMove",value:function(e){if(this.moving){e.preventDefault();var n=void 0;if("touchmove"===e.type){if(!e.changedTouches.length)return;n=e.changedTouches[0].pageX-this.left}else n=e.pageX-this.left;if("min"===this.moving)this.minValue=this._pxToValue(n);else if("max"===this.moving)this.maxValue=this._pxToValue(n);else if("max"===this.moving)this.maxValue=this._pxToValue(n);else if("range"===this.moving){var t=this.startRange.left-n;this.minValue=this._pxToValue(this.startRange.min-t),this.maxValue=this._pxToValue(this.startRange.max-t)}this.minValue<this.absMinValue&&(this.minValue=this.absMinValue),this.maxValue>this.absMaxValue&&(this.maxValue=this.absMaxValue),this.minValue>this.maxValue&&("min"===this.moving?this.minValue=this.maxValue:this.maxValue=this.minValue)}}},{key:"_onMoveStop",value:function(){this.moving&&(this.moving="",this.movingMin=!1,this.movingMax=!1,this.isMoving=!1,this.dispatchEvent(new CustomEvent("range-value-change",{detail:{min:this.minValue,max:this.maxValue}})))}},{key:"renderLabel",value:function(e){return e}}]),n}();n.default=c,customElements.define("app-range-slider",c)},267:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(266);var r=s(t(61)),a=s(t(60)),l=s(t(264));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e._injectModel("AppStateModel"),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default)),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{label:{type:String,value:""},filter:{type:String,value:""},absMinValue:{type:Number,value:-1},absMaxValue:{type:Number,value:-1},minValue:{type:Number,value:-1},maxValue:{type:Number,value:Number.MAX_VALUE},showUnknown:{type:Boolean,value:!1}}}}]),i(n,[{key:"connectedCallback",value:function(){(function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"connectedCallback",this).call(this),this.resize()}},{key:"resize",value:function(){var e=this;this.$.slider._onResize(),setTimeout(function(){e.$.slider._onResize()},100)}},{key:"_isDefaultState",value:function(){if(!this._isFilterApplied()){var e=this._getCurrentSearchDocument();return this._removeRangeFilter(e,this.filter),this.RecordModel.setSearchLocation(e),!0}return!1}},{key:"_onRangeSliderChange",value:function(e){this.minValue=e.detail.min,this.maxValue=e.detail.max,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this._onRangeNullChange()}},{key:"_onRangeNullChange",value:function(){var e={gte:this.minValue,lte:this.maxValue};if(this.$.unknown.checked&&(e.includeNull=!0),!this._isDefaultState()){var n=this._getCurrentSearchDocument();this._setPaging(n,0),this._appendRangeFilter(n,this.filter,e),this.RecordModel.setSearchLocation(n)}}},{key:"_onInputChange",value:function(){var e=this.$.minValueInput.value,n=this.$.maxValueInput.value;e<this.absMinValue&&(this.$.minValueInput.value=this.absMinValue,e=this.absMinValue),n>this.absMaxValue&&(this.$.maxValueInput.value=this.absMaxValue,n=this.absMaxValue),e>n&&(e=n),this.minValue=e,this.maxValue=n,this._onRangeNullChange()}},{key:"_onSelectedCollectionUpdate",value:function(e){this.selectedCollection=e?e["@id"]:"",this._renderFilters()}},{key:"_onRecordSearchUpdate",value:function(e){"loaded"===e.state&&(this.currentFilters=e.searchDocument.filters||{},this._renderFilters())}},{key:"_renderFilters",value:function(){var e,n=(e=regeneratorRuntime.mark(function e(){var n,t,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentFilters){e.next=2;break}return e.abrupt("return");case 2:return n=this.selectedCollection,e.next=5,this._defaultRecordSearch(this.selectedCollection);case 5:if(t=e.sent,n===this.selectedCollection){e.next=8;break}return e.abrupt("return");case 8:if(this.default=t,!(i=this.default.payload.aggregations.ranges[this.filter])){e.next=15;break}this.absMinValue=i.min,this.absMaxValue=i.max,e.next=16;break;case 15:return e.abrupt("return",this._show(!1));case 16:this._show(!0),(this.minValue<this.absMinValue||!this.currentFilters[this.filter])&&(this.minValue=this.absMinValue,this.$.minValueInput.value=this.minValue),(this.maxValue>this.absMaxValue||!this.currentFilters[this.filter])&&(this.maxValue=this.absMaxValue,this.$.maxValueInput.value=this.maxValue),this.currentFilters[this.filter]&&(o=this.currentFilters[this.filter].value,this.minValue=o.gte,this.maxValue=o.lte,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this.$.unknown.checked=!!o.includeNull),this._notifySelected();case 21:case"end":return e.stop()}},e,this)}),function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function i(o,r){try{var a=n[o](r),l=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})});return function(){return n.apply(this,arguments)}}()},{key:"_isFilterApplied",value:function(){return this.minValue!==this.absMinValue||this.maxValue!==this.absMaxValue||!0!==this.$.unknown.checked}},{key:"_notifySelected",value:function(){var e=!1,n="";this.minValue===this.absMinValue&&this.maxValue===this.absMaxValue&&this.$.unknown.checked||(e=!0),e&&(n=this.minValue+" to "+this.maxValue),this.dispatchEvent(new CustomEvent("set-selected",{detail:{selected:e,label:n}}))}},{key:"_show",value:function(e){this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:e}}))}},{key:"reset",value:function(){this.minValue=this.absMinValue,this.maxValue=this.absMaxValue,this.$.unknown.checked=!0,this._onRangeNullChange()}},{key:"onParentFilterClicked",value:function(){this.reset()}}]),n}();n.default=c,customElements.define("app-range-filter",c)},275:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppFilterPanel=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(274),t(269),t(267);var r,a=t(263),l=(r=a)&&r.__esModule?r:{default:r};t(262);var s=n.AppFilterPanel=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.PolymerElement),i(n,[{key:"_render",value:function(){var e=this;if(this.filter){this.innerHTML="";var n=document.createElement("app-"+this.filter.type+"-filter");n.label=this.filter.label,n.filter=this.filter.filter,n.ignore=this.filter.ignore,n.valueMap=this.filter.valueMap||{},n.isDollar=this.filter.isDollar,n.addEventListener("update-visibility",function(n){e.style.display=n.detail.show?"block":"none"}),n.addEventListener("add-selected",function(n){e.selected.findIndex(function(e){return e.label===n.detail.label})>-1||e.push("selected",n.detail)}),n.addEventListener("remove-selected",function(n){var t=e.selected.findIndex(function(e){return e.label===n.detail.label});-1!==t&&e.splice("selected",t,1)}),n.addEventListener("set-selected",function(n){n.detail.selected?e.selected=[n.detail]:e.selected=[]}),this.ele=n,this.$.filters.appendChild(n)}}},{key:"toggle",value:function(){this.opened=!this.opened}},{key:"_toggleOpened",value:function(){this.opened&&this.ele&&this.ele.resize&&this.ele.resize()}},{key:"_onToggleClicked",value:function(e){"keyup"===e.type&&13!==e.which&&32!==e.which||this.toggle()}},{key:"_onFilterClicked",value:function(e){"keyup"===e.type&&13!==e.which||this._notifyFilterClicked(e.currentTarget.getAttribute("label"))}},{key:"_notifyFilterClicked",value:function(e){this.ele&&this.ele.onParentFilterClicked&&this.ele.onParentFilterClicked(e)}}],[{key:"properties",get:function(){return{filter:{type:Object,value:null,observer:"_render"},opened:{type:Boolean,value:!1,observer:"_toggleOpened"},selected:{type:Array,value:function(){return[]}}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}}]),n}();window.customElements.define("app-filter-panel",s)},276:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(65),t(275),t(251),t(190);var r=s(t(61)),a=(s(t(60)),s(t(241))),l=s(t(10));function s(e){return e&&e.__esModule?e:{default:e}}var c=[];for(var u in l.default.elasticSearch.facets)c.push({label:l.default.elasticSearch.facets[u].label,type:l.default.elasticSearch.facets[u].type,ignore:l.default.elasticSearch.facets[u].ignore,valueMap:l.default.elasticSearch.facets[u].valueMap,isDollar:l.default.elasticSearch.facets[u].isDollar,filter:u});var p=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e._injectModel("AppStateModel"),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,r.default)),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}},{key:"properties",get:function(){return{facetFilters:{type:Array,value:function(){return c}},selectedTab:{type:String,value:"",notify:!0},selectedCollection:{type:Object,value:function(){}},collectionMode:{type:Boolean,value:!1},tabs:{type:Array,value:function(){return[{label:"Information",value:"info"},{label:"Filters",value:"filters"}]}}}}}]),i(n,[{key:"ready",value:function(){(function e(n,t,i){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,t);if(void 0===o){var r=Object.getPrototypeOf(n);return null===r?void 0:e(r,t,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"ready",this).call(this),this._onSelectedCollectionUpdate()}},{key:"_onSelectedCollectionUpdate",value:function(e){if(!e)return this.selectedTab="filters",void(this.collectionMode=!1);this.collectionMode=!0,this.selectedCollection=e,this.selectedTab||(this.selectedTab="info")}},{key:"_fireToggleDrawer",value:function(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}},{key:"_removeCollectionFilter",value:function(){var e=this._getCurrentSearchDocument();this._removeKeywordFilter(e,"isPartOf.@id"),this._setPaging(e,0),this.RecordModel.setSearchLocation(e)}}]),n}();customElements.define("app-filters-panel",p)},277:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    max-width: 1150px;\n    position: relative;\n  }\n\n  .header {\n    font-size: var(--font-size-sm);\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n\n  select {\n    margin-left: 10px;\n    border: 1px solid var(--light-background-color);\n    border-radius: 0;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 16px 16px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n  }\n  /* for IE */\n  select::-ms-expand {\n    display: none;\n  }\n\n  h3 {\n    border-top: 1px solid var(--light-background-color);\n    margin: 15px 0 0 0;\n    padding: 15px 0 0 0;\n    color: var(--default-primary-color);\n  }\n\n  .masonry {\n    margin: 10px;\n    position: relative;\n  }\n\n  .masonry .item {\n    display: block;\n    position: absolute;\n    /* visibility: hidden; */\n    top : 25px;\n    left: 25px;\n    will-change: top, left;\n    transition: top 500ms ease-out, left 500ms ease-out;\n  }\n\n  .list {\n    margin: 10px;\n  }\n\n  .list .item {\n    padding: 10px;\n    margin-bottom: 15px;\n    background-color: #daaa00;\n    height: 250px;\n  }\n\n  .spacer {\n    height: 20px;\n    border-right: 1px solid var(--light-background-color);\n  }\n\n  .total {\n    font-style: italic; \n    padding-left: 10px;\n  }\n\n  .mobile-total {\n    font-style: italic; \n  }\n\n  .filler {\n    flex: 1;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n  }\n\n  .error {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n    color: red;\n  }\n\n  cork-pagination {\n    display: inline-block;\n\n    --cork-color : var(--default-primary-color);\n    --cork-background-color : var(--default-secondary-color);\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  .drawer-toggle[disabled] {\n    color: var(--light-background-color);\n  }\n\n  .header {\n    display : none;\n  }\n\n  .mobile-header {\n    padding-top: 15px;\n    margin-bottom: 10px;\n  }\n\n  .mobile-header .row2 {\n    display: flex;\n    align-items: center;\n    margin-right: 10px;\n  }\n\n  .collections {\n    text-align: center;\n  }\n\n  @media( min-width: 975px ) {\n    .header {\n      display: flex;\n    }\n    .mobile-header {\n      display: none;\n    }\n  }\n</style>\n\n<div class="header">\n  <div class="total" hidden$="[[showLoading]]">[[total]] results found</div>\n  \n  <div class="filler"></div>\n  \n  <paper-icon-button \n    noink\n    icon="fin-icons:grid" \n    disabled$="[[!isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="masonry">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  <paper-icon-button \n    noink\n    icon="fin-icons:list" \n    disabled$="[[isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="list">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  \n  <div>\n    <select id="numPerPage" on-change="_onPageSizeChange">\n      <option value="50">50</option>\n      <option value="20">20</option>\n      <option value="10" selected>10</option>\n    </select>\n  </div>\n  <div style="margin: 0 10px; font-style:italic">Items per page</div>\n</div>\n\n<div class="mobile-header">\n  <div>\n    <div style="display:inline-block">\n      <button class="drawer-toggle" on-click="_onToggleDrawer">\n        <span>Info / Filters</span>\n        <iron-icon icon="add"></iron-icon>\n      </button>\n    </div>\n  </div>\n\n  <div class="row2">\n    <div class="total" hidden$="[[showLoading]]">[[total]] results</div>\n\n    <div class="filler"></div>\n    \n    <paper-icon-button \n      noink\n      icon="fin-icons:grid" \n      disabled$="[[!isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="masonry">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    <paper-icon-button\n      noink\n      icon="fin-icons:list" \n      disabled$="[[isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="list">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    \n    <div>\n      <select id="numPerPageM" on-change="_onPageSizeChange">\n        <option>50</option>\n        <option>20</option>\n        <option>10</option>\n      </select>\n    </div>\n    <div style="margin: 0 10px; font-style:italic">per page</div>\n  </div>\n</div>\n\n<div class="collections" hidden$="[[!showCollectionResults]]">\n  <div hidden$="[[!collectionResults.length]]">\n    <h3>Collections</h3>\n    <template is="dom-repeat" items="[[collectionResults]]">\n      <app-collection-card \n        collection="[[item]]" \n        on-keyup="_onCollectionClicked"\n        on-click="_onCollectionClicked">\n      </app-collection-card>\n    </template>\n    <h3 hidden$="[[!results.length]]">Items</h3>\n  </div>\n</div>\n\n<div hidden$="[[showError]]">\n  <div hidden$="[[showLoading]]">\n    <div class="masonry" id="layout" hidden$="[[isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-grid-result data="[[item]]" class="item"></app-search-grid-result>\n      </template>\n    </div>\n\n    <div class="list" hidden$="[[!isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-list-result data="[[item]]"></app-search-list-result>\n      </template>\n    </div>\n  </div>\n</div>\n\n<div class="error" hidden$="[[!showError]]">\n  <div>[[errorMsg]]</div>\n</div>\n<div class="loading" hidden$="[[!showLoading]]">\n  <paper-spinner-lite active$="[[showLoading]]"></paper-spinner-lite>\n</div>\n\n<div style="text-align:center" hidden$="[[showLoading]]">\n  <cork-pagination \n    total-results="[[paginationTotal]]" \n    items-per-page="[[numPerPage]]"\n    current-index="[[currentIndex]]"\n    on-nav="_onPaginationNav">\n  </cork-pagination>\n</div>\n\n<div hidden$="[[!totalOverMaxWindow]]" style="text-align: center">Digital Collections limits results to \n  10,000.  Use keywords and/or filters to refine search.\n</div>'},278:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: white;\n    margin: 10px;\n    border: 2px solid transparent;\n  }\n  \n  :host(:hover), :host(:focus) {\n    cursor: pointer;\n    border: 2px solid var(--default-secondary-color);\n    outline: none !important;\n  }\n\n  .img {\n    height: 250px;\n    width: var(--grid-cell-width);\n    background-size: cover;\n    background-color: white;\n    background-position: center center;\n  }\n\n  .collection-name {\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n  }\n\n  .year {\n    color: var(--gray-text);\n    flex: 1;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  .layout {\n    display: flex;\n  }\n\n  h4 {\n    margin: 10px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .flex-vertical {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .data {\n    padding: 15px; \n    flex: 1;\n    overflow: hidden;\n  }\n\n  @media(max-width: 600px) {\n    .img {\n      height: auto;\n      width: 150px;\n    }\n\n    .data {\n      padding: 8px;\n    }\n\n    :host {\n      display: block;\n      background-color: white;\n      margin: 10px 0;\n    }\n  }\n</style>\n\n<div class="layout">\n  <div style$="background-image: url(\'[[imgUrl]]\')" hidden$="[[!isImage]]" class="img" ></div>\n\n  <div class="data">\n    <div class="flex-vertical">\n      <div class="collection-name">[[collectionName]]</div>\n      \n      <h4>[[name]]</h4>\n    \n      <template is="dom-repeat" items="[[creator]]">\n        <app-search-result-creator creator="[[item]]"></app-search-result-creator>\n      </template>\n      \n      <div class="spacer"></div>\n\n      <div class="footer">\n        <div class="year">[[year]]</div>\n        <div>\n          \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},279:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppSearchListResult=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=a(t(194)),r=a(t(278));function a(e){return e&&e.__esModule?e:{default:e}}var l=n.AppSearchListResult=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.default),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}}]),n}();customElements.define("app-search-list-result",l)},280:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    width: var(--grid-cell-width);\n    background-color: white;\n    cursor: pointer;\n  }\n\n  :host(:hover), :host(:focus) {\n    border: 2px solid var(--default-secondary-color);\n    margin: -2px 0 0 -2px;\n    outline: none !important;\n  }\n\n  @keyframes show-img {\n    from {opacity: 0}\n    to {opacity: 1}\n  }\n\n  img {\n    animation: show-img 300ms linear;\n    box-sizing: border-box;\n    display:none;\n    /* width: var(--grid-cell-width); */\n    /* background-size: cover;\n    background-color: transparent;\n    background-position: center center; */\n    /* position: absolute;\n    top: 0;\n    left: 0; */\n  }\n\n  .collection-name {\n    font-style: italic;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n  }\n\n  .year {\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  h4 {\n    margin: 5px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .image {\n    position: relative; \n    background-size: cover;\n    background-color: transparent;\n    background-position: center center;\n    width: 250px; \n  }\n\n  .card-text {\n    padding: 15px;\n    line-height: 1.3;\n  }\n\n  .video-thumbnail {\n    z-index: 1000;\n    width: 30px; \n    height: 30px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    background-image: url(\'https://via.placeholder.com/25\');\n  }\n</style>\n\n<div \n  hidden$="[[!isImage]]" \n  class="image" \n  id="imgRoot"\n  style$="background-image: url(\'[[imgThumbail]]\'); height:[[imgHeight]]px;">\n  <img id="img" src$="[[imgUrl]]" style$="height:[[imgHeight]]px; width: 100%" onload="this.style.display=\'block\';" />\n  <div hidden$="[[!isVideo]]" class="video-thumbnail"></div>\n  \x3c!--\n    <div style$="background-image: url(\'[[imgThumbail]]\');height:[[imgHeight]]px" class="img"></div>\n    <div style$="background-image: url(\'[[imgUrl]]\');height:[[imgHeight]]px" class="img"></div>\n  --\x3e\n</div>\n\n<div class="card-text">\n  <div class="collection-name">[[collectionName]]</div>\n\n  <h4>[[name]]</h4>\n\n  <template is="dom-repeat" items="[[creator]]">\n    <app-search-result-creator creator="[[item]]" grid></app-search-result-creator>\n  </template>\n\n  <div class="footer">\n    <div class="year">[[year]]</div>\n    <div>\n      \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n    </div>\n  </div>\n</div>'},281:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .text {\n    display: block;\n    color: var(--gray-text);\n    line-height: 1.3;\n    font-weight: var(--font-weight-light);\n  }\n  :host([grid]) .text {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: calc(var(--grid-cell-width) - 30px);\n  }\n</style>\n\n<a class="text" hidden="[[!link]]" href="[[textLabel]]" target="_blank" rel="noopener" on-click="_onClick">[[textLabel]]</a>\n<div class="text" hidden="[[link]]">[[textLabel]]</div>'},282:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(9),a=t(281),l=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r.PolymerElement),o(n,[{key:"_onCreatorUpdate",value:function(){this.creator&&(this.creator["@id"]?this.link=!0:this.link=!1,this.creator.name?this.textLabel=this.creator.name:this.textLabel=this.creator["@id"])}},{key:"_onClick",value:function(e){e.stopPropagation()}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{creator:{type:Object,value:null,observer:"_onCreatorUpdate"},textLabel:{type:String,value:""},link:{type:Boolean,value:!1}}}}]),n}();n.default=s,customElements.define("app-search-result-creator",s)},283:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AppSearchGridResult=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=a(t(194)),r=a(t(280));function a(e){return e&&e.__esModule?e:{default:e}}var l=n.AppSearchGridResult=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,o.default),i(n,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}}]),n}();customElements.define("app-search-grid-result",l)},288:function(e,n,t){"use strict";var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(9);t(287),t(176),t(283),t(279),t(182);var r=u(t(61)),a=u(t(35)),l=u(t(60)),s=u(t(164)),c=u(t(277));function u(e){return e&&e.__esModule?e:{default:e}}var p=localStorage.getItem("search-results-layout");p="list"===p;var d=function(e){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.active=!0,e.resizeTimer=-1,window.addEventListener("resize",function(){return e._resizeAsync()}),e.EventBus().on("show-collection-search-results",function(n){return e._updateCollectionResultsVisibility(n)}),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default,l.default,s.default)),i(n,null,[{key:"properties",get:function(){return{results:{type:Array,value:function(){return[]}},collectionResults:{type:Array,value:function(){return[]}},masonryMargin:{type:Number,value:15},isListLayout:{type:Boolean,value:p},total:{type:String,value:"0"},numPerPage:{type:Number,value:1},currentIndex:{type:Number,value:0},showCollectionResults:{type:Boolean,value:!1},showError:{type:Boolean,value:!1},showLoading:{type:Boolean,value:!1},errorMsg:{type:Boolean,value:!1},paginationTotal:{type:Number,value:!1},totalOverMaxWindow:{type:Boolean,value:!1}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=c.default,e}}]),i(n,[{key:"_onAppStateUpdate",value:function(e){"search"===e.location.page&&this._resizeAsync()}},{key:"render",value:function(e,n,t,i){var o=this;this.results=[],this.showHeaderFooter=!0,this.showError=!1,clearTimeout(this.showLoadingTimer),this.showLoading=!1,requestAnimationFrame(function(){o.total=o.numberWithCommas(n);var r=Math.floor((1e4-t)/t)*t;n>r?(n=r,o.totalOverMaxWindow=!0):o.totalOverMaxWindow=!1,o.results=e,o.paginationTotal=n,o.numPerPage=t,o.$.numPerPage.value=t+"",o.$.numPerPageM.value=t+"",o.currentIndex=i,requestAnimationFrame(function(){return o._resize()})})}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"onLoading",value:function(){var e=this;this.results=[],this.showCollectionResults=!1,this.showError=!1,this.showLoadingTimer=setTimeout(function(){e.showLoading=!0},100)}},{key:"onError",value:function(e){this.results=[],this.showCollectionResults=!1,this.showError=!0,clearTimeout(this.showLoadingTimer),this.showLoading=!1,e.showErrorMessage?this.errorMsg=e.error.message:this.errorMsg="Ooops. Something went wrong with search!"}},{key:"_onLayoutToggle",value:function(e){var n=this;"masonry"===e.currentTarget.getAttribute("type")?(this.isListLayout=!1,localStorage.setItem("search-results-layout","masonry")):(this.isListLayout=!0,localStorage.setItem("search-results-layout","list")),this.isListLayout||requestAnimationFrame(function(){return n._resize()})}},{key:"_resizeAsync",value:function(){var e=this;-1!==this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.resizeTimer=-1,e._resize()},50)}},{key:"_resize",value:function(){if(!this.isListLayout){var e=this.$.layout.querySelector("app-search-grid-result");if(e){for(var n=this.offsetWidth,t=e.offsetWidth+this.masonryMargin,i=Math.max(Math.floor(n/t),1),o=Math.floor((n-i*t)/2),r=[],a=0;a<i;a++)r.push(0);for(var l=this.$.layout.querySelectorAll("app-search-grid-result"),s=0;s<l.length;s++){var c=this._findMinCol(r);r[c];l[s].style.left=o+c*t+"px",l[s].style.top=r[c]+"px",r[c]+=l[s].offsetHeight+this.masonryMargin}var u=Math.max.apply(Math,r);this.$.layout.style.height=u+"px"}}}},{key:"_findMinCol",value:function(e){for(var n=e[0],t=0,i=1;i<e.length;i++)n>e[i]&&(n=e[i],t=i);return t}},{key:"_onToggleDrawer",value:function(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}},{key:"_onPageSizeChange",value:function(e){this.dispatchEvent(new CustomEvent("page-size-change",{detail:parseInt(e.currentTarget.value)}))}},{key:"_onPaginationNav",value:function(e){this.dispatchEvent(new CustomEvent("page-change",{detail:e.detail}))}},{key:"_updateCollectionResultsVisibility",value:function(e){this.showCollectionResults=e}},{key:"_onCollectionSearchUpdate",value:function(e){"loaded"===e.state&&(this.collectionResults=e.payload.results)}},{key:"_onCollectionClicked",value:function(e){if("keyup"!==e.type||13===e.which){var n=e.currentTarget.collection["@id"],t=this._getEmptySearchDocument();this._setKeywordFilter(t,"isPartOf.@id",n),this.RecordModel.setSearchLocation(t)}}}]),n}();customElements.define("app-search-results-panel",d)},290:function(e,n){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .search-container {\n    background-color: var(--super-light-background-color);\n    min-height: 60vh;\n    display: block;\n  }\n  .search-content {\n    flex: 1;\n    padding-bottom: 35px;\n  }\n\n  app-filters-panel {\n    width: 350px;\n    transition: width 300ms linear;\n  }\n  app-filters-panel[wide] {\n    width: 475px;\n  }\n\n  #drawer app-filters-panel {\n    width: 300px;\n  }\n  #drawer app-filters-panel[wide] {\n    width: 300px;\n  }\n  \n  #drawer {\n    position: absolute;\n    top: 0;\n    left: -335px;\n    bottom: 0;\n    background: white;\n    width: 300px;\n    z-index: 10;\n    transition: left 300ms ease-out;\n    background-color: var(--light-background-color);\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: .7;\n    }\n  }\n\n  #drawer-background {\n    opacity: .7;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: black;\n    z-index: 5;\n    display: none;\n    animation: fadeIn 300ms;\n  }\n\n  #drawer[open] {\n    left: 0;\n  }\n\n  #drawer-background[open] {\n    display: block;\n  }\n\n  #desktop-filter-panel {\n    display: none;\n  }\n\n  @media( max-width: 1025px ) {\n    app-filters-panel[wide] {\n      width: 415px;\n    }\n  }\n\n  @media( min-width: 975px ) {\n    #outerDrawer {\n      display: none;\n    }\n    #desktop-filter-panel {\n      display: block;\n    }\n    .search-container {\n      display: flex;\n    }\n  }\n</style>\n\n<app-search-header></app-search-header>\n<app-search-breadcrumb></app-search-breadcrumb>\n\n<div style="position: relative">\n  <div id="outerDrawer">\n    <div id="drawer" open$="[[drawerOpen]]">\n      <app-filters-panel on-toggle-drawer="_toggleDrawer"></app-filters-panel>\n    </div>\n    <div id="drawer-background" open$="[[drawerOpen]]" on-click="_toggleDrawer"></div>\n  </div>\n\n  <div class="search-container">\n    <app-filters-panel id="desktop-filter-panel" wide$="[[wideFiltersPanel]]" on-selected-tab-changed="_onFiltersTabUpdate"></app-filters-panel>\n    <div class="search-content">\n      <app-search-results-panel \n        id="resultsPanel" \n        on-toggle-drawer="_toggleDrawer" \n        on-page-size-change="_onPageSizeChange"\n        on-page-change="_onPaginationChange">\n      </app-search-results-panel>\n    </div>\n  </div>\n</div>'}}]);