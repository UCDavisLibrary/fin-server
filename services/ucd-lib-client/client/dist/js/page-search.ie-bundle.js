(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppSearch=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(298);var r=c(n(290));n(171),n(180),n(289),n(279);var a=c(n(34)),l=c(n(61)),s=c(n(60));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.AppSearch=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,l.default,s.default,a.default)),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}},{key:"properties",get:function(){return{visible:{type:Boolean,value:!1},results:{type:Array,value:function(){return[]}},drawerOpen:{type:Boolean,value:!1},firstLoad:{type:Boolean,value:!0},appState:{type:Object,value:function(){return{}}}}}}]),i(t,[{key:"_onAppStateUpdate",value:function(e){this.appState=e,"search"!==e.location.path[0]&&"collection"!==e.location.path[0]||this._searchFromAppState()}},{key:"_searchFromAppState",value:function(){this.firstLoad=!1;var e=this.appState.location.path,t=void 0;if("collection"===e[0])return t=this._urlToSearchDocument(["",encodeURIComponent(JSON.stringify([["isPartOf.@id","or","/collection/"+e[1]]])),"","10"]),void this._searchRecords(t,!1);t="search"===e[0]&&e.length>1?this._urlToSearchDocument(e.slice(1,e.length)):this._getCurrentSearchDocument(),this._searchRecords(t)}},{key:"_onRecordSearchUpdate",value:function(e){if("error"===e.state)return this.$.resultsPanel.onError(e);if("loading"===e.state)return this.$.resultsPanel.onLoading();if("loaded"===e.state){var t=e.searchDocument.offset,n=e.payload,i=n.total;this.results=n.results,this.$.resultsPanel.render(this.results,i,e.searchDocument.limit,t)}}},{key:"_onPageSizeChange",value:function(e){var t=this._getCurrentSearchDocument();this._setPaging(t,t.offset,e.detail),this.RecordModel.setSearchLocation(t)}},{key:"_onPaginationChange",value:function(e){var t=this._getCurrentSearchDocument();this._setPaging(t,e.detail.startIndex),this.RecordModel.setSearchLocation(t)}},{key:"_toggleDrawer",value:function(){this.drawerOpen=!this.drawerOpen}}]),t}();customElements.define("app-search",u)},164:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e.exports=function(e){return function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._injectModel("MediaModel"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),i(n,[{key:"_getImgPath",value:function(e){return this.MediaModel.getImgPath(e)}},{key:"_getImgUrl",value:function(e,t,n){return this.MediaModel.getImgUrl(e,t,n)}},{key:"_getImageMediaList",value:function(e){return this.MediaModel.getImageMediaList(e)}}]),n}()}},169:function(e,t,n){"use strict";var i,o,r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=(i=['<iron-icon icon="fin-icons:account" style="width: 40px; height:40px"></iron-icon>'],o=['<iron-icon icon="fin-icons:account" style="width: 40px; height:40px"></iron-icon>'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(9),c=n(36),u=(r=c)&&r.__esModule?r:{default:r};var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(s.PolymerElement).with(EventInterface,u.default)),a(t,null,[{key:"template",get:function(){return(0,s.html)(l)}}]),a(t,[{key:"_onAuthUpdate",value:function(e){"loggedIn"===e.state?this.style.display="block":this.style.display="none"}}]),t}();customElements.define("app-auth-header",p)},170:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: var(--default-primary-color);\n    color: var(--inverse-text-color);\n    padding: 15px;\n  }\n\n  app-auth-header {\n    margin-left: 10px;\n  }\n  \n  fin-search-box {\n    display: inline-block;\n    width: 100%;\n    box-sizing: border-box;\n    max-width: 525px;\n  }\n\n  .layout {\n    display: flex;\n    align-items: center;\n  }\n  \n  h2 {\n    margin: 0;\n    white-space: nowrap;\n  }\n  h2 a {\n    color: var(--default-secondary-color);\n    text-decoration: none;\n  }\n  h2 a:visited {\n    color: var(--default-secondary-color);\n    text-decoration: none;\n  }\n\n  img {\n    height: 50px;\n  }\n\n  .logo, h2 {\n    padding-right: 20px;\n    display: none;\n  }\n\n  .filler {\n    flex: .25;\n    display: none;\n  }\n\n  .logo-sm {\n    margin-right: 10px;\n  }\n\n  iron-icon.search-icon {\n    color: var(--default-secondary-color);\n  }\n\n  @media( min-width: 700px ) {\n    .logo {\n      display: block;\n    }\n    .logo-sm {\n      display: none;\n    }\n  }\n\n  @media( min-width: 815px ) {\n    h2 {\n      display: block;\n    }\n  }\n\n  @media( min-width: 1100px ) {\n    .filler {\n      display: block;\n    }\n  }\n</style>\n\n<div class="layout">\n  <a href="/" class="logo"><img border="0" src="/images/ucd-lib-logo-white.png" /></a>\n  <a href="/" class="logo-sm"><img border="0" src="/images/ucd-lib-logo-white-sm.png" /></a>\n  <h2><a href="/">Digital Collections</a></h2>\n  <div class="filler"></div>\n  <div style="flex:1; text-align:right">\n    <fin-search-box \n      id="searchInput" \n      on-search="_onSearch" \n      on-browse="_onBrowse"\n      placeholder="Search Keyword(s)">\n      <iron-icon icon="fin-icons:search" class="search-icon" slot="button-content"></iron-icon>\n    </fin-search-box>\n  </div>\n  <app-auth-header></app-auth-header>\n</div>\n\n'},171:function(e,t,n){"use strict";var i=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9),a=u(n(170));n(169),n(168);var l=u(n(61)),s=u(n(60)),c=u(n(34));function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(r.PolymerElement).with(EventInterface,l.default,s.default,c.default)),o(t,null,[{key:"properties",get:function(){return{selectedCollection:{type:String,value:""}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=a.default,e}}]),o(t,[{key:"ready",value:function(){var e,n=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),e.t0=this,e.next=4,this.CollectionModel.overview();case 4:e.t1=e.sent,e.t0._setCollections.call(e.t0,e.t1);case 6:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(o,r){try{var a=t[o](r),l=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})});return function(){return n.apply(this,arguments)}}()},{key:"_setCollections",value:function(e){var t={};e.payload.forEach(function(e){t[e["@id"]]=e.name}),this.$.searchInput.browse=t}},{key:"_onBrowse",value:function(e){var t=e.detail;if(this.$.searchInput.browseValue="Browse",!t||"Browse"===t)return this.RecordModel.setSearchLocation(this._getEmptySearchDocument());this._setWindowLocation(t)}},{key:"_onSearch",value:function(e){var t=this._getCurrentSearchDocument();this._setPaging(t,0),this._setTextFilter(t,e.detail),this.RecordModel.setSearchLocation(t)}},{key:"_onRecordSearchUpdate",value:function(e){try{this.$.searchInput.value=e.searchDocument.text||""}catch(e){this.$.searchInput.value=""}}},{key:"_onSelectedCollectionUpdate",value:function(e){this.selectedCollection=e}}]),t}();customElements.define("app-search-header",p)},179:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    color: var(--default-primary-color);\n    background-image: url(\'/images/header-colorbar.png\');\n    background-size: cover;\n    background-position: left center;    \n  }\n\n  .layout {\n    padding: 0 15px;\n  }\n\n  .layout > div {\n    margin: 0 5px;\n  }\n\n  a,\n  iron-icon {\n    cursor: pointer;\n  }\n\n  a:focus {\n    outline-color: var(--default-primary-color);\n  }\n</style>\n\n<div class="layout" hidden$="[[!selected]]" id="layout">\n  <a href="/search" tabindex="0">Search</a>\n  \n  <span hidden$="[[!collection]]">&gt;</span>\n  <span hidden$="[[!collection]]"><a on-click="_onCollectionClicked" tabindex="0">[[collection.name]]</a></span>\n\n  <span hidden$="[[!record]]">&gt;</span>\n  <span hidden$="[[!record]]">[[record.name]]</span>\n</div>'},180:function(e,t,n){"use strict";var i=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9),a=u(n(60)),l=u(n(61)),s=u(n(34)),c=u(n(179));function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(o,r){try{var a=t[o](r),l=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})}}var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(r.PolymerElement).with(EventInterface,s.default,a.default,l.default)),o(t,null,[{key:"properties",get:function(){return{collection:{type:Object,value:null},record:{type:Object,value:null},name:{type:String,value:""}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=c.default,e}}]),o(t,[{key:"ready",value:function(){var e=p(regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.$.layout.style.width=window.innerWidth-55+"px",window.addEventListener("resize",function(){n.$.layout.style.width=window.innerWidth-55+"px"}),e.t0=this,e.next=6,this.AppStateModel.get();case 6:e.t1=e.sent,e.t0._onAppStateUpdate.call(e.t0,e.t1);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onAppStateUpdate",value:function(){var e=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lastLocation&&"search"===t.lastLocation.page?this.lastSearch=t.lastLocation.pathname:this.lastSearch=null,"record"===t.location.page){e.next=3;break}return e.abrupt("return");case 3:return this.currentRecordId=t.location.pathname,e.next=6,this._getRecord(this.currentRecordId);case 6:if(this.record=e.sent,this.record=this.record.payload,!this.record.collectionId){e.next=14;break}return e.next=11,this._getCollection(this.record.collectionId);case 11:this.collection=e.sent,e.next=15;break;case 14:this.collection=null;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_onCollectionClicked",value:function(e){"keyup"===e.type&&13!==e.which||this._setWindowLocation(this.lastSearch||(this.collection?this.collection["@id"]:"/search"))}},{key:"_onSelectedCollectionUpdate",value:function(e){e?this.collection&&this.collection["@id"]===e["@id"]||(this.collection=e,this.record=null):this.record||(this.collection=null)}}]),t}();customElements.define("app-search-breadcrumb",d)},182:function(e,t){e.exports="<style>\n  :host {\n    display: block;\n    margin: 15px;\n    outline : 0;\n    height: 320px;\n    width: 320px;\n  }\n\n  :host(:hover), :host(:focus)  {\n    cursor: pointer;\n    margin: 13px;\n    border: 2px solid var(--default-secondary-color);\n  }\n\n  .img.defaultImage {\n    background-size: 65%;\n  }\n\n  .img {\n    height: 320px;\n    width: 320px;\n    position: relative;\n    background-image: url('/images/logos/logo-white-512.png'); /* fallback */\n    background-color: var(--light-background-color);\n    background-size: cover; /* needs to be 65% */\n    background-repeat: no-repeat;\n    background-position: center center;    \n  }\n\n  .img > div  {\n    padding: 15px;\n    position: absolute;\n    left: 0;\n    right: 25px;\n    bottom: 25px;\n    \n    color: var(--default-secondary-color);\n    font-weight: var(--font-weight-heavy);\n\n    background-color: rgba(0, 38, 85, .8);      \n  }\n</style>\n\n<div class=\"img\" style$=\"background-image:url('[[collection.thumbnailUrl]]');\">\n  <div>[[collection.name]]</div>\n</div>\n"},183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(9),l=n(182),s=(i=l)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PolymerElement),r(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}},{key:"properties",get:function(){return{collection:{type:Object,value:function(){return{}}},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}}]),r(t,[{key:"ready",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this)}},{key:"connectedCallback",value:function(){(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),"/images/logos/logo-white-512.png"===this.collection.thumbnailUrl)&&(this.shadowRoot.querySelectorAll(".img")[0].className+=" defaultImage")}}]),t}();t.default=c,customElements.define("app-collection-card",c)},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9),r=c(n(35));n(285);var a=c(n(60)),l=c(n(34)),s=c(n(164));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.baseUrl=window.location.protocol+"//"+window.location.host+"/fcrepo/rest",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,l.default,a.default,s.default)),i(t,null,[{key:"properties",get:function(){return{data:{type:Object,value:function(){},observer:"_onDataUpdate"},fetchId:{type:String,value:""},isVideo:{type:Boolean,value:!1},isImage:{type:Boolean,value:!1},imgUrl:{type:String,value:""},collectionName:{type:String,value:""},name:{type:String,value:""},description:{type:String,value:""},creator:{type:Array,value:function(){return[]}},year:{type:String,value:""},tabindex:{type:Number,value:0,reflectToAttribute:!0}}}}]),i(t,[{key:"ready",value:function(){var e=this;(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("click",function(t){return e._onClick()}),this.addEventListener("keyup",function(t){13===t.which&&e._onClick()})}},{key:"_onClick",value:function(){this._setWindowLocation(this.fetchId)}},{key:"_onDataUpdate",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,i,o,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object.assign({},this.data))["@id"]){e.next=3;break}return e.abrupt("return");case 3:if(this.fetchId=t["@id"],this.name=this.data.name||(this.data.identifier?this.data.identifier["@id"]:""),this.data.video&&(this.isVideo=!0),(n=this.shadowRoot.querySelector("#img"))&&(n.style.display="none"),i=250,(o=this.data.image)?(a=o.height/o.width,this.imgHeight=Math.floor(i*a),this.imgUrl=this._getImgUrl(o.url,null,this.imgHeight),o.colorPalette?this.imgThumbail=o.colorPalette:this.imgThumbail="",this.isImage=!0):(this.imgUrl="",this.isImage=!1),this.description=this.data.description||"",this.description.length>200&&(this.description=this.description.substr(0,200)+"..."),this.year=r.default.getYearFromDate(t.created),Array.isArray(t.creator)?this.creator=t.creator:this.creator=[t.creator||""],this.collectionName=this.data.collectionId||"",!this.collectionName){e.next=22;break}return e.next=20,this._getCollection(this.collectionName);case 20:l=e.sent,this.collectionName=l.name;case 22:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(o,r){try{var a=t[o](r),l=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})});return function(){return t.apply(this,arguments)}}()}]),t}();t.default=u},247:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    background-color: var(--light-background-color);\n    position: relative;\n  }\n\n  #filters {\n    margin-left: 10px;\n  }\n\n  .title {\n    color: var(--default-primary-color);\n    font-weight: bold;\n    padding: 15px 0;\n    margin-left: 10px;\n    border-bottom: 1px solid var(--medium-background-color);\n    display: none;\n  }\n\n  app-filter-panel {\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .thumbnail {\n    background-size: cover;\n    background-position: center center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .thumbnail-root {\n    position: relative;\n    height: 200px;\n  }\n\n  .label {\n    padding: 10px 0;\n    color: var(--default-primary-color);\n    font-weight: var(--font-weight-heavy);\n  }\n\n  .collection-filter {\n    padding: 4px 5px;\n    border-bottom: 1px solid var(--medium-background-color);\n  }\n\n  .outer-drawer-toggle {\n    position: relative;\n  }\n  .outer-drawer-toggle[spacer] {\n    height: 50px;\n    border-bottom: 1px solid var(--medium-background-color);\n    margin-left: 10px;\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    position: absolute;\n    z-index: 15;\n    top : 15px;\n    right: -24px;\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  @media(min-width: 975px) {\n    h2 {\n      display: block;\n    }\n    .outer-drawer-toggle {\n      display: none;\n    }\n    .title {\n      display: block;\n    }\n  }\n</style>\n\n<div class="title" hidden$="[[collectionMode]]" >FILTERS</div>\n\n<div class="outer-drawer-toggle" spacer$="[[!collectionMode]]" on-click="_fireToggleDrawer">\n  <button class="drawer-toggle">\n    <span><span hidden$="[[!collectionMode]]">Info / </span>Filters</span>\n    <iron-icon icon="fin-icons:close"></iron-icon>\n  </button>\n</div>\n<div class="thumbnail-root"  hidden$="[[!collectionMode]]">\n  <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnailUrl]]\')"></div>\n  \x3c!-- <div class="thumbnail" style$="background-image: url(\'[[selectedCollection.thumbnail]]\')"></div>  --\x3e\n</div>\n\n<app-tabs \n  tabs="[[tabs]]" \n  selected="{{selectedTab}}" \n  hidden$="[[!collectionMode]]">\n</app-tabs>\n\n<iron-pages \n  selected="[[selectedTab]]"   \n  attr-for-selected="id" \n  selected-attribute="active">\n  <div id="filters">\n\n    <div hidden$="[[!collectionMode]]" class="label">Collection</div>\n    <div hidden$="[[!collectionMode]]" class="collection-filter">\n      <app-facet-checkbox \n        type="collection" \n        value="[[selectedCollection.name]]" \n        checked="[[collectionMode]]"\n        on-click="_removeCollectionFilter">\n      </app-facet-checkbox>\n    </div>\n\n    <template is="dom-repeat" items="[[facetFilters]]">\n      <app-filter-panel filter="[[item]]"></app-filter-panel>\n    </template>\n  </div>\n  <app-collection-info-panel id="info"></app-collection-info-panel>\n</iron-pages>\n\n'},248:function(e,t){e.exports='<style>\n  :host {\n    display : block;\n  }\n  .layout {\n    display: flex;\n  }\n  .tab {\n    flex: 1;\n    cursor: pointer;\n    text-transform: uppercase;\n    padding: 12px 0 9px 0;\n    text-align: center;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-weight: normal;\n    color: var(--gray-text);\n    border-bottom: 2px solid var(--gray-text);\n  }\n  .tab:focus {\n    border-bottom-color: var(--default-secondary-color);\n    outline: none;\n  }\n  .tab[selected] {\n    cursor: default;\n    font-weight: bold;\n    color: var(--default-primary-color);\n    border-bottom: 4px solid var(--default-primary-color);\n    padding: 12px 0 7px 0;\n  }\n</style>\n\n<div class="layout">\n  <template is="dom-repeat" items="[[tabs]]">\n    <div class="tab" \n      role="tab" \n      tabindex="0" \n      aria-selected$="[[item.ariaSelected]]"\n      selected$="[[item.selected]]"\n      on-click="_onTabClicked" \n      on-keyup="_onTabClicked"\n      value$="[[item.value]]">\n      [[item.label]]\n    </div>\n  </template>\n</div>'},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9),a=n(248),l=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.PolymerElement),o(t,[{key:"_renderTabs",value:function(){var e=this;this.tabs&&(this.selected||!this.tabs.length?this.tabs.forEach(function(t,n){var i=t.value===e.selected;e.set("tabs."+n+".selected",i),e.set("tabs."+n+".ariaSelected",i+""),t.label||e.set("tabs."+n+".label",t.value)}):this.selected=this.tabs[0])}},{key:"_onTabClicked",value:function(e){"keyup"===e.type&&13!==e.which||(this.selected=e.currentTarget.getAttribute("value"))}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{role:{type:String,value:"tablist",reflectToAttribute:!0},selected:{type:String,value:"",notify:!0,observer:"_renderTabs"},tabs:{type:Array,value:function(){return[]},observer:"_renderTabs"}}}}]),t}();t.default=s,customElements.define("app-tabs",s)},250:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    padding: 15px;\n  }\n  h3 {\n    color: var(--default-primary-color);\n    margin: 5px 0;\n  }\n  .section {\n    margin-bottom: 20px;\n  }\n</style>\n\n<div class="section" hidden$="[[!description]]">\n  <h3>Description</h3>\n  <div>[[description]]</div>\n</div>\n\n<div class="section" hidden$="[[!subject]]">\n  <h3>Subject</h3>\n  <div>[[subject]]</div>\n</div>\n\n<div class="section" hidden$="[[!coverage]]">\n  <h3>Coverage</h3>\n  <div>[[coverage]]</div>\n</div>\n\n\n<div id="description"></div>'},256:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9),r=s(n(60)),a=n(192),l=s(n(250));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,r.default)),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{coverage:{type:String,value:""},subject:{type:String,value:""}}}}]),i(t,[{key:"_onSelectedCollectionUpdate",value:function(e){if(!e)return this.$.description.innerHTML="",this.subject="",void(this.coverage="");this.$.description.innerHTML=a.markdown.toHTML(e.description||""),e.subject?this.subject=e.subject.join(", "):this.subject="",e.coverage?this.coverage=e.coverage.join(", "):this.coverage=""}}]),t}();customElements.define("app-collection-info-panel",c)},259:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    cursor: pointer;\n  }\n\n  :host(:focus) {\n    outline: var(--default-outline);\n  }\n\n  :host([disabled]) {\n    cursor: default;\n    outline: none !important;\n  }\n\n  iron-icon {\n    display: none;\n    color: var(--default-secondary-color);\n    min-width: 24px;\n    margin-right: 2px;\n  }\n\n  div {\n    user-select: none;\n    display: flex;\n    min-height: 24px;\n    display: flex;\n    align-items: center;\n  }\n\n  span {\n    display: inline-block;\n    padding-top: 3px;\n  }\n\n  div[checked] iron-icon {\n    display: inline-block;\n  }\n\n  div[checked] .value {\n    font-style: italic;\n    font-weight: bold;\n  }\n\n  div[disabled] iron-icon {\n    display: none;\n  }\n\n  div[disabled] .value {\n    font-style: italic;\n    color: var(--gray-text);\n  }\n</style>\n\n<div checked$="[[checked]]" disabled$="[[disabled]]">\n  <iron-icon icon="fin-icons:close"></iron-icon>\n  <span class="value">[[realLabel]]</span>\n</div>'},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppNormalCheckbox=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9);n(262);var a,l=n(259),s=(a=l)&&a.__esModule?a:{default:a};var c=t.AppNormalCheckbox=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addEventListener("click",function(t){return e._onClick(t)}),e.addEventListener("keyup",function(t){13===t.which&&e._onClick(t)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.PolymerElement),o(t,null,[{key:"properties",get:function(){return{value:{type:String,value:""},label:{type:String,value:""},labelMap:{type:Object,value:null,observer:"_onLabelMapUpdate"},labelMapType:{type:String,value:null},realLabel:{type:String,computed:"_realLabel(value, label)"},checked:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1},ariaChecked:{type:String,reflectToAttribute:!0,computed:"_computeAriaChecked(checked)"},ariaDisabled:{type:String,reflectToAttribute:!0,computed:"_computeAriaDisabled(disabled)"},role:{type:String,value:"checkbox",reflectToAttribute:!0},tabindex:{type:Number,computed:"_computeTabIndex(disabled)",reflectToAttribute:!0}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}}]),o(t,[{key:"_realLabel",value:function(e,t){return this._getLabel()}},{key:"_computeAriaChecked",value:function(){return this.checked?"true":"false"}},{key:"_computeAriaDisabled",value:function(){return this.disabled?"true":"false"}},{key:"_computeTabIndex",value:function(){return this.disabled?-1:0}},{key:"_getLabel",value:function(){return null===this.labelMapType&&this._onLabelMapUpdate(),this.labelMapType?"object"===this.labelMapType&&this.labelMap[this.value]?this.labelMap[this.value]:"function"===this.labelMapType?this.labelMap(this.value):this.value:this.value}},{key:"_onLabelMapUpdate",value:function(){this.labelMapType="",this.labelMap&&(this.labelMapType=i(this.labelMap))}},{key:"_onClick",value:function(){this.disabled||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0})))}}]),t}();window.customElements.define("app-normal-checkbox",c)},264:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(263);var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PolymerElement),i(t,[{key:"ready",value:function(){var e=this;(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.ele=document.createElement("app-normal-checkbox"),this.ele.label=this._getLabel(),this._setValue(),this.checked&&this.ele.setAttribute("checked",this.checked),this.ele.addEventListener("checked-changed",function(t){e.checked=t.detail.value}),this.appendChild(this.ele)}},{key:"_setValue",value:function(){this.value&&(this.ele.value=this.value,this.ele.label=this._getLabel())}},{key:"_getLabel",value:function(){return this.labelMap&&this.labelMap[this.value]?this.labelMap[this.value]:this.value}},{key:"_onCheckedChange",value:function(){this.ele&&this.ele.checked!==this.checked&&(this.ele.checked=this.checked)}},{key:"_onValueChange",value:function(){this.ele&&this.ele.setAttribute("value",this.value)}}],[{key:"properties",get:function(){return{type:{type:String,value:""},value:{type:String,value:"",observer:"_onValueChange"},labelMap:{type:Object,value:function(){}},checked:{type:Boolean,value:!1,notify:!0,observer:"_onCheckedChange"}}}}]),t}();window.customElements.define("app-facet-checkbox",r)},265:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block\n  }\n\n  .filter {\n    padding: 4px 5px;\n    display: flex;\n    align-items: center;\n  }\n  .filter a {\n    display: inline-block;\n    cursor: pointer;\n    color: black;\n    transition: color 250ms ease-out, transform 250ms ease-out;\n    transform: scale(1);\n  }\n  .filter a span {\n    color: var(--default-primary-color);\n  }\n  .filter a:hover {\n    transform: scale(1.5);\n    color: var(--default-primary-color);\n  }\n\n  .active-filter {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    color: white;\n    font-size: 14px;\n    background: var(--primary-text-color);\n    padding: 5px;\n    border-radius: 3px;\n    margin: 3px;\n  }\n\n  .active-filter:hover {\n    color: var(--default-primary-color);\n    background: #ccc;\n  }\n\n  .count {\n    color: var(--text-disabled);\n    flex: 1;\n    text-align: right;\n    min-width : 40px;\n    padding: 0 10px;\n  }\n\n  .overflow {\n    overflow: auto;\n    max-height: 200px;\n  }\n\n  iron-list {\n    height: 200px;\n    display: none;\n  }\n\n  app-normal-checkbox {\n    overflow: hidden;\n    padding-right: 5px;\n  }\n\n  paper-checkbox[active] .key {\n    color: var(--default-primary-color);\n    font-weight: bold;\n  }\n\n  paper-checkbox[disabled] .key {\n    color: var(--secondary-text-color);\n    font-style: italic;\n  }\n</style>\n\n\x3c!-- used for large lists --\x3e\n<iron-list id="list" items="[[bucketsIronList]]" as="item">\n  <template>\n    <div class="filter">\n\n      <app-normal-checkbox\n        type$="[[label]]"\n        index$="[[index]]"\n        value$="[[item.key]]"\n        label-map="[[valueMap]]"\n        checked$="[[item.active]]" \n        on-change="_toggleFilter"\n        disabled$="[[item.disabled]]">\n      </app-normal-checkbox>\n\n      <div class="count">[[item.doc_count]]</div>\n    </div>\n  </template>\n</iron-list>\n\n\x3c!-- used for small lists --\x3e\n<div class="overflow">\n  <div>  \n    <template is="dom-repeat" items="[[buckets]]">\n      <div class="filter">\n\n        <app-normal-checkbox\n          type$="[[label]]"\n          index$="[[index]]"\n          value$="[[item.key]]"\n          label-map="[[valueMap]]"\n          checked$="[[item.active]]" \n          on-change="_toggleFilter"\n          disabled$="[[item.disabled]]">\n        </app-normal-checkbox>\n\n        <div class="count">[[item.doc_count]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n'},266:function(e,t,n){"use strict";e.exports=function(e){return function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._injectModel("FiltersModel"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),n}()}},267:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9),r=s(n(266)),a=s(n(61)),l=s(n(265));function s(e){return e&&e.__esModule?e:{default:e}}n(264),n(258);var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e.updateTimer=-1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default)),i(t,null,[{key:"properties",get:function(){return{label:{type:String,value:""},filter:{type:String,value:""},ignore:{type:Array,value:function(){return[]}},valueMap:{type:Object,value:null},buckets:{type:Array,value:function(){return[]}},bucketsIronList:{type:Array,value:function(){return[]}},ironListActive:{type:Boolean,value:!1},notified:{type:Object,value:function(){return{}}}}}}]),i(t,[{key:"resize",value:function(){var e=this;requestAnimationFrame(function(){e.$.list.fire("iron-resize")})}},{key:"_onFilterBucketsUpdate",value:function(e){var t=this;if(e.filter===this.filter){if(e.buckets.forEach(function(e){t.notified[e.key]&&!e.active?t._notifySelected(e.active,e.key):!t.notified[e.key]&&e.active&&t._notifySelected(e.active,e.key)}),Object.keys(e.buckets).length>50){this.$.list.style.display="block";var n=this.$.list.scrollTop;this.bucketsIronList=e.buckets,this.buckets=[],this.ironListActive=!0,this.$.list.scrollTop=n,requestAnimationFrame(function(){t.$.list.scrollTop=n})}else this.$.list.style.display="none",this.bucketsIronList=[],this.buckets=e.buckets,this.ironListActive=!1;this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:0!==e.buckets.length}}))}}},{key:"getBuckets",value:function(){return this.ironListActive?this.bucketsIronList:this.buckets}},{key:"onParentFilterClicked",value:function(e){var t=this._getCurrentSearchDocument();this._setPaging(t,0),this._removeKeywordFilter(t,this.filter,e),this.RecordModel.setSearchLocation(t),this._notifySelected(!1,e)}},{key:"_notifySelected",value:function(e,t){!e&&this.notified[t]?delete this.notified[t]:e&&(this.notified[t]=!0),this.dispatchEvent(new CustomEvent((e?"add":"remove")+"-selected",{detail:{label:t}}))}},{key:"_toggleFilter",value:function(e){e.currentTarget.checked?this.appendFilter(e):this.removeFilter(e)}},{key:"appendFilter",value:function(e){var t=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))];if(!t.empty){var n=this._getCurrentSearchDocument();this._setPaging(n,0),this._appendKeywordFilter(n,this.filter,t.key),this.RecordModel.setSearchLocation(n),this._notifySelected(!0,t.key)}}},{key:"removeFilter",value:function(e){var t=this.getBuckets()[parseInt(e.currentTarget.getAttribute("index"))],n=this._getCurrentSearchDocument();this._setPaging(n,0),this._removeKeywordFilter(n,this.filter,t.key),this.RecordModel.setSearchLocation(n),this._notifySelected(!1,t.key)}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}}]),t}();window.customElements.define("app-facet-filter",c)},268:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n\n  .label {\n    cursor: pointer;\n    display: flex;\n    color: var(--default-primary-color);\n    padding: 10px 0;\n    font-weight: bold;\n    position: relative;\n    outline: none !important;\n  }\n\n  .highlight {\n    position: absolute;\n    left: -10px;\n    top: 0;\n    bottom: 0;\n    width: 4px;\n    background-color:  var(--default-secondary-color);\n    display: none;\n  }\n\n  .label:focus > .highlight {\n    display: block;\n  }\n\n  #activeFilters > div {\n    padding: 4px 5px;\n  }\n\n  .filter {\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    font-weight: bold;\n    font-style: italic;\n  }\n\n  iron-icon[closed] {\n    transform: rotate(-90deg);\n  }\n\n  iron-icon[clear] {\n    color: var(--default-secondary-color);\n    margin-right: 2px;\n  }\n\n  #filters {\n    overflow-y: auto;\n    max-height: 200px;\n  }\n</style>\n\n<div class="label" on-click="_onToggleClicked" on-keyup="_onToggleClicked" role="button" tabindex="0">\n  <div style="flex:1">[[filter.label]]</div>\n  <iron-icon icon="arrow-drop-down" closed$="[[!opened]]"></iron-icon>\n  <div class="highlight"></div>\n</div>\n\n<div id="activeFilters" hidden$="[[opened]]">\n  <div hidden$="[[!selected.length]]">\n    <template is="dom-repeat" items="[[selected]]">\n      <div class="filter" \n        on-click="_onFilterClicked"\n        on-keyup="_onFilterClicked" \n        label$="[[item.label]]"\n        tabindex="0" \n        role="button">\n        <iron-icon icon="fin-icons:close" clear></iron-icon>\n        <div>[[item.label]]</div>\n      </div>\n    </template>\n  </div>\n</div>\n\n<div id="filters" hidden$="[[!opened]]"></div>'},269:function(e,t){e.exports='<style>\n  :host {\n    display: block;\n  }\n  \n  .labels {\n    display: flex;\n    margin: 0 23px 0 13px;\n    color: var(--gray-text);\n    font-size: var(--font-size-sm);\n  }\n\n  .inputs {\n    display: flex;\n    align-items: center;\n  }\n\n  input[type="number"] {\n    margin: 0 13px;\n    padding: 7px;\n    border: 0;\n    width: 50px;\n    font-size: var(--font-size-sm);\n  }\n\n  .unknown {\n    margin-left: 9px;\n    display: flex;\n    align-items: center;\n  }\n\n  label {\n    font-size: var(--font-size-sm);\n    font-style: italic;\n    padding-left: 5px;\n  }\n\n  app-range-slider {\n    --light-background-color: var(--medium-background-color);\n  }\n</style>\n\n<div class="inputs">\n  <input id="minValueInput" type="number" on-change="_onInputChange" >\n  <span> - </span>\n  <input id="maxValueInput" type="number" on-change="_onInputChange" >\n</div>\n\n<div style="margin-right: 10px">\n  <app-range-slider\n    id="slider"\n    on-range-value-change="_onRangeSliderChange"\n    abs-min-value="[[absMinValue]]"\n    abs-max-value="[[absMaxValue]]"\n    min-value="[[minValue]]"\n    max-value="[[maxValue]]">\n  </app-range-slider>\n</div>\n\n<div class="labels">\n  <div style="flex:1">[[absMinValue]]</div>\n  <div>[[absMaxValue]]</div>\n</div>\n\n<div class="unknown" hidden$="[[showUnknown]]">\n  <input type="checkbox" id="unknown" on-click="_onRangeNullChange" checked />\n  <label for="unknown">include unknown / unspecified</label>\n</div>'},270:function(e,t){e.exports='<style>\n  :host {\n    display: block;\n    position: relative;\n    height: 50px;\n    margin: 0 13px;\n\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently */\n  }\n\n  #numberLine {\n    position: absolute;\n    left : 0;\n    right : 0;\n    height: 3px;\n    background-color: var(--light-background-color, #888);\n  }\n\n  #fillLine {\n    position: absolute;\n    cursor: move;\n    background-color: var(--default-primary-color);\n    height: 3px;\n  }\n\n  .btn {\n    position: absolute;\n    height: 25px;\n    width: 25px;\n    cursor: move;\n  }\n\n  .btn > div {\n    margin: 5px;\n    height: 15px;\n    width: 15px;\n    border-radius: 15px;\n    background-color: var(--default-primary-color);\n    transition: all 150ms linear;\n  }\n\n  .btn[moving] > div {\n    margin: 0px;\n    height: 25px;\n    width: 25px;\n    border-radius: 25px;\n  }\n\n  .label {\n    width : 25px;\n    font-size: 12px; \n    position: absolute;\n    text-align: center;\n    transform: scale(0);\n    transition: transform 200ms linear;\n    color: var(--default-primary-color);\n  }\n\n  .label[moving] {\n    transform: scale(1);\n  }\n\n</style>\n\n<div id="numberLine"></div>\n\n<div id="fillLine" \n  prop="range" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart">\n</div>\n\n<div id="lowNumberLabel" class="label" moving$="[[isMoving]]">[[minValueLabel]]</div>\n<div id="highNumberLabel" class="label" moving$="[[isMoving]]">[[maxValueLabel]]</div>\n\n<div id="lowNumberBtn" \n  class="btn" \n  prop="min" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMin]]" >\n  <div></div>\n</div>\n\n<div id="highNumberBtn" \n  class="btn" \n  prop="max" \n  on-mousedown="_onMoveStart" \n  on-touchstart="_onMoveStart" \n  moving$="[[movingMax]]">\n  <div></div>\n</div>'},271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(9),l=n(270),s=(i=l)&&i.__esModule?i:{default:i};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._windowResizeListener=e._onResize.bind(e),e._windowMouseListener=e._onMoveStop.bind(e),e.addEventListener("mousemove",function(t){return e._onMove(t)}),e.addEventListener("touchmove",function(t){return e._onMove(t)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PolymerElement),r(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=s.default,e}},{key:"properties",get:function(){return{absMinValue:{type:Number,value:0,observer:"_renderAsync"},absMaxValue:{type:Number,value:100,observer:"_renderAsync"},minValue:{type:Number,value:10,observer:"_renderAsync"},maxValue:{type:Number,value:90,observer:"_renderAsync"},minValueLabel:{type:String,value:""},maxValueLabel:{type:String,value:""},width:{type:Number,value:1},height:{type:Number,value:1},btnHeight:{type:Number,value:1},moving:{type:String,value:""},movingMin:{type:Boolean,value:!1},movingMax:{type:Boolean,value:!1},isMoving:{type:Boolean,value:!1}}}}]),r(t,[{key:"connectedCallback",value:function(){var e=this;o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),requestAnimationFrame(function(){e._onResize()}),window.addEventListener("resize",this._windowResizeListener),window.addEventListener("mouseup",this._windowMouseListener),window.addEventListener("mouseout",this._windowMouseListener),window.addEventListener("touchend",this._windowMouseListener),window.addEventListener("touchcancel",this._windowMouseListener)}},{key:"disconnectedCallback",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("mouseup",this._windowMouseListener),window.removeEventListener("mouseout",this._windowMouseListener),window.removeEventListener("touchend",this._windowMouseListener),window.removeEventListener("touchcancel",this._windowMouseListener)}},{key:"_onResize",value:function(){this.width=this.offsetWidth||1,this.height=this.offsetHeight,this.left=this.offsetLeft,this.btnHeight=this.$.lowNumberBtn.offsetHeight,this._render()}},{key:"_valueToPx",value:function(e){e-=this.absMinValue;var t=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e/t)}},{key:"_pxToValue",value:function(e){var t=(this.absMaxValue-this.absMinValue)/this.width;return Math.round(e*t)+this.absMinValue}},{key:"_renderAsync",value:function(){var e=this;this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(function(){e.renderTimer=0,e._render()},0)}},{key:"_render",value:function(){var e=.6*this.height;this.$.numberLine.style.top=e+"px",this.$.fillLine.style.top=e+"px";var t=this.btnHeight/2;this.$.lowNumberBtn.style.top=e-t+"px",this.$.highNumberBtn.style.top=e-t+"px",this.$.lowNumberLabel.style.top=e-t-22+"px",this.$.highNumberLabel.style.top=e-t-22+"px";var n=this._valueToPx(this.minValue),i=this._valueToPx(this.maxValue);this.$.lowNumberBtn.style.left=n-t+"px",this.$.highNumberBtn.style.left=i-t+"px",this.$.lowNumberLabel.style.left=n-t+"px",this.$.highNumberLabel.style.left=i-t+"px",this.$.fillLine.style.left=n+"px",this.$.fillLine.style.width=i-n+"px",this.minValueLabel=this.renderLabel(this.minValue),this.maxValueLabel=this.renderLabel(this.maxValue)}},{key:"_onMoveStart",value:function(e){this.moving=e.currentTarget.getAttribute("prop"),"range"===this.moving&&(this.startRange={min:e.currentTarget.offsetLeft,max:e.currentTarget.offsetLeft+e.currentTarget.offsetWidth,left:e.pageX-this.left}),this.isMoving=!0,this.movingMin="max"!==this.moving,this.movingMax="min"!==this.moving}},{key:"_onMove",value:function(e){if(this.moving){e.preventDefault();var t=void 0;if("touchmove"===e.type){if(!e.changedTouches.length)return;t=e.changedTouches[0].pageX-this.left}else t=e.pageX-this.left;if("min"===this.moving)this.minValue=this._pxToValue(t);else if("max"===this.moving)this.maxValue=this._pxToValue(t);else if("max"===this.moving)this.maxValue=this._pxToValue(t);else if("range"===this.moving){var n=this.startRange.left-t;this.minValue=this._pxToValue(this.startRange.min-n),this.maxValue=this._pxToValue(this.startRange.max-n)}this.minValue<this.absMinValue&&(this.minValue=this.absMinValue),this.maxValue>this.absMaxValue&&(this.maxValue=this.absMaxValue),this.minValue>this.maxValue&&("min"===this.moving?this.minValue=this.maxValue:this.maxValue=this.minValue)}}},{key:"_onMoveStop",value:function(){this.moving&&(this.moving="",this.movingMin=!1,this.movingMax=!1,this.isMoving=!1,this.dispatchEvent(new CustomEvent("range-value-change",{detail:{min:this.minValue,max:this.maxValue}})))}},{key:"renderLabel",value:function(e){return e}}]),t}();t.default=c,customElements.define("app-range-slider",c)},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(271);var r=s(n(61)),a=s(n(60)),l=s(n(269));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default)),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{label:{type:String,value:""},filter:{type:String,value:""},absMinValue:{type:Number,value:-1},absMaxValue:{type:Number,value:-1},minValue:{type:Number,value:-1},maxValue:{type:Number,value:Number.MAX_VALUE},showUnknown:{type:Boolean,value:!1}}}}]),i(t,[{key:"connectedCallback",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),this.resize()}},{key:"resize",value:function(){var e=this;this.$.slider._onResize(),setTimeout(function(){e.$.slider._onResize()},100)}},{key:"_isDefaultState",value:function(){if(!this._isFilterApplied()){var e=this._getCurrentSearchDocument();return this._removeRangeFilter(e,this.filter),this.RecordModel.setSearchLocation(e),!0}return!1}},{key:"_onRangeSliderChange",value:function(e){this.minValue=e.detail.min,this.maxValue=e.detail.max,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this._onRangeNullChange()}},{key:"_onRangeNullChange",value:function(){var e={gte:this.minValue,lte:this.maxValue};if(this.$.unknown.checked&&(e.includeNull=!0),!this._isDefaultState()){var t=this._getCurrentSearchDocument();this._setPaging(t,0),this._appendRangeFilter(t,this.filter,e),this.RecordModel.setSearchLocation(t)}}},{key:"_onInputChange",value:function(){var e=this.$.minValueInput.value,t=this.$.maxValueInput.value;e<this.absMinValue&&(this.$.minValueInput.value=this.absMinValue,e=this.absMinValue),t>this.absMaxValue&&(this.$.maxValueInput.value=this.absMaxValue,t=this.absMaxValue),e>t&&(e=t),this.minValue=e,this.maxValue=t,this._onRangeNullChange()}},{key:"_onSelectedCollectionUpdate",value:function(e){this.selectedCollection=e?e["@id"]:"",this._renderFilters()}},{key:"_onRecordSearchUpdate",value:function(e){"loaded"===e.state&&(this.currentFilters=e.searchDocument.filters||{},this._renderFilters())}},{key:"_renderFilters",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentFilters){e.next=2;break}return e.abrupt("return");case 2:return t=this.selectedCollection,e.next=5,this._defaultRecordSearch(this.selectedCollection);case 5:if(n=e.sent,t===this.selectedCollection){e.next=8;break}return e.abrupt("return");case 8:if(this.default=n,!(i=this.default.payload.aggregations.ranges[this.filter])){e.next=15;break}this.absMinValue=i.min,this.absMaxValue=i.max,e.next=16;break;case 15:return e.abrupt("return",this._show(!1));case 16:this._show(!0),(this.minValue<this.absMinValue||!this.currentFilters[this.filter])&&(this.minValue=this.absMinValue,this.$.minValueInput.value=this.minValue),(this.maxValue>this.absMaxValue||!this.currentFilters[this.filter])&&(this.maxValue=this.absMaxValue,this.$.maxValueInput.value=this.maxValue),this.currentFilters[this.filter]&&(o=this.currentFilters[this.filter].value,this.minValue=o.gte,this.maxValue=o.lte,this.$.minValueInput.value=this.minValue,this.$.maxValueInput.value=this.maxValue,this.$.unknown.checked=!!o.includeNull),this._notifySelected();case 21:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(o,r){try{var a=t[o](r),l=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"_isFilterApplied",value:function(){return this.minValue!==this.absMinValue||this.maxValue!==this.absMaxValue||!0!==this.$.unknown.checked}},{key:"_notifySelected",value:function(){var e=!1,t="";this.minValue===this.absMinValue&&this.maxValue===this.absMaxValue&&this.$.unknown.checked||(e=!0),e&&(t=this.minValue+" to "+this.maxValue),this.dispatchEvent(new CustomEvent("set-selected",{detail:{selected:e,label:t}}))}},{key:"_show",value:function(e){this.dispatchEvent(new CustomEvent("update-visibility",{detail:{show:e}}))}},{key:"reset",value:function(){this.minValue=this.absMinValue,this.maxValue=this.absMaxValue,this.$.unknown.checked=!0,this._onRangeNullChange()}},{key:"onParentFilterClicked",value:function(){this.reset()}}]),t}();t.default=c,customElements.define("app-range-filter",c)},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppFilterPanel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(195),n(274),n(272);var r,a=n(268),l=(r=a)&&r.__esModule?r:{default:r};n(267);var s=t.AppFilterPanel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PolymerElement),i(t,[{key:"_render",value:function(){var e=this;if(this.filter){this.innerHTML="";var t=document.createElement("app-"+this.filter.type+"-filter");t.label=this.filter.label,t.filter=this.filter.filter,t.ignore=this.filter.ignore,t.valueMap=this.filter.valueMap||{},t.isDollar=this.filter.isDollar,t.addEventListener("update-visibility",function(t){e.style.display=t.detail.show?"block":"none"}),t.addEventListener("add-selected",function(t){e.selected.findIndex(function(e){return e.label===t.detail.label})>-1||e.push("selected",t.detail)}),t.addEventListener("remove-selected",function(t){var n=e.selected.findIndex(function(e){return e.label===t.detail.label});-1!==n&&e.splice("selected",n,1)}),t.addEventListener("set-selected",function(t){t.detail.selected?e.selected=[t.detail]:e.selected=[]}),this.ele=t,this.$.filters.appendChild(t)}}},{key:"toggle",value:function(){this.opened=!this.opened}},{key:"_toggleOpened",value:function(){this.opened&&this.ele&&this.ele.resize&&this.ele.resize()}},{key:"_onToggleClicked",value:function(e){"keyup"===e.type&&13!==e.which&&32!==e.which||this.toggle()}},{key:"_onFilterClicked",value:function(e){"keyup"===e.type&&13!==e.which||this._notifyFilterClicked(e.currentTarget.getAttribute("label"))}},{key:"_notifyFilterClicked",value:function(e){this.ele&&this.ele.onParentFilterClicked&&this.ele.onParentFilterClicked(e)}}],[{key:"properties",get:function(){return{filter:{type:Object,value:null,observer:"_render"},opened:{type:Boolean,value:!1,observer:"_toggleOpened"},selected:{type:Array,value:function(){return[]}}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}}]),t}();window.customElements.define("app-filter-panel",s)},279:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(65),n(278),n(256),n(249);var r=c(n(61)),a=c(n(60)),l=c(n(247)),s=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var u=[];for(var p in s.default.elasticSearch.facets)u.push({label:s.default.elasticSearch.facets[p].label,type:s.default.elasticSearch.facets[p].type,ignore:s.default.elasticSearch.facets[p].ignore,valueMap:s.default.elasticSearch.facets[p].valueMap,isDollar:s.default.elasticSearch.facets[p].isDollar,filter:p});var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default)),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{facetFilters:{type:Array,value:function(){return u}},selectedTab:{type:String,value:""},selectedCollection:{type:Object,value:function(){}},collectionMode:{type:Boolean,value:!1},tabs:{type:Array,value:function(){return[{label:"Information",value:"info"},{label:"Filters",value:"filters"}]}}}}}]),i(t,[{key:"ready",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this._onSelectedCollectionUpdate()}},{key:"_onSelectedCollectionUpdate",value:function(e){if(!e)return this.selectedTab="filters",void(this.collectionMode=!1);this.collectionMode=!0,this.selectedCollection=e,this.selectedTab||(this.selectedTab="info")}},{key:"_fireToggleDrawer",value:function(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}},{key:"_removeCollectionFilter",value:function(){var e=this._getCurrentSearchDocument();this._removeKeywordFilter(e,"isPartOf.@id"),this._setPaging(e,0),this.RecordModel.setSearchLocation(e)}}]),t}();customElements.define("app-filters-panel",d)},280:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    max-width: 1150px;\n    position: relative;\n  }\n\n  .header {\n    font-size: var(--font-size-sm);\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n\n  select {\n    margin-left: 10px;\n    border: 1px solid var(--light-background-color);\n    border-radius: 0;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -ms-appearance: none;\n    -o-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0px;\n    padding: 5px 30px 5px 10px;\n    background-position: right 10px center;\n    background-size: 16px 16px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    background-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCA2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzAwMjg1NTt9PC9zdHlsZT48L2RlZnM+PGc+PHBvbHlnb24gY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMCAxMCAwIDUgNiAwIDAiLz48L2c+PC9zdmc+\');\n  }\n  /* for IE */\n  select::-ms-expand {\n    display: none;\n  }\n\n  h3 {\n    border-top: 1px solid var(--light-background-color);\n    margin: 15px 0 0 0;\n    padding: 15px 0 0 0;\n    color: var(--default-primary-color);\n  }\n\n  .masonry {\n    padding: 10px;\n    position: relative;\n  }\n\n  .masonry .item {\n    display: block;\n    position: absolute;\n    /* visibility: hidden; */\n    top : 25px;\n    left: 25px;\n    will-change: top, left;\n    transition: top 500ms ease-out, left 500ms ease-out;\n  }\n\n  .list {\n    margin: 10px;\n  }\n\n  .list .item {\n    padding: 10px;\n    margin-bottom: 15px;\n    background-color: #daaa00;\n    height: 250px;\n  }\n\n  .spacer {\n    height: 20px;\n    border-right: 1px solid var(--light-background-color);\n  }\n\n  .total {\n    font-style: italic; \n    padding-left: 10px;\n  }\n\n  .mobile-total {\n    font-style: italic; \n  }\n\n  .filler {\n    flex: 1;\n  }\n\n  paper-spinner-lite {\n    --paper-spinner-color: var(--default-secondary-color);\n  }\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n  }\n\n  .error {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 250px;\n    color: red;\n  }\n\n  cork-pagination {\n    display: inline-block;\n\n    --cork-color : var(--default-primary-color);\n    --cork-background-color : var(--default-secondary-color);\n  }\n\n  .drawer-toggle {\n    font-size: var(--font-size-sm);\n    cursor: pointer;\n    text-transform: uppercase;\n    display: flex;\n    align-items: center;\n    font-weight: var(--font-weight-heavy);\n    color: var(--default-primary-color);\n    background-color: var(--light-background-color);\n    border-radius: 0;\n    border: 0;\n    padding: 0;\n  }\n  .drawer-toggle > span {\n    padding : 0 10px;\n  }\n  .drawer-toggle iron-icon {\n    background-color: var(--default-secondary-color);\n  }\n\n  .drawer-toggle[disabled] {\n    color: var(--light-background-color);\n  }\n\n  .header {\n    display : none;\n  }\n\n  .mobile-header {\n    padding-top: 15px;\n    margin-bottom: 10px;\n  }\n\n  .mobile-header .row2 {\n    display: flex;\n    align-items: center;\n    margin-right: 10px;\n  }\n\n  .collections {\n    text-align: center;\n  }\n\n  @media( min-width: 975px ) {\n    .header {\n      display: flex;\n    }\n    .mobile-header {\n      display: none;\n    }\n  }\n</style>\n\n<div class="header">\n  <div class="total">[[total]] results found</div>\n  \n  <div class="filler"></div>\n  \n  <paper-icon-button \n    noink\n    icon="fin-icons:grid" \n    disabled$="[[!isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="masonry">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  <paper-icon-button \n    noink\n    icon="fin-icons:list" \n    disabled$="[[isListLayout]]"\n    on-click="_onLayoutToggle" \n    type="list">\n  </paper-icon-button>\n  <div class="spacer"></div>\n  \n  <div>\n    <select id="numPerPage" on-change="_onPageSizeChange">\n      <option value="50">50</option>\n      <option value="20">20</option>\n      <option value="10" selected>10</option>\n    </select>\n  </div>\n  <div style="margin: 0 10px; font-style:italic">Items per page</div>\n</div>\n\n<div class="mobile-header">\n  <div>\n    <div style="display:inline-block">\n      <button class="drawer-toggle" on-click="_onToggleDrawer">\n        <span>Info / Filters</span>\n        <iron-icon icon="add"></iron-icon>\n      </button>\n    </div>\n  </div>\n\n  <div class="row2">\n    <div class="total">[[total]] results</div>\n\n    <div class="filler"></div>\n    \n    <paper-icon-button \n      noink\n      icon="fin-icons:grid" \n      disabled$="[[!isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="masonry">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    <paper-icon-button\n      noink\n      icon="fin-icons:list" \n      disabled$="[[isListLayout]]"\n      on-click="_onLayoutToggle" \n      type="list">\n    </paper-icon-button>\n    <div class="spacer"></div>\n    \n    <div>\n      <select id="numPerPageM" on-change="_onPageSizeChange">\n        <option>50</option>\n        <option>20</option>\n        <option>10</option>\n      </select>\n    </div>\n    <div style="margin: 0 10px; font-style:italic">per page</div>\n  </div>\n</div>\n\n<div class="collections" hidden$="[[!showCollectionResults]]">\n  <div hidden$="[[!collectionResults.length]]">\n    <h3>Collections</h3>\n    <template is="dom-repeat" items="[[collectionResults]]">\n      <app-collection-card \n        collection="[[item]]" \n        on-keyup="_onCollectionClicked"\n        on-click="_onCollectionClicked">\n      </app-collection-card>\n    </template>\n    <h3 hidden$="[[!results.length]]">Items</h3>\n  </div>\n</div>\n\n<div hidden$="[[showError]]">\n  <div hidden$="[[showLoading]]">\n    <div class="masonry" id="layout" hidden$="[[isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-grid-result data="[[item]]" class="item"></app-search-grid-result>\n      </template>\n    </div>\n\n    <div class="list" hidden$="[[!isListLayout]]">\n      <template is="dom-repeat" items="[[results]]">\n        <app-search-list-result data="[[item]]"></app-search-list-result>\n      </template>\n    </div>\n  </div>\n</div>\n\n<div class="error" hidden$="[[!showError]]">\n  <div>[[errorMsg]]</div>\n</div>\n<div class="loading" hidden$="[[!showLoading]]">\n  <paper-spinner-lite active$="[[showLoading]]"></paper-spinner-lite>\n</div>\n\n<div style="text-align:center">\n  <cork-pagination \n    total-results="[[paginationTotal]]" \n    items-per-page="[[numPerPage]]"\n    current-index="[[currentIndex]]"\n    on-nav="_onPaginationNav">\n  </cork-pagination>\n</div>\n\n<div hidden$="[[!totalOverMaxWindow]]" style="text-align: center">Digital Collections limits results to \n  10,000.  Use keywords and/or filters to refine search.\n</div>'},281:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    background-color: white;\n    margin: 10px;\n    border: 2px solid transparent;\n  }\n  \n  :host(:hover), :host(:focus) {\n    cursor: pointer;\n    border: 2px solid var(--default-secondary-color);\n    outline: none !important;\n  }\n\n  .img {\n    height: 250px;\n    width: var(--grid-cell-width);\n    background-size: cover;\n    background-color: white;\n    background-position: center center;\n  }\n\n  .collection-name {\n    text-transform: uppercase;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n  }\n\n  .year {\n    color: var(--gray-text);\n    flex: 1;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  .layout {\n    display: flex;\n  }\n\n  h4 {\n    margin: 10px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .flex-vertical {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .data {\n    padding: 15px; \n    flex: 1;\n    overflow: hidden;\n  }\n\n  @media(max-width: 600px) {\n    .img {\n      height: auto;\n      width: 150px;\n    }\n\n    .data {\n      padding: 8px;\n    }\n\n    :host {\n      display: block;\n      background-color: white;\n      margin: 10px 0;\n    }\n  }\n</style>\n\n<div class="layout">\n  <div style$="background-image: url(\'[[imgUrl]]\')" hidden$="[[!isImage]]" class="img" ></div>\n\n  <div class="data">\n    <div class="flex-vertical">\n      <div class="collection-name">[[collectionName]]</div>\n      \n      <h4>[[name]]</h4>\n    \n      <template is="dom-repeat" items="[[creator]]">\n        <app-search-result-creator creator="[[item]]"></app-search-result-creator>\n      </template>\n      \n      <div class="spacer"></div>\n\n      <div class="footer">\n        <div class="year">[[year]]</div>\n        <div>\n          \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppSearchListResult=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(196)),r=a(n(281));function a(e){return e&&e.__esModule?e:{default:e}}var l=t.AppSearchListResult=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}}]),t}();customElements.define("app-search-list-result",l)},283:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n    width: var(--grid-cell-width);\n    background-color: white;\n    cursor: pointer;\n  }\n\n  :host(:hover), :host(:focus) {\n    border: 2px solid var(--default-secondary-color);\n    margin: -2px 0 0 -2px;\n    outline: none !important;\n  }\n\n  @keyframes show-img {\n    from {opacity: 0}\n    to {opacity: 1}\n  }\n\n  img {\n    animation: show-img 300ms linear;\n    box-sizing: border-box;\n    display:none;\n    /* width: var(--grid-cell-width); */\n    /* background-size: cover;\n    background-color: transparent;\n    background-position: center center; */\n    /* position: absolute;\n    top: 0;\n    left: 0; */\n  }\n\n  .collection-name {\n    font-style: italic;\n    font-size: var(--font-size-sm);\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n  }\n\n  .year {\n    color: var(--gray-text);\n    font-weight: var(--font-weight-light);\n    flex: 1;\n  }\n\n  .footer {\n    display : flex; \n    align-items : center; \n    margin-top : 10px;\n  }\n\n  h4 {\n    margin: 5px 0;\n    color: var(--default-primary-color);\n  }\n\n  iron-icon {\n    color: var(--default-primary-color);\n  }\n\n  .image {\n    position: relative; \n    background-size: cover;\n    background-color: transparent;\n    background-position: center center;\n    width: 250px; \n  }\n\n  .card-text {\n    padding: 15px;\n    line-height: 1.3;\n  }\n\n  .video-thumbnail {\n    z-index: 1000;\n    width: 30px; \n    height: 30px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    background-image: url(\'https://via.placeholder.com/25\');\n  }\n</style>\n\n<div \n  hidden$="[[!isImage]]" \n  class="image" \n  id="imgRoot"\n  style$="background-image: url(\'[[imgThumbail]]\'); height:[[imgHeight]]px;">\n  <img id="img" src$="[[imgUrl]]" style$="height:[[imgHeight]]px; width: 100%" onload="this.style.display=\'block\';" />\n  <div hidden$="[[!isVideo]]" class="video-thumbnail"></div>\n  \x3c!--\n    <div style$="background-image: url(\'[[imgThumbail]]\');height:[[imgHeight]]px" class="img"></div>\n    <div style$="background-image: url(\'[[imgUrl]]\');height:[[imgHeight]]px" class="img"></div>\n  --\x3e\n</div>\n\n<div class="card-text">\n  <div class="collection-name">[[collectionName]]</div>\n\n  <h4>[[name]]</h4>\n\n  <template is="dom-repeat" items="[[creator]]">\n    <app-search-result-creator creator="[[item]]" grid></app-search-result-creator>\n  </template>\n\n  <div class="footer">\n    <div class="year">[[year]]</div>\n    <div>\n      \x3c!-- <iron-icon icon="fin-icons:image" hidden$="[[!isImage]]"></iron-icon> --\x3e\n    </div>\n  </div>\n</div>'},284:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .text {\n    display: block;\n    color: var(--gray-text);\n    line-height: 1.3;\n    font-weight: var(--font-weight-light);\n  }\n  :host([grid]) .text {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: calc(var(--grid-cell-width) - 30px);\n  }\n</style>\n\n<a class="text" hidden="[[!link]]" href="[[textLabel]]" target="_blank" rel="noopener" on-click="_onClick">[[textLabel]]</a>\n<div class="text" hidden="[[link]]">[[textLabel]]</div>'},285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9),a=n(284),l=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.PolymerElement),o(t,[{key:"_onCreatorUpdate",value:function(){this.creator&&(this.creator["@id"]?this.link=!0:this.link=!1,this.creator.name?this.textLabel=this.creator.name:this.textLabel=this.creator["@id"])}},{key:"_onClick",value:function(e){e.stopPropagation()}}],[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=l.default,e}},{key:"properties",get:function(){return{creator:{type:Object,value:null,observer:"_onCreatorUpdate"},textLabel:{type:String,value:""},link:{type:Boolean,value:!1}}}}]),t}();t.default=s,customElements.define("app-search-result-creator",s)},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppSearchGridResult=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(196)),r=a(n(283));function a(e){return e&&e.__esModule?e:{default:e}}var l=t.AppSearchGridResult=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,null,[{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=r.default,e}}]),t}();customElements.define("app-search-grid-result",l)},289:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(9);n(288),n(286),n(282),n(183);var r=u(n(61)),a=u(n(34)),l=u(n(60)),s=u(n(164)),c=u(n(280));function u(e){return e&&e.__esModule?e:{default:e}}var p=localStorage.getItem("search-results-layout");p="list"===p;var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.active=!0,e.resizeTimer=-1,window.addEventListener("resize",function(){return e._resizeAsync()}),e.EventBus().on("show-collection-search-results",function(t){return e._updateCollectionResultsVisibility(t)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Mixin(o.PolymerElement).with(EventInterface,r.default,a.default,l.default,s.default)),i(t,null,[{key:"properties",get:function(){return{results:{type:Array,value:function(){return[]}},collectionResults:{type:Array,value:function(){return[]}},masonryMargin:{type:Number,value:15},isListLayout:{type:Boolean,value:p},total:{type:String,value:"0"},numPerPage:{type:Number,value:1},currentIndex:{type:Number,value:0},showCollectionResults:{type:Boolean,value:!1},showError:{type:Boolean,value:!1},showLoading:{type:Boolean,value:!1},errorMsg:{type:Boolean,value:!1},paginationTotal:{type:Number,value:!1},totalOverMaxWindow:{type:Boolean,value:!1}}}},{key:"template",get:function(){var e=document.createElement("template");return e.innerHTML=c.default,e}}]),i(t,[{key:"_onAppStateUpdate",value:function(e){"search"===e.location.page&&this._resizeAsync()}},{key:"render",value:function(e,t,n,i){var o=this;this.results=[],this.showHeaderFooter=!0,this.showError=!1,clearTimeout(this.showLoadingTimer),this.showLoading=!1,requestAnimationFrame(function(){o.total=o.numberWithCommas(t);var r=Math.floor((1e4-n)/n)*n;t>r?(t=r,o.totalOverMaxWindow=!0):o.totalOverMaxWindow=!1,o.results=e,o.paginationTotal=t,o.numPerPage=n,o.$.numPerPage.value=n+"",o.$.numPerPageM.value=n+"",o.currentIndex=i,requestAnimationFrame(function(){return o._resize()})})}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"onLoading",value:function(){var e=this;this.results=[],this.showCollectionResults=!1,this.showError=!1,this.showLoadingTimer=setTimeout(function(){e.showLoading=!0},100)}},{key:"onError",value:function(e){this.results=[],this.showCollectionResults=!1,this.showError=!0,clearTimeout(this.showLoadingTimer),this.showLoading=!1,e.showErrorMessage?this.errorMsg=e.error.message:this.errorMsg="Ooops. Something went wrong with search!"}},{key:"_onLayoutToggle",value:function(e){var t=this;"masonry"===e.currentTarget.getAttribute("type")?(this.isListLayout=!1,localStorage.setItem("search-results-layout","masonry")):(this.isListLayout=!0,localStorage.setItem("search-results-layout","list")),this.isListLayout||requestAnimationFrame(function(){return t._resize()})}},{key:"_resizeAsync",value:function(){var e=this;-1!==this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.resizeTimer=-1,e._resize()},50)}},{key:"_resize",value:function(){if(!this.isListLayout){var e=this.$.layout.querySelector("app-search-grid-result");if(e){for(var t=this.offsetWidth,n=e.offsetWidth+this.masonryMargin,i=Math.max(Math.floor(t/n),1),o=Math.floor((t-i*n)/2),r=[],a=0;a<i;a++)r.push(0);for(var l=this.$.layout.querySelectorAll("app-search-grid-result"),s=0;s<l.length;s++){var c=this._findMinCol(r);r[c];l[s].style.left=o+c*n+"px",l[s].style.top=r[c]+"px",r[c]+=l[s].offsetHeight+this.masonryMargin}var u=Math.max.apply(Math,r);this.$.layout.style.height=u+"px"}}}},{key:"_findMinCol",value:function(e){for(var t=e[0],n=0,i=1;i<e.length;i++)t>e[i]&&(t=e[i],n=i);return n}},{key:"_onToggleDrawer",value:function(){this.dispatchEvent(new CustomEvent("toggle-drawer"))}},{key:"_onPageSizeChange",value:function(e){this.dispatchEvent(new CustomEvent("page-size-change",{detail:parseInt(e.currentTarget.value)}))}},{key:"_onPaginationNav",value:function(e){this.dispatchEvent(new CustomEvent("page-change",{detail:e.detail}))}},{key:"_updateCollectionResultsVisibility",value:function(e){this.showCollectionResults=e}},{key:"_onCollectionSearchUpdate",value:function(e){"loaded"===e.state&&(this.collectionResults=e.payload.results)}},{key:"_onCollectionClicked",value:function(e){if("keyup"!==e.type||13===e.which){var t=e.currentTarget.collection["@id"],n=this._getEmptySearchDocument();this._setKeywordFilter(n,"isPartOf.@id",t),this.RecordModel.setSearchLocation(n)}}}]),t}();customElements.define("app-search-results-panel",d)},290:function(e,t){e.exports='<style include="shared-styles">\n  :host {\n    display: block;\n  }\n  .search-container {\n    background-color: var(--super-light-background-color);\n    min-height: 60vh;\n    display: block;\n  }\n  .search-content {\n    flex: 1;\n    padding-bottom: 35px;\n  }\n  app-filters-panel {\n    width: 350px;\n  }\n\n  #drawer app-filters-panel {\n    width: 300px;\n  }\n  \n  #drawer {\n    position: absolute;\n    top: 0;\n    left: -335px;\n    bottom: 0;\n    background: white;\n    width: 300px;\n    z-index: 10;\n    transition: left 300ms ease-out;\n    background-color: var(--light-background-color);\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: .7;\n    }\n  }\n\n  #drawer-background {\n    opacity: .7;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: black;\n    z-index: 5;\n    display: none;\n    animation: fadeIn 300ms;\n  }\n\n  #drawer[open] {\n    left: 0;\n  }\n\n  #drawer-background[open] {\n    display: block;\n  }\n\n  #desktop-filter-panel {\n    display: none;\n  }\n\n  @media( min-width: 975px ) {\n    #outerDrawer {\n      display: none;\n    }\n    #desktop-filter-panel {\n      display: block;\n    }\n    .search-container {\n      display: flex;\n    }\n  }\n</style>\n\n<app-search-header></app-search-header>\n<app-search-breadcrumb></app-search-breadcrumb>\n\n<div style="position: relative">\n  <div id="outerDrawer">\n    <div id="drawer" open$="[[drawerOpen]]">\n      <app-filters-panel on-toggle-drawer="_toggleDrawer"></app-filters-panel>\n    </div>\n    <div id="drawer-background" open$="[[drawerOpen]]" on-click="_toggleDrawer"></div>\n  </div>\n\n  <div class="search-container">\n    <app-filters-panel id="desktop-filter-panel"></app-filters-panel>\n    <div class="search-content">\n      <app-search-results-panel \n        id="resultsPanel" \n        on-toggle-drawer="_toggleDrawer" \n        on-page-size-change="_onPageSizeChange"\n        on-page-change="_onPaginationChange">\n      </app-search-results-panel>\n    </div>\n  </div>\n</div>'}}]);